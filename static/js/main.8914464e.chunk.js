(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{138:function(t,e,n){},141:function(t,e,n){},146:function(t,e,n){},149:function(t,e){},154:function(t,e){},170:function(t,e){},172:function(t,e){},204:function(t,e,n){},205:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),c=n(66),a=n.n(c),s=n(3),o=n(10),d=(n(69),n(127),n(137),n(138),n(8)),l=n(39),u=n(2),j=n.n(u),w=n(6),b=n(5),p=n(22),m=n(0);var h=n(4),x=n.n(h),f=(n(141),["icon","children","className","variant"]),O="main",v="filled",g="outlined";function N(t){var e=t.icon,n=t.children,r=t.className,i=t.variant,c=void 0===i?"outlined":i,a=Object(o.a)(t,f),d="";return c===O?d="twind-px-12 twind-py-6 twind-font-bold Button--main twind-rounded-3xl":c===g?d="twind-border-solid twind-border twind-border-blue hover:twind-bg-blue twind-font-semibold twind-rounded-lg":c===v&&(d="twind-bg-dark hover:twind-bg-hover twind-font-semibold twind-rounded-lg"),Object(m.jsxs)("button",Object(s.a)(Object(s.a)({className:x()("twind-inline-flex twind-items-center twind-justify-center twind-p-3  twind-whitespace-nowrap",d,"twind-transition-all",r)},a),{},{children:[e?Object(m.jsx)("div",{className:"twind-mr-2",children:e}):null,n]}))}var C=["icon","children","className","to"];function k(t){var e=t.icon,n=t.children,r=t.className,i=t.to,c=Object(o.a)(t,C),a=Object(d.g)(i),u=a&&a.isExact;return Object(m.jsxs)(l.b,Object(s.a)(Object(s.a)({to:i,className:x()(r,"twind-text-white twind-font-semibold","twind-flex twind-items-center twind-px-5 twind-py-4 twind-rounded-xl ","twind-group twind-cursor-pointer twind-whitespace-nowrap",u?"twind-bg-hover":"","twind-transition-all","hover:twind-bg-hover")},c),{},{children:[Object(m.jsx)("div",{className:x()("group-hover:twind-text-blue",u?"twind-text-blue":""),children:e}),Object(m.jsx)("div",{className:"twind-ml-2",children:n})]}))}n(146);var y=["children","className","error"];function I(t){var e=t.children,n=t.className,r=t.error,i=Object(o.a)(t,y),c=r?"twind-border-red-400":"twind-border-border";return Object(m.jsx)("label",Object(s.a)(Object(s.a)({className:x()("Input twind-font-semibold twind-flex twind-p-4 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",c,n)},i),{},{children:e}))}var _=["children","label","error","className"];function A(t){var e=t.children,n=t.label,r=t.error,i=t.className,c=Object(o.a)(t,_);return Object(m.jsxs)("label",Object(s.a)(Object(s.a)({className:x()("twind-block",i)},c),{},{children:[Object(m.jsx)("div",{className:"twind-mb-1",children:n}),Object(m.jsx)("div",{children:e}),r?Object(m.jsx)("div",{className:"twind-text-red-500 twind-mt-1 twind-text-xs",children:r}):null]}))}var S=function(t){return Object(m.jsx)("svg",Object(s.a)(Object(s.a)({width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(m.jsx)("path",{d:"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731",stroke:"white","stroke-width":"1.5"})}))};function E(t){var e=t.count,n=t.option;return Object(m.jsxs)("span",{children:[n," ",Object(m.jsx)("span",{className:"twind-text-gray twind-font-normal",children:e})]})}function M(t){var e=t.label,n=t.options,i=t.renderOption,c=t.active,a=t.onChange,s=t.className,o=Object(r.useState)(!1),d=Object(b.a)(o,2),l=d[0],u=d[1];return Object(m.jsxs)("div",{className:x()("twind-inline-flex twind-items-center twind-relative",s),children:[Object(m.jsx)("div",{className:"twind-text-gray twind-mr-2",children:e}),Object(m.jsx)(B,{rounded:!0,onClick:function(){return u(!l)},className:"twind-w-36",children:c}),Object(m.jsx)(D,{opened:l,className:"twind-right-0",children:n.map((function(t){return Object(m.jsx)(F,{children:Object(m.jsx)(U,{label:i?i(t,c===t):t,active:c===t,value:t,onChange:a})})}))})]})}var T=["children","className"];function D(t){var e=t.opened,n=t.children,r=t.className;return Object(m.jsx)("div",{className:x()(r,"twind-absolute twind-top-full pt-2",e?"twind-flex":"twind-hidden"),children:Object(m.jsx)("div",{className:x()("twind-bg-hover twind-rounded-2xl twind-py-2"),children:n})})}function F(t){var e=t.children,n=t.className,r=Object(o.a)(t,T);return Object(m.jsx)("div",Object(s.a)(Object(s.a)({className:x()("twind-px-3 twind-py-1 twind-font-semibold twind-text-sm hover:twind-font-bold",n)},r),{},{children:e}))}function R(){return Object(m.jsx)("div",{className:"twind-border-dark twind-border-t twind-w-full twind-my-2"})}var L=["opened","className","children","onClick","rounded","minimal"];function B(t){var e=t.opened,n=t.className,r=t.children,i=t.onClick,c=t.rounded,a=t.minimal,d=Object(o.a)(t,L),l=a?"":"twind-px-4 twind-py-3 twind-border twind-border-border twind-w-36";return Object(m.jsxs)("button",Object(s.a)(Object(s.a)({onClick:i,className:x()("twind-cursor-pointer twind-flex twind-items-center  ",n,l,c?"twind-rounded-full":"twind-rounded-xl")},d),{},{children:[r,Object(m.jsx)("div",{className:"twind-flex-grow"}),Object(m.jsx)(S,{className:x()("twind-ml-2","twind-transform",e?"twind-rotate-180":"")})]}))}function U(t){var e=t.active,n=t.label,r=t.value,i=t.onChange;return Object(m.jsxs)("label",{className:"twind-inline-flex twind-items-center twind-whitespace-nowrap",children:[Object(m.jsx)("input",{type:"radio",className:"twind-invisible twind-w-0 twind-h-0 twind-absolute",checked:e,onChange:function(){return i(r)}}),Object(m.jsx)("div",{className:x()(e?"twind-border-blue twind-border-4":"twind-border-border twind-border-2","twind-border-full twind-w-3 twind-h-3 twind-rounded-full")}),Object(m.jsx)("div",{className:x()(e?"twind-font-semibold":"","twind-ml-3"),children:n})]})}var P=n(50),V=["progresses","className"],H=["linear-gradient(270deg, #C750FF 0%, #4743FB 100%)","linear-gradient(270deg, #FFCC69 0%, #FF8469 100%)"];function Z(t){var e=t.progresses,n=t.className,r=Object(o.a)(t,V),i=Object(P.a)(e);return i.sort((function(t,e){return e-t})),Object(m.jsx)("div",Object(s.a)(Object(s.a)({className:x()("twind-relative twind-h-3 twind-rounded-r-md twind-rounded-l-lg twind-bg-progressBar",n)},r),{},{children:i.map((function(t,e){return Object(m.jsx)("div",{className:"twind-absolute twind-left-0 twind-h-full twind-rounded-lg",style:{width:100*t+"%",background:H[e]}})}))}))}var z=n(24),W="200000000000000";function q(t){console.log("NearContractApi",t);var e=t.contract,n=function(){var t=Object(w.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,e.get_account({account_id:n});case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(0),console.log("near error",t.t0);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function r(){return(r=Object(w.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.accountId,t.next=3,e.update_account({account_id:r},W,0);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=Object(w.a)(j.a.mark((function t(n){var r,i,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,i=n.deposit,t.next=3,e.deposit({stream_id:r},W,i);case 3:return c=t.sent,t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=Object(w.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.pause_stream({stream_id:r},W,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(w.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.start_stream({stream_id:r},W,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(w.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.stop_stream({stream_id:r},W,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(w.a)(j.a.mark((function t(n){var r,i,c,a,s,o,d,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.deposit,i=n.ownerId,c=n.receiverId,a=n.token,s=n.speed,o=n.description,d=n.autoDepositEnabled,l=void 0!==d&&d,t.next=3,e.create_stream({owner_id:i,receiver_id:c,token_name:a,tokens_per_tick:s,auto_deposit_enabled:l,description:o},W,r);case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(w.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.get_stream({stream_id:r});case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{getCurrentAccount:function(){return n(t.walletConnection.getAccountId())},updateAccount:function(t){return r.apply(this,arguments)},getAccount:n,createStream:function(t){return o.apply(this,arguments)},depositStream:function(t){return i.apply(this,arguments)},pauseStream:function(t){return c.apply(this,arguments)},startStream:function(t){return a.apply(this,arguments)},stopStream:function(t){return s.apply(this,arguments)},getStream:function(t){return d.apply(this,arguments)}}}var Y={ACCOUNT_SUFFIX:"testnet",NEAR_NETWORK_ID:"testnet",NEAR_NODE_URL:"https://rpc.testnet.near.org",CONTRACT_NAME:"dev-1631015258223-36596603302446",WALLET_URL:"https://wallet.testnet.near.org",FT_CONTRACT_NAME:""},X={accountSuffix:Y.NEAR_ACCOUNT_SUFFIX,networkId:Y.NEAR_NETWORK_ID,nodeUrl:Y.NEAR_NODE_URL,contractName:Y.CONTRACT_NAME,walletUrl:Y.WALLET_URL,ft:Y.FT_CONTRACT_NAME},J=i.a.createContext({inited:!1,near:{keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null},auth:{signedIn:!1,signedAccountId:null},contractApi:q({}),refreshAllowance:function(){},login:function(){},logout:function(){}});function K(){return G.apply(this,arguments)}function G(){return(G=Object(w.a)(j.a.mark((function t(){var e,n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new z.keyStores.BrowserLocalStorageKeyStore,t.next=3,z.connect(Object.assign({deps:{keyStore:e}},X));case 3:return n=t.sent,(r={keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}).keyStore=e,r.near=n,r.walletConnection=new z.WalletConnection(n,X.contractName),r.accountId=r.walletConnection.getAccountId(),r.account=r.walletConnection.account(),r.contractName=X.contractName,r.contract=new z.Contract(r.account,X.contractName,{viewMethods:["get_account","get_stream"],changeMethods:["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream"]}),r.ft=new z.Contract(r.account,X.ft,{viewMethods:["ft_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]}),t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Q=new Error("Near context is not found");function $(){var t=Object(r.useContext)(J);if(!!!t)throw Q;return t}var tt=n(33),et=n.n(tt),nt={NEAR:{decimals:24,name:"Near"},TARAS:{decimals:18,name:"Taras"},fallback:{decimals:18}};function rt(t){var e=nt[t]||nt.fallback,n=Math.pow(10,6),r=Math.pow(10,9),i=Math.pow(10,e.decimals);return{tokenPerSecondToInt:function(t){return et()(t).multiply(i).divide(r).format({mantissa:0})},toInt:function(t){return et()(t).multiply(i).format({mantissa:0})},amount:function(t){return et()(t).divide(i).format({mantissa:2})},tokensPerMS:function(t){return et()(t).multiply(n).divide(i).format({mantissa:e.decimals-6,trimMantissa:!0})},tokensPerS:function(t){return et()(t).multiply(r).divide(i).format({mantissa:e.decimals-6,trimMantissa:!0})},ticksToMs:function(t){return Math.round(t/n)}}}var it=function(){return Object(m.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})})},ct=function(){return Object(m.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("circle",{cx:"2.08925",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(m.jsx)("circle",{cx:"11.1691",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(m.jsx)("circle",{cx:"2.08925",cy:"11.1198",r:"2.03994",fill:"currentColor"}),Object(m.jsx)("circle",{cx:"11.1691",cy:"11.1198",r:"2.03994",fill:"currentColor"})]})},at=function(){return Object(m.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("path",{d:"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004",stroke:"#2EDDD9","stroke-width":"2","stroke-linecap":"round"}),Object(m.jsx)("path",{d:"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931",stroke:"#2EDDD9","stroke-width":"2","stroke-linecap":"round"})]})},st=function(){return Object(m.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("path",{d:"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523",stroke:"#F56173","stroke-width":"2","stroke-linecap":"round"}),Object(m.jsx)("path",{d:"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931",stroke:"#F56173","stroke-width":"2","stroke-linecap":"round"})]})};function ot(t){var e=t.tokenName,n={NEAR:Object(m.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet",children:Object(m.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(m.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}),fallback:Object(m.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet",children:Object(m.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(m.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})})};return n[e]||n.fallback}var dt=function(){return Object(m.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})})},lt=function(){return Object(m.jsx)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M10.0818 9.73921L10.0818 21.718M10.0818 21.718L18.5945 13.2589M10.0818 21.718L1.5691 13.2589M10.0823 4.3827L10.0823 1.78194",stroke:"#8DA6FF","stroke-width":"2","stroke-linecap":"round"})})},ut=function(){return Object(m.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M8.56036 0.603882C6.45869 0.609876 4.4396 1.4228 2.9201 2.87474V1.42369C2.9201 1.20626 2.83373 0.997741 2.67998 0.843997C2.52624 0.690254 2.31772 0.603882 2.10029 0.603882C1.88287 0.603882 1.67435 0.690254 1.5206 0.843997C1.36686 0.997741 1.28049 1.20626 1.28049 1.42369V5.11281C1.28049 5.33024 1.36686 5.53876 1.5206 5.6925C1.67435 5.84625 1.88287 5.93262 2.10029 5.93262H5.78942C6.00684 5.93262 6.21536 5.84625 6.36911 5.6925C6.52285 5.53876 6.60922 5.33024 6.60922 5.11281C6.60922 4.89539 6.52285 4.68687 6.36911 4.53312C6.21536 4.37938 6.00684 4.29301 5.78942 4.29301H3.82188C4.87597 3.19148 6.2809 2.49161 7.7951 2.31373C9.3093 2.13584 10.8382 2.49105 12.1189 3.31829C13.3995 4.14554 14.352 5.39311 14.8125 6.84653C15.2729 8.29994 15.2127 9.86838 14.642 11.2822C14.0714 12.696 13.026 13.8668 11.6856 14.5933C10.3452 15.3198 8.79358 15.5567 7.2975 15.2631C5.80141 14.9695 4.45434 14.1639 3.48789 12.9847C2.52144 11.8056 1.996 10.3265 2.00192 8.80194C2.00192 8.58451 1.91554 8.37599 1.7618 8.22225C1.60806 8.0685 1.39954 7.98213 1.18211 7.98213C0.964684 7.98213 0.756164 8.0685 0.60242 8.22225C0.448677 8.37599 0.362305 8.58451 0.362305 8.80194C0.362305 10.4234 0.843112 12.0084 1.74393 13.3565C2.64474 14.7047 3.9251 15.7555 5.4231 16.376C6.9211 16.9964 8.56945 17.1588 10.1597 16.8425C11.75 16.5261 13.2107 15.7454 14.3573 14.5988C15.5038 13.4523 16.2846 11.9916 16.6009 10.4013C16.9172 8.81103 16.7549 7.16268 16.1344 5.66468C15.5139 4.16668 14.4631 2.88632 13.115 1.9855C11.7668 1.08469 10.1818 0.603882 8.56036 0.603882ZM8.56036 5.52272C8.34293 5.52272 8.13441 5.60909 7.98067 5.76283C7.82693 5.91657 7.74055 6.12509 7.74055 6.34252V8.80194C7.74055 9.01936 7.82693 9.22788 7.98067 9.38163C8.13441 9.53537 8.34293 9.62174 8.56036 9.62174H11.8396C12.057 9.62174 12.2655 9.53537 12.4193 9.38163C12.573 9.22788 12.6594 9.01936 12.6594 8.80194C12.6594 8.58451 12.573 8.37599 12.4193 8.22225C12.2655 8.0685 12.057 7.98213 11.8396 7.98213H9.38017V6.34252C9.38017 6.12509 9.29379 5.91657 9.14005 5.76283C8.98631 5.60909 8.77779 5.52272 8.56036 5.52272Z",fill:"#9794B6"})})},jt=function(){return Object(m.jsxs)("svg",{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("path",{d:"M12.7791 5.19588C11.8893 4.62312 10.83 4.29083 9.69317 4.29083C6.54008 4.29083 3.98401 6.84691 3.98401 9.99999C3.98401 13.1531 6.54008 15.7092 9.69317 15.7092C10.7261 15.7092 11.695 15.4348 12.5309 14.9551L15.0815 17.5057C13.5648 18.5965 11.704 19.2389 9.69317 19.2389C4.59064 19.2389 0.454224 15.1025 0.454224 9.99999C0.454224 4.89746 4.59064 0.761047 9.69317 0.761047C11.8064 0.761047 13.754 1.47057 15.3106 2.66438L12.7791 5.19588Z",fill:"white"}),Object(m.jsx)("path",{d:"M17.6556 5.31123L15.0215 7.94539C15.2675 8.58293 15.4023 9.27571 15.4023 9.99999C15.4023 10.8324 15.2242 11.6232 14.904 12.3363L17.5041 14.9365C18.4085 13.5084 18.9321 11.8154 18.9321 9.99999C18.9321 8.2885 18.4667 6.6857 17.6556 5.31123Z",fill:"white"})]})},wt=function(t){return Object(m.jsx)("svg",Object(s.a)(Object(s.a)({width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(m.jsx)("path",{d:"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}))},bt=function(t){return Object(m.jsx)("svg",Object(s.a)(Object(s.a)({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(m.jsx)("path",{d:"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z",fill:"#2EDDD9"})}))},pt=function(t){return Object(m.jsx)("svg",Object(s.a)(Object(s.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(m.jsx)("rect",{x:"0.429626",y:"0.930298",width:"9.58382",height:"9.58382",rx:"2",fill:"#F56173"})}))},mt=function(t){return Object(m.jsxs)("svg",Object(s.a)(Object(s.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(m.jsx)("path",{d:"M2.42963 2.28638V8.60681",stroke:"#FFAB6A","stroke-width":"3","stroke-linecap":"round"}),Object(m.jsx)("path",{d:"M8.76996 2.28638V8.60681",stroke:"#FFAB6A","stroke-width":"3","stroke-linecap":"round"})]}))};var ht=function(){var t=$(),e=t.auth.signedAccountId,n=Object(r.useState)(!1),i=Object(b.a)(n,2),c=i[0],a=i[1],s=Object(r.useState)("NEAR"),o=Object(b.a)(s,2),d=o[0],l=o[1],u=Object(r.useState)(0),h=Object(b.a)(u,2),x=h[0],f=h[1],O=Object(r.useState)(0),v=Object(b.a)(O,2),g=v[0],C=v[1],k=Object(r.useState)(0),y=Object(b.a)(k,2),_=y[0],S=y[1],E=Object(r.useState)(0),M=Object(b.a)(E,2),T=M[0],R=M[1],L=Object(r.useState)(),P=Object(b.a)(L,2),V=P[0],H=P[1],Z=Object(r.useState)({}),z=Object(b.a)(Z,2),W=(z[0],z[1],Object.keys(nt).filter((function(t){return"fallback"!==t})));function q(){return(q=Object(w.a)(j.a.mark((function e(n){var r,i,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=rt(d),i=document.getElementById("ownerInput").value,c=document.getElementById("receiverInput").value,a=T/(3600*x*24+60*g+3600*_),e.next=7,t.contractApi.createStream({deposit:r.toInt(T),description:V,ownerId:i,receiverId:c,token:d,speed:r.tokenPerSecondToInt(a),autoDepositEnabled:!1});case 7:e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=function(){var n=Object(w.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return",[]);case 3:return n.next=5,t.near.contract.get_account({account_id:e});case 5:return n.abrupt("return",n.sent);case 8:n.prev=8,n.t0=n.catch(0),console.log("near error",n.t0);case 11:return n.abrupt("return",[]);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(p.a)(["account",e],Y,{errorRetryInterval:250}).data,Object(m.jsxs)("div",{className:"twind-container twind-m-auto twind-px-5 twind-py-12",children:[Object(m.jsxs)("div",{className:"twind-text-center",children:[Object(m.jsx)("h1",{className:"twind-text-5xl twind-mb-4 twind-text-center",children:"Create a stream"}),Object(m.jsx)("p",{className:"twind-text-gray",children:"Stream your tokens to the receiver directly"})]}),Object(m.jsxs)("form",{className:"twind-max-w-lg twind-mx-auto twind-w-full",onSubmit:function(t){return function(t){return q.apply(this,arguments)}(t)},children:[Object(m.jsx)(A,{label:"Owner:",className:"twind-mb-4",children:Object(m.jsx)(I,{children:Object(m.jsx)("input",{required:!0,placeholder:"owner.near",id:"ownerInput",value:t.near.accountId})})}),Object(m.jsx)(A,{label:"Receiver:",className:"twind-mb-4",children:Object(m.jsx)(I,{children:Object(m.jsx)("input",{required:!0,id:"receiverInput",placeholder:"root.near"})})}),Object(m.jsxs)("div",{className:"twind-flex twind-mb-4",children:[Object(m.jsxs)(A,{label:"Token:",className:"twind-w-1/3 twind-items-center twind-relative",children:[Object(m.jsx)(B,{className:"twind-bg-input focus-within:twind-border-blue hover:twind-border-blue twind-text-xl twind-h-14",onClick:function(){return a(!c)},children:Object(m.jsxs)("div",{className:"twind-inline-flex",children:[Object(m.jsx)(ot,{tokenName:d})," ",Object(m.jsx)("span",{children:d})]})}),Object(m.jsx)(D,{opened:c,className:"twind-z-10",children:W.map((function(t){return Object(m.jsx)(F,{className:"twind-bg-input",children:Object(m.jsx)(U,{label:Object(m.jsxs)("div",{className:"twind-inline-flex",children:[Object(m.jsx)(ot,{tokenName:t})," ",Object(m.jsx)("span",{children:t})]}),active:d===t,value:t,onChange:function(t){a(!1),l(t)}})})}))})]}),Object(m.jsx)(A,{label:"Amount to stream:",className:"twind-w-2/3",children:Object(m.jsx)(I,{children:Object(m.jsx)("input",{requried:!0,placeholder:"0.00",id:"depositInput",value:T,onChange:function(t){return R(t.target.value)}})})})]}),Object(m.jsxs)("div",{className:"twind-block twind-mb-4",children:[Object(m.jsxs)("div",{className:"twind-relative",children:[Object(m.jsx)("div",{children:"Stream duration:"}),Object(m.jsxs)("div",{className:"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1",children:["Streaming speed: ",x+g+_===0?0:(T/(3600*x*24+60*g+3600*_)).toFixed(6)," ",d," / sec"]})]}),Object(m.jsxs)("div",{className:"twind-flex",label:"Stream duration",children:[Object(m.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-l-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(m.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"daysInput",placeholder:"0",describedby:"basic-addon2",value:x,onChange:function(t){f(t.target.value)}}),Object(m.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"days"})]}),Object(m.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(m.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"hourseInput",placeholder:"0",describedby:"basic-addon2",value:_,onChange:function(t){return S(t.target.value)}}),Object(m.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"hourse"})]}),Object(m.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-r-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(m.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"minutesInput",placeholder:"0",describedby:"basic-addon2",value:g,onChange:function(t){return C(t.target.value)}}),Object(m.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"mins"})]})]})]}),Object(m.jsx)(A,{children:Object(m.jsxs)("label",{className:"twind-block twind-mb-6 twind-relative",children:[Object(m.jsxs)("div",{className:"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1",children:[V&&V.length||0,"/255"]}),Object(m.jsx)("div",{className:"twind-mb-1",children:"Comment:"}),Object(m.jsx)("div",{children:Object(m.jsx)("label",{className:"twind-h-40 Input twind-font-semibold twind-flex twind-p-4 twind-pt-0 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue twind-border-border",children:Object(m.jsx)("textarea",{id:"commentInput",className:" twind-bg-input  twind-w-full twind-h-full twind-pt-2 focus:twind-outline-none twind-resize-none",placeholder:"Enter comment",maxlength:"255",value:V,onChange:function(t){H(t.target.value)}})})})]})}),Object(m.jsxs)("div",{className:"twind-flex twind-relaitive",children:[Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"twind-text-left twind-text-gray twind-w-2/3 twind-text-sm",children:"You will be charged 0.1 NEAR fee for that stream"})}),Object(m.jsx)(N,{variant:"main",className:"twind-mx-auto twind-right-0",children:"Create Stream"})]})]})]})};function xt(t){var e=function(){var t=$();function e(){return(e=Object(w.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.preventDefault(),e.next=3,t.login();case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(w.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.logout();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{accountId:t.auth.signedAccountId,signedIn:t.auth.signedIn,inited:t.inited,login:function(t){return e.apply(this,arguments)},logout:function(t){return n.apply(this,arguments)}}}(),n=e.inited,r=e.logout,i=e.login,c=e.accountId,a=e.signedIn;return n?a?Object(m.jsxs)(N,Object(s.a)(Object(s.a)({onClick:r},t),{},{children:["Sign out (",c,")"]})):Object(m.jsx)(N,Object(s.a)(Object(s.a)({onClick:i},t),{},{children:"Sign in with NEAR Wallet"})):Object(m.jsxs)(N,Object(s.a)(Object(s.a)({},t),{},{children:["Connecting..."," ",Object(m.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})]}))}var ft="/account",Ot="/my_streams",vt="/",gt=n.p+"static/media/logo_stream_with_text.765f9ae8.svg";function Nt(){var t=Object(m.jsxs)("ul",{className:"twind-flex-col lg:twind-flex-row twind-flex twind-justify-center ",children:[Object(m.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(m.jsx)(k,{to:ft,icon:Object(m.jsx)(dt,{}),children:"Account"})}),Object(m.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(m.jsx)(k,{to:Ot,icon:Object(m.jsx)(ct,{}),children:"My Streams"})}),Object(m.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(m.jsx)(k,{to:vt,icon:Object(m.jsx)(it,{}),children:"Send"})})]}),e=Object(m.jsx)("div",{className:"twind-flex twind-justify-start twind-items-center",children:Object(m.jsx)("img",{src:gt,alt:"xyiming logo"})});return Object(m.jsxs)("div",{className:"twind-py-4 twind-px-6",children:[Object(m.jsxs)("div",{className:x()("twind-hidden lg:twind-grid twind-items-center twind-grid-cols-3 twind-gap-3 "),children:[e,t,Object(m.jsx)("div",{className:"twind-flex twind-justify-end",children:Object(m.jsx)(xt,{})})]}),Object(m.jsxs)("div",{className:x()("lg:twind-hidden","navbar-dark"),children:[Object(m.jsxs)("div",{className:"twind-flex twind-justify-between",children:[e,Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})})]}),Object(m.jsxs)("div",{className:"collapse navbar-collapse twind-mt-4",id:"navbarSupportedContent",children:[t,Object(m.jsx)(xt,{className:"mt-4"})]})]})]})}var Ct=n(207);function kt(t){var e=$(),n=i.a.useState(!1),r=Object(b.a)(n,2),c=r[0],a=r[1];function s(){return(s=Object(w.a)(j.a.mark((function n(r){var i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.deposit,console.log("depositing",t),n.next=4,e.contractApi.depositStream({streamId:t,deposit:i});case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function o(){return(o=Object(w.a)(j.a.mark((function n(r){var i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.deposit,console.log("depositing ft",t),n.next=4,e.near.ft.ft_transfer_call({receiver_id:e.near.contractName,amount:i,memo:"xyiming transfer",msg:t},"200000000000000",1);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){return(d=Object(w.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("pausing",t),n.next=3,e.contractApi.pauseStream({streamId:t});case 3:return r=n.sent,console.log("pausing res",r),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function l(){return(l=Object(w.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("restarting",t),n.next=3,e.contractApi.startStream({streamId:t});case 3:return r=n.sent,console.log("restarting res",r),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function u(){return(u=Object(w.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Stop called stopping",t),n.next=3,e.contractApi.stopStream({streamId:t});case 3:return r=n.sent,console.log("stopping res",r),n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(t){return function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if((e=console).log.apply(e,["wrapped"].concat(r)),!c){a(!0);try{return t.apply(void 0,r)}finally{a(!1)}}}}return{loading:c,pause:p((function(){return d.apply(this,arguments)})),restart:p((function(){return l.apply(this,arguments)})),stop:p((function(){return u.apply(this,arguments)})),deposit:p((function(t){return s.apply(this,arguments)})),deposit_ft:p((function(t){return o.apply(this,arguments)}))}}var yt=n(15),It={INITIALIZED:"INITIALIZED",ACTIVE:"ACTIVE",PAUSED:"PAUSED",FINISHED:"FINISHED",INTERRUPTED:"INTERRUPTED"},_t="in",At="out",St=["stream","className"];function Et(t){var e,n=t.stream,r=t.className,i=Object(o.a)(t,St),c=(e={},Object(yt.a)(e,It.INITIALIZED,{colorClass:"twind-text-special-active",label:"Initialized"}),Object(yt.a)(e,It.ACTIVE,{colorClass:"twind-text-special-active",label:"Active"}),Object(yt.a)(e,It.PAUSED,{colorClass:"twind-text-special-hold",label:"Paused"}),Object(yt.a)(e,It.FINISHED,{colorClass:"twind-text-special-active",label:"Finished"}),Object(yt.a)(e,It.INTERRUPTED,{colorClass:"twind-text-special-inactive",label:"Interrupted"}),e)[n.status]||{};return Object(m.jsx)("div",Object(s.a)(Object(s.a)({className:x()(c.colorClass,r)},i),{},{children:c.label}))}function Mt(t){var e=t.stream,n=$().near.accountId===e.owner_id,i=e.status===It.INTERRUPTED||e.status===It.FINISHED,c=Object(r.useState)(!1),a=Object(b.a)(c,2),s=a[0],o=a[1],d=kt(e.stream_id);return d.loading?Object(m.jsx)("span",{children:"Loading!"}):!n||i?Object(m.jsx)(Et,{stream:e}):Object(m.jsxs)("div",{className:"twind-relative",children:[Object(m.jsx)(B,{minimal:!0,opened:s,onClick:function(){return o(!s)},children:Object(m.jsx)(Et,{stream:e})}),Object(m.jsxs)(D,{opened:s,className:"twind-w-36",children:[e.status!==It.ACTIVE?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(F,{children:Object(m.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:d.restart,children:[Object(m.jsx)(bt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(m.jsx)("span",{children:"Start stream "})," "]})}),Object(m.jsx)(R,{})]}):null,e.status!==It.PAUSED?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(F,{children:Object(m.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:d.pause,children:[Object(m.jsx)(mt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(m.jsx)("span",{children:"Pause stream"})]})}),Object(m.jsx)(R,{})]}):null,Object(m.jsx)(F,{children:Object(m.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:d.stop,children:[Object(m.jsx)(pt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(m.jsx)("span",{children:" Stop stream "})]})})]})]})}var Tt=n(49),Dt=n.n(Tt);function Ft(t){var e=t.stream,n=kt(e.stream_id),c=Object(r.useState)(""),a=Object(b.a)(c,2),s=a[0],o=a[1],d=rt(e.token_name),l=function(t){var e=i.a.useState(t),n=Object(b.a)(e,2),r=n[0],c=n[1];return{on:r,off:!r,toggle:function(){return c(!r)},turnOff:function(){return c(!1)},turnOn:function(){return c(!0)}}}(!1);return Object(m.jsxs)("div",{children:[Object(m.jsxs)(N,{variant:"filled",type:"button",onClick:l.turnOn,children:[Object(m.jsx)(wt,{className:"twind-mr-2"}),"Add funds"]}),Object(m.jsxs)(Dt.a,{isOpen:l.on,onRequestClose:l.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(m.jsx)("h2",{className:"twind-text-2xl twind-mb-6",children:"Amount to deposit"}),Object(m.jsx)(I,{className:"twind-mb-4",children:Object(m.jsx)("input",{placeholder:"0.00 ".concat(e.token_name),className:"twind-text-black",value:s,onChange:function(t){return o(t.target.value)}})}),Object(m.jsx)(N,{className:"twind-w-full",variant:"filled",type:"button",onClick:function(){return"NEAR"===e.token_name?n.deposit({deposit:d.toInt(s)}):n.deposit_ft({deposit:d.toInt(s)})},children:"Add funds"})]})]})}var Rt={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"};function Lt(t){var e=t.untilDate,n=(new Date).getTime()>e.getTime(),i=Object(r.useState)(n?null:Object(Ct.a)({start:new Date,end:e})),c=Object(b.a)(i,2),a=c[0],s=c[1],o=Object(r.useState)(!1),d=Object(b.a)(o,2),l=d[0],u=d[1];Object(r.useEffect)((function(){var t=setInterval((function(){var t=(new Date).getTime()>e.getTime();if(u(t),s(null),!t){var n=Object(Ct.a)({start:new Date,end:e});s(n)}}),1e3);return function(){return clearInterval(t)}}),[e,l]);var j=a?JSON.stringify(a,(function(t,e){return e instanceof Map?Object(P.a)(e):e}))+" remaining":"";return Object(m.jsx)("span",{children:j})}function Bt(t){var e=t.stream,n=void 0===e?Rt:e,r=t.direction,i=t.className,c=rt(n.token_name),a=c.ticksToMs(Math.round((n.balance-n.available_to_withdraw)/n.tokens_per_tick)),s=new Date((new Date).getTime()+a),o=Number(n.balance)+Number(n.tokens_total_withdrawn),d=Number(n.tokens_total_withdrawn),l=Number(n.tokens_total_withdrawn)+Number(n.available_to_withdraw),u=[d/o,l/o];return Object(m.jsxs)("div",{className:x()("twind-grid twind-grid-cols-12 twind-gap-6 twind-justify-items-center","twind-p-10 twind-bg-input twind-rounded-3xl",i),children:[Object(m.jsxs)("div",{className:"twind-w-full twind-col-span-12 xl:twind-col-span-5 2xl:twind-col-span-6 twind-justify-self-start",children:[Object(m.jsxs)("div",{className:"twind-flex twind-items-center",children:[Object(m.jsx)("div",{className:"twind-w-8 twind-h-8 twind-flex-shrink-0 twind-rounded-lg twind-bg-card2 twind-inline-flex twind-items-center twind-justify-center twind-mr-4",children:"I"}),Object(m.jsxs)("div",{className:"twind-w-full twind-gap-4 twind-flex twind-items-end",children:[Object(m.jsxs)("div",{className:"twind-text-2xl twind-whitespace-nowrap twind-flex-shrink-0",children:[c.amount(l)," of ",c.amount(o)," ",Object(m.jsx)("span",{className:"twind-uppercase",children:n.token_name})]}),Object(m.jsxs)("div",{className:"twind-inline-flex twind-items-center twind-whitespace-nowrap",children:["out"===r?Object(m.jsx)(st,{}):Object(m.jsx)(at,{}),Object(m.jsxs)("span",{className:"twind-ml-2",children:[Object(m.jsxs)("span",{children:["@",c.tokensPerS(n.tokens_per_tick)]}),Object(m.jsxs)("span",{children:[" ",n.token_name," / Sec"]})]})]}),Object(m.jsx)("div",{className:"twind-whitespace-nowrap",children:Object(m.jsx)(Lt,{untilDate:s})})]})]}),Object(m.jsx)(Z,{className:"twind-mt-5",progresses:u})]}),Object(m.jsxs)("div",{className:"twind-col-span-2",children:[Object(m.jsx)("div",{className:"twind-text-gray",children:"Receiver:"}),Object(m.jsx)("div",{children:n.receiver_id})]}),Object(m.jsxs)("div",{className:"twind-col-span-2",children:[Object(m.jsx)("div",{className:"twind-text-gray",children:"Status:"}),Object(m.jsx)(Mt,{stream:n})]}),Object(m.jsx)("div",{className:"twind-col-span-2",children:"out"===r?Object(m.jsx)(Ft,{stream:n}):null})]})}function Ut(t){var e=t.options,n=Object.keys(e),i=Object(r.useState)(n[0]),c=Object(b.a)(i,2),a=c[0],s=c[1],o=e[a];return Object(r.useMemo)((function(){return{option:a,selectOption:s,options:e,optionsArray:n,currentFilterFunction:o}}),[e,a])}var Pt="All",Vt="Incoming",Ht="Outgoing",Zt="All",zt="Active",Wt="Archived";function qt(t){var e=Object(r.useMemo)((function(){var t;return t={},Object(yt.a)(t,Zt,(function(){return!0})),Object(yt.a)(t,zt,(function(t){return t.status===It.ACTIVE})),Object(yt.a)(t,Wt,(function(t){return t.status===It.ARCHIVED})),t}),[]),n=Object(r.useMemo)((function(){var t;return t={},Object(yt.a)(t,Pt,(function(){return!0})),Object(yt.a)(t,Vt,(function(t){return _t===t.direction})),Object(yt.a)(t,Ht,(function(t){return At===t.direction})),t}),[]),i=Ut({options:e}),c=Ut({options:n}),a=function(t){var e=t.items,n=t.filters,i=Object(r.useState)([]),c=Object(b.a)(i,2),a=c[0],s=c[1],o=Object(r.useState)([]),d=Object(b.a)(o,2),l=d[0],u=d[1];return Object(r.useEffect)((function(){var t=e,r=[];n.forEach((function(e){var n={};Object.keys(e.options).forEach((function(r){var i=t.filter(e.options[r]);n[r]=i}));var i={};Object.keys(n).forEach((function(t){return i[t]=n[t].length})),r.push(i),t=n[e.option]})),u(r),s(t)}),[e,n]),{filterCounts:l,filteredItems:a}}({items:t,filters:Object(r.useMemo)((function(){return[c,i,c]}),[c,i])});return{statusFilter:i,directionFilter:c,result:a}}function Yt(t){var e=t.items,n=t.onFilterDone,i=t.className,c=qt(e);return Object(r.useEffect)((function(){n(c.result.filteredItems)}),[c.result.filteredItems,n]),Object(m.jsxs)("div",{className:x()("twind-flex",i),children:[Object(m.jsx)(M,{className:"twind-mr-5",options:c.directionFilter.optionsArray,label:"Type:",active:c.directionFilter.option,onChange:c.directionFilter.selectOption,renderOption:function(t){var e=c.result.filterCounts[0];return Object(m.jsx)(E,{option:t,count:e?e[t]:""})}}),Object(m.jsx)(M,{options:c.statusFilter.optionsArray,label:"Status:",active:c.statusFilter.option,onChange:c.statusFilter.selectOption,renderOption:function(t){var e=c.result.filterCounts[1];return Object(m.jsx)(E,{option:t,count:e?e[t]:""})}})]})}var Xt=[],Jt=[];function Kt(){var t=$(),e=Object(r.useState)("NEAR"),n=Object(b.a)(e,2),i=(n[0],n[1],Object(r.useState)(!0)),c=Object(b.a)(i,2),a=c[0],o=c[1],d=Object(r.useState)([]),l=Object(b.a)(d,2),u=l[0],h=l[1];function x(){return(x=Object(w.a)(j.a.mark((function e(n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),o(!1),e.next=4,t.contractApi.updateAccount({accountId:t.near.accountId});case 4:r=e.sent,console.log("create res",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(e){return e.owner_id!==t.near.accountId},O=Object(p.a)(["account",t.near.accountId],t.contractApi.getCurrentAccount,{errorRetryInterval:250}).data;function v(){return(v=Object(w.a)(j.a.mark((function e(n){var r,i,c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.inputs,i=n.outputs,e.next=3,Promise.all(r.map((function(e){return t.contractApi.getStream({streamId:e})})));case 3:return c=e.sent,e.next=6,Promise.all(i.map((function(e){return t.contractApi.getStream({streamId:e})})));case 6:return a=e.sent,e.abrupt("return",{inputs:c.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{direction:"in"})})),outputs:a.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{direction:"out"})}))});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=Object(p.a)((function(){return!!O&&"/streams/"+O.account_id}),(function(){return function(t){return v.apply(this,arguments)}({inputs:O.inputs,outputs:O.outputs})})).data;console.log("ACCOUNT",O);var C=g?g.inputs:Xt,k=g?g.outputs:Jt,y=Object(r.useMemo)((function(){return C.concat(k)}),[C,k]);return Object(m.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(m.jsx)("h1",{className:"twind-text-3xl twind-mb-12",children:"All Streams"}),Object(m.jsx)(Yt,{items:y,onFilterDone:h,className:"twind-mb-10"}),Object(m.jsx)("form",{className:"twind-max-w-lg twind-mx-auto twind-w-full",onSubmit:function(t){return function(t){return x.apply(this,arguments)}(t)},children:Object(m.jsx)("div",{className:"twind-flex",children:Object(m.jsx)(N,{variant:"main",className:"twind-mx-auto",disabled:!a,children:a?"Update streams and withdraw":"Molodec"})})}),u.map((function(t){return Object(m.jsx)(Bt,{stream:t,className:"twind-mb-4",direction:f(t)?"in":"out"})}))]})}function Gt(t){var e=t.token,n=t.balance,r=t.streamsLength,i=t.period,c=void 0===i?"":i;return n=z.utils.format.formatNearAmount(n),Object(m.jsx)("div",{className:"twind-w-full twind-h-24 twind-rounded-lg twind-bg-card2 twind-flex twind-items-center twind-width-full twind-p-6 twind-mr-4",children:Object(m.jsxs)("div",{className:"twind-w-full twind-flex twind-items-center",children:[Object(m.jsx)("div",{className:"twind-w-12 twind-mr-12",children:"icon"}),Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"twind-font-bold",children:[nt[e].name,", ",e]}),Object(m.jsxs)("div",{className:"twind-text-gray twind-text-sm",children:["from ",r," steams"]})]}),Object(m.jsxs)("div",{className:"twind-ml-auto",children:[Object(m.jsx)("span",{className:" twind-text-3xl",children:n}),Object(m.jsx)("span",{children:""!==c?"/"+c:""})]})]})})}var Qt=[];function $t(t){var e=t.account,n=t.header,r=t.icon,i=t.tokensField,c=t.streamsIds,a=t.period,s=$();function o(){return(o=Object(w.a)(j.a.mark((function t(e){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==e){t.next=2;break}return t.abrupt("return",Qt);case 2:return t.next=4,Promise.all(e.map((function(t){return s.contractApi.getStream({streamId:t})})));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var d=Object(p.a)((function(){return!!e&&"/streams/"+e.account_id}),(function(){return function(t){return o.apply(this,arguments)}(c)})).data,l={};void 0!==d&&(l=d.reduce((function(t,e){var n=t[e.token_name]||[];return n.push(e),t[e.token_name]=n,t}),{}));var u=void 0!==e?e[i]:[];return Object(m.jsxs)("div",{children:[Object(m.jsxs)("h2",{className:"twind-text-xl twind-mb-6 twind-flex twind-items-center",children:[Object(m.jsx)("span",{className:"twind-mr-3",children:r}),n]}),Object(m.jsx)("div",{children:u.map((function(t){return Object(m.jsx)(Gt,{token:t[0],balance:t[1],streamsLength:l[t[0]]?l[t[0]].length:0,period:a})}))})]})}var te=[],ee=[];function ne(){var t=$(),e=Object(p.a)(["account",t.near.accountId],t.contractApi.getCurrentAccount,{errorRetryInterval:250}).data,n=e&&e.inputs||te,r=e&&e.outputs||ee;return console.log("ACCOUNT",e),console.log("INPUTS",n),console.log("OUTPUTS",r),Object(m.jsxs)("div",{className:"twind-container mx-auto twind-p-12",children:[Object(m.jsxs)("div",{className:"twind-flex twind-justify-between twind-items-center twind-mb-10",children:[Object(m.jsx)("h1",{className:"twind-text-3xl",children:"My Account"}),Object(m.jsxs)("div",{className:"twind-flex twind-items-center",children:[Object(m.jsxs)("div",{className:"twind-mr-12 twind-text-gray twind-flex twind-items-center",children:[Object(m.jsx)("span",{className:"twind-mr-2",children:Object(m.jsx)(ut,{})}),"Last updated 2 hours ago"]}),Object(m.jsx)("div",{children:Object(m.jsxs)(N,{variant:"main",className:"twind-p-0",children:[Object(m.jsx)("span",{className:"twind-mr-2",children:Object(m.jsx)(jt,{})}),"Subscribe to CRON"]})})]})]}),Object(m.jsxs)("div",{className:"twind-grid twind-grid-cols-3 twind-gap-4",children:[Object(m.jsx)($t,{icon:Object(m.jsx)(at,{}),header:"Receiving",account:e,tokensField:"total_incoming",streamsIds:n,period:"sec"},"AccountInputs"),Object(m.jsx)($t,{icon:Object(m.jsx)(st,{}),header:"Sending",account:e,tokensField:"total_outgoing",streamsIds:r,period:"sec"},"AccountOutputs"),Object(m.jsx)($t,{icon:Object(m.jsx)(lt,{}),header:"Withdrawn",account:e,tokensField:"total_received"},"AccountWithdrawn")]})]})}function re(){$();return Object(m.jsxs)("div",{className:"twind-my-24 twind-text-center",children:[Object(m.jsxs)("h1",{className:"twind-text-3xl twind-mb-4 twind-font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(m.jsx)("p",{className:"twind-text-gray",children:"Click button below to login or create new account"}),Object(m.jsx)(xt,{className:"twind-mt-10"})]})}var ie=["children","allowed","redirect"];function ce(t){var e=t.children,n=t.allowed,r=t.redirect,i=Object(o.a)(t,ie);return Object(m.jsx)(d.b,Object(s.a)(Object(s.a)({},i),{},{render:function(t){t.location;return console.log("Render ".concat(i.path,", allowed? ").concat(n)),n?e:r}}))}var ae=function(){var t=function(){var t=i.a.useRef(null),e=Object(r.useState)(!1),n=Object(b.a)(e,2),c=n[0],a=n[1],o=Object(r.useState)({keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}),d=Object(b.a)(o,2),l=d[0],u=d[1],p={signedIn:!!l.accountId,signedAccountId:l.accountId};function m(){return(m=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,l.walletConnection.requestSignIn(X.contractName,"Streaming Xyiming");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){l.walletConnection.signOut(),u(Object(s.a)(Object(s.a)({},l),{},{accountId:null}))}function x(){return(x=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),t.next=3,h();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){var e=Object(w.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:n=e.sent,t.current=q(n),u(n),a(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),{auth:p,near:l,contractApi:t.current,inited:c,login:function(){return m.apply(this,arguments)},logout:h,refreshAllowance:function(){return x.apply(this,arguments)}}}();return Object(m.jsx)(J.Provider,{value:t,children:Object(m.jsx)("div",{className:"twind-bg-dark text-white",children:t.inited?Object(m.jsxs)(l.a,{basename:"",children:[Object(m.jsx)(Nt,{}),Object(m.jsxs)(d.d,{children:[Object(m.jsx)(ce,{exact:!0,redirect:Object(m.jsx)(d.a,{to:"/"}),allowed:!t.auth.signedIn,path:"/authorize",children:Object(m.jsx)(re,{})}),Object(m.jsx)(ce,{exact:!0,redirect:Object(m.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/",children:Object(m.jsx)(ht,{})}),Object(m.jsx)(ce,{exact:!0,redirect:Object(m.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/account",children:Object(m.jsx)(ne,{})}),Object(m.jsx)(ce,{exact:!0,redirect:Object(m.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/my_streams",children:Object(m.jsx)(Kt,{})})]})]}):null})})},se=(n(204),document.getElementById("root"));Dt.a.setAppElement(se),a.a.render(Object(m.jsx)(ae,{}),se)}},[[205,1,2]]]);
//# sourceMappingURL=main.8914464e.chunk.js.map
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{204:function(t,e,n){},209:function(t,e){},217:function(t,e){},233:function(t,e){},235:function(t,e){},361:function(t,e,n){},366:function(t,e,n){},367:function(t,e,n){},377:function(t,e,n){},378:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n.n(r),i=n(28),s=n.n(i),c=n(2),d=n(8),o=(n(116),n(204),n(13)),l=n(31),u=n(3),j=n.n(u),w=n(7),b=n(30),m=n(9),x=n(43),p="200000000000000",h="300000000000000";function f(t){console.log("NearContractApi",t);var e=t.contract,n=function(){var t=Object(w.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,e.get_account({account_id:n});case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(0),console.log("near error",t.t0);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function r(){return(r=Object(w.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.update_account({account_id:t.account.accountId},p);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function a(){return(a=Object(w.a)(j.a.mark((function t(n){var r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,a=n.autoDeposit,t.next=3,e.change_auto_deposit({stream_id:r,auto_deposit:a},p,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=Object(w.a)(j.a.mark((function t(n){var r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,a=n.deposit,t.next=3,e.deposit({stream_id:r},p,a);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(w.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.pause_stream({stream_id:r},p,1);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=Object(w.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.start_stream({stream_id:r},p,1);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(w.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.stop_stream({stream_id:r},p,1);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(w.a)(j.a.mark((function t(n){var r,a,i,s,c,d,o,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.deposit,a=n.ownerId,i=n.receiverId,s=n.token,c=n.speed,d=n.description,o=n.autoDepositEnabled,l=void 0!==o&&o,t.next=3,e.create_stream({owner_id:a,receiver_id:i,token_name:s,tokens_per_tick:c,auto_deposit_enabled:l,description:d},p,r);case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=Object(w.a)(j.a.mark((function t(n){var r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.get_stream({stream_id:r});case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=Object(w.a)(j.a.mark((function t(n){var r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,a=n.auto_deposit,t.next=3,e.change_auto_deposit({stream_id:r,auto_deposit:a},p,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(w.a)(j.a.mark((function t(n){var r,a,i,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,a=n.from,i=n.to,t.next=3,e.get_stream_history({stream_id:r,from:a,to:i});case 3:return s=t.sent,t.abrupt("return",s);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=Object(w.a)(j.a.mark((function t(){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.start_cron({},h,"1000000000000000000000000");case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{getCurrentAccount:function(){return n(t.walletConnection.getAccountId())},updateAccount:function(){return r.apply(this,arguments)},getAccount:n,createStream:function(t){return o.apply(this,arguments)},depositStream:function(t){return i.apply(this,arguments)},pauseStream:function(t){return s.apply(this,arguments)},startStream:function(t){return c.apply(this,arguments)},stopStream:function(t){return d.apply(this,arguments)},getStream:function(t){return l.apply(this,arguments)},change_auto_deposit:function(t){return u.apply(this,arguments)},getStreamHistory:function(t){return b.apply(this,arguments)},changeAutoDeposit:function(t){return a.apply(this,arguments)},startCron:function(){return m.apply(this,arguments)}}}var O={ACCOUNT_SUFFIX:"testnet",NEAR_NETWORK_ID:"testnet",NEAR_NODE_URL:"https://rpc.testnet.near.org",CONTRACT_NAME:"dev-1631015258223-36596603302446",WALLET_URL:"https://wallet.testnet.near.org"},v={accountSuffix:O.NEAR_ACCOUNT_SUFFIX,networkId:O.NEAR_NETWORK_ID,nodeUrl:O.NEAR_NODE_URL,contractName:O.CONTRACT_NAME,walletUrl:O.WALLET_URL},g=n(10),N=n(16),k=n.n(N),y={NEAR:{name:"Near",decimals:24,address:null,is_mainnet:!0,is_testnet:!0},TARAS:{name:"Taras",decimals:18,address:"dev-1630798753809-34755859843881",is_mainnet:!1,is_testnet:!0},XYI:{name:"XYI",decimals:18,address:"xyi.tkn.near",is_mainnet:!0,is_testnet:!1},fallback:{name:null,decimals:18,address:null,is_mainnet:!1,is_testnet:!1}};function C(t){var e=y[t]||y.fallback,n=Math.pow(10,6),r=Math.pow(10,9),a=60*r,i=60*a,s=24*i,c=7*s,d=4*c,o=12*d,l=Math.pow(10,e.decimals),u=Intl.NumberFormat("en-US",{minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2}),j=Intl.NumberFormat("en-US",{minimumSignificantDigits:2,maximumSignificantDigits:4,maximumFractionDigits:e.decimals}),w=function(t){return t<1?j.format(t):t<1e6?u.format(t):k()(t).format({mantissa:3,trimMantissa:!0,optionalMantissa:!0,average:!0})};return{tokenPerSecondToInt:function(t){return k()(t).multiply(l).divide(r).format({mantissa:0})},toInt:function(t){return k()(t).multiply(l).format({mantissa:0})},amount:function(t){arguments.length>1&&void 0!==arguments[1]||e.decimals;var n=k()(t).divide(l).value(),r=w(n);return r},tokensPerMS:function(t){var e=k()(t).multiply(n).divide(l);return w(e)},tokensPerS:function(t){var e=k()(t).multiply(r).divide(l).value();return w(e)},tokensPerMeaningfulPeriod:function(t){var e,n=[r,a,i,s,c,d,o],u=(e={},Object(g.a)(e,r,"second"),Object(g.a)(e,a,"minute"),Object(g.a)(e,i,"hour"),Object(g.a)(e,s,"day"),Object(g.a)(e,c,"week"),Object(g.a)(e,d,"month"),Object(g.a)(e,o,"year"),e),j=n.find((function(e){return k()(t).multiply(e).divide(l).value()>.01}))||o,b=k()(t).multiply(j).divide(l).value();return{formattedValue:w(b),unit:u[j]}},ticksToMs:function(t){return Math.round(t/n)},secondsToTicks:function(t){return t*r},speedPerSecondToTick:function(t){return k()(t).multiply(r).value()}}}window.tf=C;var _=a.a.createContext({inited:!1,near:{keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null},auth:{signedIn:!1,signedAccountId:null},contractApi:f({}),refreshAllowance:function(){},login:function(){},logout:function(){}});function I(){return S.apply(this,arguments)}function S(){return(S=Object(w.a)(j.a.mark((function t(){var e,n,r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new x.keyStores.BrowserLocalStorageKeyStore,t.next=3,x.connect(Object.assign({deps:{keyStore:e}},v));case 3:for(n=t.sent,(r={keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}).keyStore=e,r.near=n,r.walletConnection=new x.WalletConnection(n,v.contractName),r.accountId=r.walletConnection.getAccountId(),r.account=r.walletConnection.account(),r.contractName=v.contractName,r.contract=new x.Contract(r.account,v.contractName,{viewMethods:["get_account","get_stream","get_stream_history"],changeMethods:["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream","change_auto_deposit","start_cron"]}),a=Object.keys(y).filter((function(t){return"fallback"!==t})),r.fts={},i=0;i<a.length;i++)r.fts[a[i]]={name:a[i],address:y[a[i]].address,contract:new x.Contract(r.account,y[a[i]].address,{viewMethods:["ft_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]})};return t.abrupt("return",r);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A=new Error("Near context is not found");function E(){var t=Object(r.useContext)(_);if(!!!t)throw A;return t}var T=n(37),D=n(38),M=n(4),F=n.n(M),R=(n(361),n(0)),L=["icon","children","className","link","size","loading","loadingText","color","variant"],P="main",V="filled",W="outlined";function U(t){var e=t.icon,n=t.children,r=t.className,a=t.link,i=t.size,s=t.loading,o=t.loadingText,u=t.color,j=void 0===u?"light":u,w=t.variant,b=void 0===w?"outlined":w,m=Object(d.a)(t,L),x="",p="",h="";b===P?(x="Button--main",p="normal"===i?"twind-px-5 twind-py-4  twind-rounded-2xl twind-font-semibold":"big"===i?"twind-px-12 twind-py-6 twind-rounded-3xl twind-font-bold":""):b===W?(x="twind-border-solid twind-border twind-font-semibold twind-rounded-lg ",h="light"===j?"twind-border-blue hover:twind-bg-blue":"dark"===j?"twind-border-border hover:twind-bg-hover hover:twind-border-hover":""):b===V&&(x="twind-bg-dark hover:twind-bg-hover twind-font-semibold twind-rounded-lg active:twind-bg-transparent");var f=a?l.b:"button";return Object(R.jsx)(f,Object(c.a)(Object(c.a)({disabled:s,className:F()("twind-inline-flex twind-items-center twind-justify-center twind-p-3  twind-whitespace-nowrap",x,p,h,"twind-transition-all",r)},m),{},{children:s?o:Object(R.jsxs)(R.Fragment,{children:[e?Object(R.jsx)("div",{className:"twind-mr-2",children:e}):null,n]})}))}var B=["icon","children","className","to"];function H(t){var e=t.icon,n=t.children,r=t.className,a=t.to,i=Object(d.a)(t,B),s=Object(o.h)(a),u=s&&s.isExact;return Object(R.jsxs)(l.b,Object(c.a)(Object(c.a)({to:a,className:F()(r,"twind-text-white twind-font-semibold","twind-flex twind-items-center twind-px-5 twind-py-4 twind-rounded-xl ","twind-group twind-cursor-pointer twind-whitespace-nowrap",u?"twind-bg-hover":"","twind-transition-all","hover:twind-bg-hover")},i),{},{children:[Object(R.jsx)("div",{className:F()("group-hover:twind-text-blue",u?"twind-text-blue":""),children:e}),Object(R.jsx)("div",{className:"twind-ml-2",children:n})]}))}n(366);var z=["children","className","error"];function Y(t){var e=t.children,n=t.className,r=t.error,a=Object(d.a)(t,z),i=r?"twind-border-red-400":"twind-border-border";return Object(R.jsx)("label",Object(c.a)(Object(c.a)({className:F()("Input twind-font-semibold twind-flex twind-p-4 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",i,n)},a),{},{children:e}))}var Z=["children","label","error","className"];function q(t){var e=t.children,n=t.label,r=t.error,a=t.className,i=Object(d.a)(t,Z);return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:F()("twind-block",a)},i),{},{children:[Object(R.jsx)("div",{className:"twind-mb-1",children:n}),Object(R.jsx)("div",{children:e}),r?Object(R.jsx)("div",{className:"twind-text-red-500 twind-mt-1 twind-text-xs",children:r}):null]}))}var X=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(R.jsx)("path",{d:"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731",stroke:"white",strokeWidth:"1.5"})}))};function G(t){var e=t.count,n=t.option;return Object(R.jsxs)("span",{children:[n," ",Object(R.jsx)("span",{className:"twind-text-gray twind-font-normal",children:e})]})}function K(t){var e=t.label,n=t.options,a=t.renderOption,i=t.renderActive,s=t.active,c=t.minimal,d=t.onChange,o=t.className,l=Object(r.useState)(!1),u=Object(m.a)(l,2),j=u[0],w=u[1];return Object(R.jsxs)("div",{className:F()("twind-inline-flex twind-items-center twind-relative",o),children:[Object(R.jsx)("div",{className:"twind-text-gray twind-mr-2",children:e}),Object(R.jsx)(nt,{minimal:c,rounded:!0,onClick:function(){return w(!j)},children:i?i(s):s}),Object(R.jsx)(Q,{opened:j,className:"twind-right-0",children:n.map((function(t,e){return Object(R.jsx)($,{children:Object(R.jsx)(rt,{label:a?a(t,s===t):t,active:s===t,value:t,onChange:d})},e)}))})]})}var J=["children","className"];function Q(t){var e=t.opened,n=t.children,r=t.className;return Object(R.jsx)("div",{className:F()(r,"twind-absolute twind-top-full twind-pt-2",e?"twind-flex":"twind-hidden"),children:Object(R.jsx)("div",{className:F()("twind-w-full twind-bg-hover twind-rounded-2xl twind-py-2"),children:n})})}function $(t){var e=t.children,n=t.className,r=Object(d.a)(t,J);return Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()("twind-px-5 twind-py-1 twind-font-semibold twind-text-sm hover:twind-font-bold",n)},r),{},{children:e}))}function tt(){return Object(R.jsx)("div",{className:"twind-border-dark twind-border-t twind-w-full twind-my-2"})}var et=["opened","className","children","onClick","rounded","minimal"];function nt(t){var e=t.opened,n=t.className,r=t.children,a=t.onClick,i=t.rounded,s=t.minimal,o=Object(d.a)(t,et),l=s?"":"twind-px-4 twind-py-3 twind-border twind-border-border twind-w-36 hover:twind-bg-hover hover:twind-border-hover";return Object(R.jsxs)("button",Object(c.a)(Object(c.a)({type:"button",onClick:a,className:F()("twind-cursor-pointer twind-flex twind-items-center",n,l,i?"twind-rounded-full":"twind-rounded-lg")},o),{},{children:[r,Object(R.jsx)("div",{className:"twind-flex-grow"}),Object(R.jsx)(X,{className:F()("twind-ml-2","twind-transform",e?"twind-rotate-180":"")})]}))}function rt(t){var e=t.active,n=t.label,r=t.value,a=t.onChange;return Object(R.jsxs)("label",{className:"twind-inline-flex twind-items-center twind-whitespace-nowrap",children:[Object(R.jsx)("input",{type:"radio",className:"twind-invisible twind-w-0 twind-h-0 twind-absolute",checked:e,onChange:function(){return a(r)}}),Object(R.jsx)("div",{className:F()(e?"twind-border-blue twind-border-4":"twind-border-border twind-border-2","twind-border-full twind-w-3 twind-h-3 twind-rounded-full")}),Object(R.jsx)("div",{className:F()(e?"twind-font-semibold":"","twind-ml-3"),children:n})]})}var at=n(19),it=n(67),st=["progresses","className"],ct=["progresses","className"],dt=[["#4743FB","#C750FF"],["#FFCC69","#FF8469"]],ot=["linear-gradient(270deg, ".concat(dt[0][0]," 0%, ").concat(dt[0][1]," 100%)"),"linear-gradient(270deg, ".concat(dt[1][0]," 0%, ").concat(dt[1][1]," 100%)")];function lt(t){var e=t.progresses,n=t.className,r=Object(d.a)(t,st),a=Object(at.a)(e);return a.sort((function(t,e){return e-t})),Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()("twind-relative twind-h-3 twind-rounded-r-md twind-rounded-l-lg twind-bg-progressBar",n)},r),{},{children:a.map((function(t,e){return Object(R.jsx)("div",{className:"twind-absolute twind-left-0 twind-h-full twind-rounded-lg",style:{width:100*t+"%",background:ot[e]}},e)}))}))}function ut(t){var e=t.endColor,n=t.startColor,r=t.progressValue,a=t.idCSS,i=t.rotation,s="rotate(".concat(i,")");return Object(R.jsx)("svg",{style:{height:0},children:Object(R.jsx)("defs",{children:Object(R.jsxs)("linearGradient",{id:a,gradientTransform:s,children:[Object(R.jsx)("stop",{offset:"0%",stopColor:n}),r>0&&r<100?Object(R.jsx)("stop",{offset:"".concat(r,'%"'),stopColor:e}):null,Object(R.jsx)("stop",{offset:"100%",stopColor:e})]})})})}function jt(t){var e=t.progresses,n=t.className,r=Object(d.a)(t,ct);e.sort((function(t,e){return e-t}));return Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()(n)},r),{},{children:Object(R.jsxs)(it.b,{circleRatio:.5,styles:Object(it.c)({rotation:.75,pathColor:"#0D0B26",strokeLinecap:"round"}),value:1,minValue:0,maxValue:1,children:[dt.map((function(t,e){return Object(R.jsx)(ut,{idCSS:"__arcProgressBar_grad_".concat(e),rotation:90,startColor:t[0],endColor:t[1]})})),e.map((function(t,e){return Object(R.jsx)(it.a,{circleRatio:.5,className:"twind-absolute twind-inset-0",value:t,styles:Object(it.c)({rotation:.75,trailColor:"transparent",pathColor:"url(#__arcProgressBar_grad_".concat(e,")"),strokeLinecap:"round"}),minValue:0,maxValue:1})}))]})}))}var wt=["tokenName","className"],bt=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},t),{},{children:Object(R.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(R.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))},mt=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet"},t),{},{children:Object(R.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(R.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}))};function xt(t){var e=t.tokenName,n=t.className,r=Object(d.a)(t,wt),a={NEAR:bt,fallback:mt},i=a[e]||a.fallback;return Object(R.jsx)(i,Object(c.a)({className:n},r))}var pt=["tokenName","size","className"];function ht(t){var e=t.tokenName,n=t.size,r=void 0===n?8:n,a=t.className,i=Object(d.a)(t,pt);return Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()("twind-p-1 twind-flex-shrink-0 twind-rounded-lg twind-bg-card2 twind-inline-flex twind-items-center twind-justify-center","twind-w-".concat(r," twind-h-").concat(r),a)},i),{},{children:Object(R.jsx)(xt,{className:"twind-w-full twind-h-full",tokenName:e})}))}n(367);var ft=n(184),Ot=["children","html","overlay"];function vt(t){var e=t.children,n=t.html,r=t.overlay,a=Object(d.a)(t,Ot);return Object(R.jsx)(ft.a,Object(c.a)(Object(c.a)({placement:"top",overlay:n?Object(R.jsx)("div",{dangerouslySetInnerHTML:{__html:n}}):r},a),{},{children:e||Object(R.jsx)("span",{className:"Tooltip__defaultIcon",children:"?"})}))}var gt=["className"];function Nt(t){var e=t.className,n=Object(d.a)(t,gt);return Object(R.jsx)("div",Object(c.a)({className:F()("twind-inline-block twind-w-2 twind-h-2 twind-flex-shrink-9 twind-rounded-full",e)},n))}var kt=function(){return Object(R.jsxs)("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(R.jsx)("path",{d:"M12.1884 4.70767H13.2423C14.6173 4.70767 15.7319 5.82227 15.7319 7.1972V12.6244C15.7319 13.9994 14.6173 15.114 13.2423 15.114H7.81509C6.44016 15.114 5.32556 13.9994 5.32556 12.6244V11.5705",stroke:"currentColor",strokeWidth:"1.65968"}),Object(R.jsx)("rect",{x:"1.46289",y:"1.3735",width:"10.4063",height:"10.4063",rx:"2.48952",stroke:"currentColor",strokeWidth:"1.65968"})]})},yt=function(){return Object(R.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(R.jsx)("path",{d:"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})})},Ct=function(){return Object(R.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(R.jsx)("circle",{cx:"2.08925",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(R.jsx)("circle",{cx:"11.1691",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(R.jsx)("circle",{cx:"2.08925",cy:"11.1198",r:"2.03994",fill:"currentColor"}),Object(R.jsx)("circle",{cx:"11.1691",cy:"11.1198",r:"2.03994",fill:"currentColor"})]})},_t=function(){return Object(R.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(R.jsx)("path",{d:"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"}),Object(R.jsx)("path",{d:"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931",stroke:"#2EDDD9",strokeWidth:"2",strokeLinecap:"round"})]})},It=function(){return Object(R.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(R.jsx)("path",{d:"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"}),Object(R.jsx)("path",{d:"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931",stroke:"#F56173",strokeWidth:"2",strokeLinecap:"round"})]})},St=function(){return Object(R.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(R.jsx)("path",{d:"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},At=function(){return Object(R.jsx)("svg",{width:"20",height:"24",viewBox:"0 0 20 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(R.jsx)("path",{d:"M10.0818 9.73921L10.0818 21.718M10.0818 21.718L18.5945 13.2589M10.0818 21.718L1.5691 13.2589M10.0823 4.3827L10.0823 1.78194",stroke:"#8DA6FF",strokeWidth:"2",strokeLinecap:"round"})})},Et=function(){return Object(R.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(R.jsx)("path",{d:"M8.56036 0.603882C6.45869 0.609876 4.4396 1.4228 2.9201 2.87474V1.42369C2.9201 1.20626 2.83373 0.997741 2.67998 0.843997C2.52624 0.690254 2.31772 0.603882 2.10029 0.603882C1.88287 0.603882 1.67435 0.690254 1.5206 0.843997C1.36686 0.997741 1.28049 1.20626 1.28049 1.42369V5.11281C1.28049 5.33024 1.36686 5.53876 1.5206 5.6925C1.67435 5.84625 1.88287 5.93262 2.10029 5.93262H5.78942C6.00684 5.93262 6.21536 5.84625 6.36911 5.6925C6.52285 5.53876 6.60922 5.33024 6.60922 5.11281C6.60922 4.89539 6.52285 4.68687 6.36911 4.53312C6.21536 4.37938 6.00684 4.29301 5.78942 4.29301H3.82188C4.87597 3.19148 6.2809 2.49161 7.7951 2.31373C9.3093 2.13584 10.8382 2.49105 12.1189 3.31829C13.3995 4.14554 14.352 5.39311 14.8125 6.84653C15.2729 8.29994 15.2127 9.86838 14.642 11.2822C14.0714 12.696 13.026 13.8668 11.6856 14.5933C10.3452 15.3198 8.79358 15.5567 7.2975 15.2631C5.80141 14.9695 4.45434 14.1639 3.48789 12.9847C2.52144 11.8056 1.996 10.3265 2.00192 8.80194C2.00192 8.58451 1.91554 8.37599 1.7618 8.22225C1.60806 8.0685 1.39954 7.98213 1.18211 7.98213C0.964684 7.98213 0.756164 8.0685 0.60242 8.22225C0.448677 8.37599 0.362305 8.58451 0.362305 8.80194C0.362305 10.4234 0.843112 12.0084 1.74393 13.3565C2.64474 14.7047 3.9251 15.7555 5.4231 16.376C6.9211 16.9964 8.56945 17.1588 10.1597 16.8425C11.75 16.5261 13.2107 15.7454 14.3573 14.5988C15.5038 13.4523 16.2846 11.9916 16.6009 10.4013C16.9172 8.81103 16.7549 7.16268 16.1344 5.66468C15.5139 4.16668 14.4631 2.88632 13.115 1.9855C11.7668 1.08469 10.1818 0.603882 8.56036 0.603882ZM8.56036 5.52272C8.34293 5.52272 8.13441 5.60909 7.98067 5.76283C7.82693 5.91657 7.74055 6.12509 7.74055 6.34252V8.80194C7.74055 9.01936 7.82693 9.22788 7.98067 9.38163C8.13441 9.53537 8.34293 9.62174 8.56036 9.62174H11.8396C12.057 9.62174 12.2655 9.53537 12.4193 9.38163C12.573 9.22788 12.6594 9.01936 12.6594 8.80194C12.6594 8.58451 12.573 8.37599 12.4193 8.22225C12.2655 8.0685 12.057 7.98213 11.8396 7.98213H9.38017V6.34252C9.38017 6.12509 9.29379 5.91657 9.14005 5.76283C8.98631 5.60909 8.77779 5.52272 8.56036 5.52272Z",fill:"#9794B6"})})},Tt=function(){return Object(R.jsxs)("svg",{width:"19",height:"20",viewBox:"0 0 19 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(R.jsx)("path",{d:"M12.7791 5.19588C11.8893 4.62312 10.83 4.29083 9.69317 4.29083C6.54008 4.29083 3.98401 6.84691 3.98401 9.99999C3.98401 13.1531 6.54008 15.7092 9.69317 15.7092C10.7261 15.7092 11.695 15.4348 12.5309 14.9551L15.0815 17.5057C13.5648 18.5965 11.704 19.2389 9.69317 19.2389C4.59064 19.2389 0.454224 15.1025 0.454224 9.99999C0.454224 4.89746 4.59064 0.761047 9.69317 0.761047C11.8064 0.761047 13.754 1.47057 15.3106 2.66438L12.7791 5.19588Z",fill:"white"}),Object(R.jsx)("path",{d:"M17.6556 5.31123L15.0215 7.94539C15.2675 8.58293 15.4023 9.27571 15.4023 9.99999C15.4023 10.8324 15.2242 11.6232 14.904 12.3363L17.5041 14.9365C18.4085 13.5084 18.9321 11.8154 18.9321 9.99999C18.9321 8.2885 18.4667 6.6857 17.6556 5.31123Z",fill:"white"})]})},Dt=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(R.jsx)("path",{d:"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}))},Mt=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(R.jsx)("path",{d:"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z",fill:"#2EDDD9"})}))},Ft=function(t){return Object(R.jsx)("svg",Object(c.a)(Object(c.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(R.jsx)("rect",{x:"0.429626",y:"0.930298",width:"9.58382",height:"9.58382",rx:"2",fill:"#F56173"})}))},Rt=function(t){return Object(R.jsxs)("svg",Object(c.a)(Object(c.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(R.jsx)("path",{d:"M2.42963 2.28638V8.60681",stroke:"#FFAB6A",strokeWidth:"3",strokeLinecap:"round"}),Object(R.jsx)("path",{d:"M8.76996 2.28638V8.60681",stroke:"#FFAB6A",strokeWidth:"3",strokeLinecap:"round"})]}))},Lt=function(t){return Object(R.jsxs)("svg",Object(c.a)(Object(c.a)({width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(R.jsx)("circle",{cx:"14.5566",cy:"14.7314",r:"14.5",fill:"url(#paint0_linear)"}),Object(R.jsx)("path",{d:"M14.7506 10.7635L14.7506 14.7314M14.7506 18.6993L14.7506 14.7314M14.7506 14.7314L18.7185 14.7314M14.7506 14.7314L10.7827 14.7314",stroke:"#1F1D37",strokeWidth:"2.5",strokeLinecap:"round"}),Object(R.jsx)("defs",{children:Object(R.jsxs)("linearGradient",{id:"paint0_linear",x1:"-2.34261",y1:"7.84647",x2:"34.6054",y2:"32.139",gradientUnits:"userSpaceOnUse",children:[Object(R.jsx)("stop",{"stop-color":"#FF856A"}),Object(R.jsx)("stop",{offset:"1","stop-color":"#FFCD6A"})]})})]}))},Pt=function(t){return Object(R.jsxs)("svg",Object(c.a)(Object(c.a)({width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(R.jsxs)("g",{clipPath:"url(#clip0)",children:[Object(R.jsx)("path",{d:"M8.31055 11.6724C8.66342 12.1442 9.11362 12.5345 9.63062 12.817C10.1476 13.0994 10.7193 13.2674 11.3069 13.3095C11.8945 13.3516 12.4843 13.2668 13.0363 13.0609C13.5883 12.855 14.0895 12.5328 14.506 12.1161L16.9711 9.65109C17.7194 8.87624 18.1335 7.83845 18.1242 6.76124C18.1148 5.68403 17.6827 4.65359 16.921 3.89186C16.1593 3.13013 15.1288 2.69805 14.0516 2.68869C12.9744 2.67933 11.9366 3.09344 11.1618 3.84181L9.74849 5.24689",stroke:"currentColor",strokeWidth:"1.64336",strokeLinecap:"round",strokeLinejoin:"round"}),Object(R.jsx)("path",{d:"M11.5972 10.0291C11.2444 9.55731 10.7942 9.16697 10.2772 8.88451C9.76017 8.60205 9.18847 8.43408 8.60085 8.392C8.01323 8.34991 7.42344 8.4347 6.87147 8.6406C6.3195 8.8465 5.81826 9.1687 5.40176 9.58535L2.93672 12.0504C2.18835 12.8252 1.77424 13.863 1.7836 14.9402C1.79296 16.0175 2.22504 17.0479 2.98677 17.8096C3.7485 18.5714 4.77894 19.0034 5.85615 19.0128C6.93336 19.0222 7.97115 18.608 8.746 17.8597L10.1511 16.4546",stroke:"currentColor",strokeWidth:"1.64336",strokeLinecap:"round",strokeLinejoin:"round"})]}),Object(R.jsx)("defs",{children:Object(R.jsx)("clipPath",{id:"clip0",children:Object(R.jsx)("rect",{width:"19.7203",height:"19.7203",fill:"white",transform:"translate(0.09375 0.990601)"})})})]}))},Vt=function(){return Object(R.jsx)("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(R.jsx)("path",{d:"M7.44798 12.8541L1.86072 7.26685L7.44798 1.67958",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})};function Wt(t){var e=t.onChange,n=t.deposit,a=void 0===n?0:n,i=C(t.token),s=Object(r.useState)(0),c=Object(m.a)(s,2),d=c[0],o=c[1],l=Object(r.useState)(0),u=Object(m.a)(l,2),j=u[0],w=u[1],b=Object(r.useState)(0),x=Object(m.a)(b,2),p=x[0],h=x[1],f=86400*d+60*j+3600*p,O=Math.round(a/i.secondsToTicks(f));(isNaN(O)||O===1/0)&&(O=0);var v=function(t){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){e.current=t}),[t]),e.current}(O);return Object(r.useEffect)((function(){v!==O&&e(O)}),[O,e,v]),Object(R.jsxs)("div",{className:"twind-flex",label:"Stream duration",children:[Object(R.jsxs)("label",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-l-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(R.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",placeholder:"0",value:d,onChange:function(t){o(t.target.value)}}),Object(R.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"days"})]}),Object(R.jsxs)("label",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(R.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",placeholder:"0",value:p,onChange:function(t){return h(t.target.value)}}),Object(R.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"hours"})]}),Object(R.jsxs)("label",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-r-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(R.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",placeholder:"0",value:j,onChange:function(t){return w(t.target.value)}}),Object(R.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"mins"})]})]})}var Ut=D.c().shape({owner:D.d().required("Owner is a required"),receiver:D.d().required("Receiver is a required"),token:D.d().required(),deposit:D.b().required().moreThan(0,"Deposit should be more than 0"),speed:D.b().required().moreThan(0,"Choose stream duration"),autoDeposit:D.a(),comment:D.d().max(255)});function Bt(t){t.account;var e=t.onSubmit,n=E().auth.signedAccountId,a=Object(r.useState)(!1),i=Object(m.a)(a,2),s=i[0],d=i[1],o=Object(r.useState)(null),l=Object(m.a)(o,2),u=l[0],b=l[1],x=Object.keys(y).filter((function(t){return"fallback"!==t})),p=function(){var t=Object(w.a)(j.a.mark((function t(){var n,r=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.apply(void 0,r);case 3:return n=t.sent,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),b(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(R.jsx)(T.b,{initialValues:{owner:n,receiver:"",token:"NEAR",speed:0,deposit:0,autoDeposit:!1,comment:""},validationSchema:Ut,onSubmit:p,validateOnBlur:!1,validateOnChange:!1,validateOnMount:!1,children:function(t){var e=t.values,n=t.setFieldValue,r=t.setFieldTouched,a=t.handleSubmit,i=t.isSubmitting,o=C(e.token);return Object(R.jsxs)("form",{className:"twind-max-w-lg twind-mx-auto twind-w-full",onSubmit:a,children:[Object(R.jsx)(T.a,{name:"owner",children:function(t){var e=t.field,n=t.form,r=(n.touched,n.errors,t.meta);return Object(R.jsx)(q,{label:"Owner:",className:"twind-mb-4",error:r.error,children:Object(R.jsx)(Y,{children:Object(R.jsx)("input",Object(c.a)({placeholder:"owner.near",id:"ownerInput"},e))})})}}),Object(R.jsx)(T.a,{name:"receiver",children:function(t){var e=t.field,n=t.form,r=(n.touched,n.errors,t.meta);return Object(R.jsx)(q,{label:"Receiver:",className:"twind-mb-4",error:r.error,children:Object(R.jsx)(Y,{children:Object(R.jsx)("input",Object(c.a)({placeholder:"owner.near",id:"ownerInput"},e))})})}}),Object(R.jsxs)("div",{className:"twind-flex twind-mb-4",children:[Object(R.jsx)(T.a,{name:"token",children:function(t){var e=t.field,a=t.form,i=(a.touched,a.errors,t.meta);return Object(R.jsxs)(q,{label:"Token:",className:"twind-w-1/3 twind-items-center twind-relative",error:i.error,children:[Object(R.jsx)(nt,{minimal:!0,className:"twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue twind-text-xl twind-h-14 twind-px-4 twind-py-3 twind-border twind-border-border twind-w-36",onClick:function(){d(!s)},children:Object(R.jsxs)("div",{className:"twind-inline-flex",children:[Object(R.jsx)(xt,{tokenName:e.value})," ",Object(R.jsx)("span",{children:e.value})]})}),Object(R.jsx)(Q,{opened:s,className:"twind-z-10",children:x.map((function(t){return Object(R.jsx)($,{className:"focus-within:twind-border-blue",children:Object(R.jsx)(rt,{label:Object(R.jsxs)("div",{className:"twind-inline-flex",children:[Object(R.jsx)(xt,{tokenName:t})," ",Object(R.jsx)("span",{children:t})]}),active:e.value===t,value:t,onChange:function(t){d(!1),n(e.name,t,!1),r(e.name,!0,!1)}})},t)}))})]})}}),Object(R.jsx)(T.a,{name:"deposit",children:function(t){var e=t.field,n=t.form,r=(n.touched,n.errors,t.meta);return Object(R.jsx)(q,{label:Object(R.jsxs)("span",{children:[Object(R.jsx)("span",{children:"Stream initial deposit:"}),Object(R.jsx)(vt,{className:"twind-ml-2",overlay:"Funds which will be used to create an initial stream for a set period. This deposit can be extended in manual or automatical mode."})]}),className:"twind-w-2/3",error:r.error,children:Object(R.jsx)(Y,{children:Object(R.jsx)("input",Object(c.a)({placeholder:"0.00"},e))})})}})]}),Object(R.jsx)("div",{className:"twind-block twind-mb-4",children:Object(R.jsx)(T.a,{name:"speed",children:function(t){var a=t.field,i=t.form,s=(i.touched,i.errors,t.meta);return Object(R.jsxs)(q,{label:Object(R.jsxs)("div",{className:"twind-relative",children:[Object(R.jsxs)("div",{children:["Period to unlock the initial deposit:"," ",Object(R.jsx)(vt,{className:"twind-ml-2",overlay:"In case of no extensions for an initial deposit after this period will be reached reciever will be able to withdraw whole initial deposit and close the stream. "})]}),Object(R.jsxs)("div",{className:"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1",children:["Streaming speed: ",o.tokensPerS(a.value)," ",e.token," / sec"]})]}),error:s.error,children:[" ",Object(R.jsx)(Wt,{token:e.token,deposit:o.toInt(e.deposit),onChange:function(t){n(a.name,t,!1),r(a.name,!0,!1)}})]})}})}),Object(R.jsx)(T.a,{name:"comment",children:function(t){var e=t.field,n=t.form,r=(n.touched,n.errors,t.meta);return Object(R.jsx)(q,{className:"twind-mb-6",error:r.error,label:Object(R.jsxs)("div",{className:"twind-flex twind-justify-between twind-items-center",children:[Object(R.jsx)("div",{className:"twind-mb-1",children:"Comment:"}),Object(R.jsxs)("div",{className:"twind-text-xs twind-text-gray",children:[e.value&&e.value.length||0,"/255"]})]}),children:Object(R.jsx)("label",{className:"twind-h-40 Input twind-font-semibold twind-flex twind-p-4 twind-pt-0 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue twind-border-border",children:Object(R.jsx)("textarea",Object(c.a)({id:"commentInput",className:" twind-bg-input  twind-w-full twind-h-full twind-pt-2 focus:twind-outline-none twind-resize-none",placeholder:"Enter comment",maxLength:"255"},e))})})}}),u&&Object(R.jsxs)("p",{className:"twind-text-special-inactive twind-my-4",children:["Submit error: ",u.message]}),Object(R.jsxs)("div",{className:"twind-flex twind-relaitive",children:[Object(R.jsxs)("div",{children:[Object(R.jsxs)("label",{className:"twind-flex",children:[Object(R.jsx)(T.a,{name:"autoDeposit",className:"twind-mr-1",type:"checkbox"}),Object(R.jsxs)("span",{children:["Enable auto deposit?"," ",Object(R.jsx)(vt,{className:"twind-ml-2",overlay:"Check this if you want make this stream infinite extending getting deposits from income streams with saving initial stream speed."})]})]}),Object(R.jsx)("p",{className:"twind-text-left twind-text-gray twind-w-2/3 twind-text-sm",children:"You will be charged 0.1 NEAR fee for that stream"})]}),Object(R.jsx)(U,{disabled:i,variant:"main",size:"big",className:"twind-rounded-lg",children:"Create Stream"})]})]})}})}var Ht=function(){var t=E(),e=t.auth.signedAccountId;function n(){return(n=Object(w.a)(j.a.mark((function e(n){var r,a,i,s,c,d,o,l;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.owner,a=n.receiver,i=n.autoDeposit,s=n.comment,c=n.deposit,d=n.speed,o=n.token,l=C(o),console.log("creating",o),console.log("token",t.near.fts[o]),"NEAR"!==o){e.next=10;break}return e.next=7,t.contractApi.createStream({deposit:l.toInt(c),description:s,ownerId:r,receiverId:a,token:o,speed:String(d),autoDepositEnabled:i});case 7:e.t0=e.sent,e.next=13;break;case 10:return e.next=12,t.near.fts[o].contract.ft_transfer_call({receiver_id:t.near.contractName,amount:c,memo:"xyiming transfer",msg:JSON.stringify({Create:{description:s,owner_id:r,receiver_id:a,token_name:o,balance:l.toInt(c),tokens_per_tick:String(d),auto_deposit_enabled:i}})},"200000000000000",1);case 12:e.t0=e.sent;case 13:e.t0;case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r=function(){var n=Object(w.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return",[]);case 3:return n.next=5,t.near.contract.get_account({account_id:e});case 5:return n.abrupt("return",n.sent);case 8:n.prev=8,n.t0=n.catch(0),console.log("near error",n.t0);case 11:return n.abrupt("return",[]);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(b.a)(["account",e],r,{errorRetryInterval:250}).data,Object(R.jsxs)("div",{className:"twind-container twind-m-auto twind-px-5 twind-py-12",children:[Object(R.jsxs)("div",{className:"twind-text-center",children:[Object(R.jsx)("h1",{className:"twind-text-5xl twind-mb-4 twind-text-center",children:"Create a stream"}),Object(R.jsx)("p",{className:"twind-text-gray",children:"Stream your tokens to the receiver directly"})]}),Object(R.jsx)(Bt,{onSubmit:function(t){return n.apply(this,arguments)}})]})};function zt(t){var e=function(){var t=E();function e(){return(e=Object(w.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.preventDefault(),e.next=3,t.login();case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(w.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.logout();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{accountId:t.auth.signedAccountId,signedIn:t.auth.signedIn,inited:t.inited,login:function(t){return e.apply(this,arguments)},logout:function(t){return n.apply(this,arguments)}}}(),n=e.inited,r=e.logout,a=e.login,i=e.accountId,s=e.signedIn;return n?s?Object(R.jsxs)(U,Object(c.a)(Object(c.a)({onClick:r},t),{},{children:["Sign out (",i,")"]})):Object(R.jsx)(U,Object(c.a)(Object(c.a)({onClick:a},t),{},{children:"Sign in with NEAR Wallet"})):Object(R.jsxs)(U,Object(c.a)(Object(c.a)({},t),{},{children:["Connecting..."," ",Object(R.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})]}))}var Yt="/account",Zt="/my_streams",qt="/",Xt=function(t){return"/my_streams/".concat(t)},Gt=n.p+"static/media/logo_stream_with_text.60ac7210.svg";function Kt(t){var e=a.a.useState(t),n=Object(m.a)(e,2),r=n[0],i=n[1];return{on:r,off:!r,toggle:function(){return i(!r)},turnOff:function(){return i(!1)},turnOn:function(){return i(!0)}}}function Jt(){var t=Object(R.jsx)("div",{className:"twind-flex twind-justify-start twind-items-center",children:Object(R.jsx)("img",{src:Gt,alt:"xyiming logo"})});return Object(R.jsx)("div",{className:F()("twind-py-4 twind-px-6","twind-absolute twind-w-full twind-pt-8","twind-flex twind-justify-center"),children:t})}function Qt(){var t=Kt(!1),e=Object(R.jsxs)("ul",{className:"twind-flex-col lg:twind-flex-row twind-flex twind-justify-center ",children:[Object(R.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(R.jsx)(H,{onClick:t.turnOff,to:Yt,icon:Object(R.jsx)(St,{}),children:"Account"})}),Object(R.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(R.jsx)(H,{onClick:t.turnOff,to:Zt,icon:Object(R.jsx)(Ct,{}),children:"My Streams"})}),Object(R.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(R.jsx)(H,{onClick:t.turnOff,to:qt,icon:Object(R.jsx)(yt,{}),children:"Send"})})]}),n=Object(R.jsx)("div",{className:"twind-flex twind-justify-start twind-items-center",children:Object(R.jsx)("img",{src:Gt,alt:"xyiming logo"})});return Object(R.jsxs)("div",{className:"twind-py-4 twind-px-6 twind-w-full twind-pt-8",children:[Object(R.jsxs)("div",{className:F()("twind-hidden lg:twind-grid twind-items-center twind-grid-cols-3 twind-gap-3 "),children:[n,e,Object(R.jsx)("div",{className:"twind-flex twind-justify-end",children:Object(R.jsx)(zt,{})})]}),Object(R.jsxs)("div",{className:F()("lg:twind-hidden"),children:[Object(R.jsxs)("div",{className:"twind-flex twind-justify-between",children:[n,Object(R.jsx)("button",{className:"twind-p-1",onClick:t.toggle,type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(R.jsx)("div",{className:F()("burger-menu",t.on?"burger-menu--active":"")})})]}),Object(R.jsxs)("div",{className:F()(t.on?"twind-block":"twind-hidden","twind-mt-4"),children:[e,Object(R.jsx)(zt,{className:"mt-4"})]})]})]})}function $t(){return Object(o.h)("/authorize")?Object(R.jsx)(Jt,{}):Object(R.jsx)(Qt,{})}var te=n(53),ee=n.n(te),ne=["stream","direction","className"];function re(t){var e=t.stream,n=t.direction,r=t.className,a=Object(d.a)(t,ne),i=Me(e).tf.tokensPerMeaningfulPeriod(e.tokens_per_tick);return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:F()("twind-inline-flex twind-items-center twind-whitespace-nowrap",r)},a),{},{children:["out"===n?Object(R.jsx)(It,{}):"in"===n?Object(R.jsx)(_t,{}):"",Object(R.jsxs)("span",{className:"twind-ml-2",children:[Object(R.jsxs)("span",{children:["@",i.formattedValue]}),Object(R.jsxs)("span",{children:[" ",e.token_name," / ",i.unit]})]})]}))}var ae=new Error("Provide stream id to use stream methods");function ie(t){var e=function(){if(!t)throw ae},n=E(),r=a.a.useState(!1),i=Object(m.a)(r,2),s=i[0],c=i[1];function d(){return(d=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("updating all account"),t.next=3,n.contractApi.updateAccount({});case 3:console.log("update completed");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(w.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("enable",t),r.next=4,n.contractApi.changeAutoDeposit({streamId:t,autoDeposit:!0});case 4:r.sent;case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function l(){return(l=Object(w.a)(j.a.mark((function r(){return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("disabling",t),r.next=4,n.contractApi.changeAutoDeposit({streamId:t,autoDeposit:!1});case 4:r.sent;case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function u(){return(u=Object(w.a)(j.a.mark((function r(a){var i,s;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=a.token,s=a.deposit,e(),console.log("depositing",i,t),"NEAR"!==i){r.next=8;break}return r.next=6,n.contractApi.depositStream({streamId:t,deposit:s});case 6:r.next=10;break;case 8:return r.next=10,n.near.fts[i].ft_transfer_call({receiver_id:n.near.contractName,amount:s,memo:"xyiming transfer",msg:t},"200000000000000",1);case 10:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function b(){return(b=Object(w.a)(j.a.mark((function r(){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("pausing",t),r.next=4,n.contractApi.pauseStream({streamId:t});case 4:return a=r.sent,console.log("pausing res",a),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function x(){return(x=Object(w.a)(j.a.mark((function r(){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("restarting",t),r.next=4,n.contractApi.startStream({streamId:t});case 4:return a=r.sent,console.log("restarting res",a),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(){return(p=Object(w.a)(j.a.mark((function r(){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("Stop called stopping",t),r.next=4,n.contractApi.stopStream({streamId:t});case 4:return a=r.sent,console.log("stopping res",a),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function h(t){return Object(w.a)(j.a.mark((function e(){var n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return c(!0),e.prev=3,e.next=6,t.apply(void 0,n);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,c(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))}return{loading:s,updateAllAndWithdraw:h((function(){return d.apply(this,arguments)})),pause:h((function(){return b.apply(this,arguments)})),restart:h((function(){return x.apply(this,arguments)})),stop:h((function(){return p.apply(this,arguments)})),deposit:h((function(t){return u.apply(this,arguments)})),enable:h((function(){return o.apply(this,arguments)})),disable:h((function(){return l.apply(this,arguments)}))}}var se={INITIALIZED:"INITIALIZED",ACTIVE:"ACTIVE",PAUSED:"PAUSED",FINISHED:"FINISHED",INTERRUPTED:"INTERRUPTED"},ce="in",de="out",oe="enabled",le="disabled",ue="Init",je="Deposit",we="Start",be="Withdraw",me="Pause",xe="Stop",pe=["stream","className"];function he(t){var e,n=t.stream,r=t.className,a=Object(d.a)(t,pe),i=(e={},Object(g.a)(e,se.INITIALIZED,{colorClass:"twind-text-special-active",label:"Initialized"}),Object(g.a)(e,se.ACTIVE,{colorClass:"twind-text-special-active",label:"Active"}),Object(g.a)(e,se.PAUSED,{colorClass:"twind-text-special-hold",label:"Paused"}),Object(g.a)(e,se.FINISHED,{colorClass:"twind-text-special-active",label:"Finished"}),Object(g.a)(e,se.INTERRUPTED,{colorClass:"twind-text-special-inactive",label:"Interrupted"}),e)[n.status]||{};return Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()(i.colorClass,r)},a),{},{children:i.label}))}function fe(t){var e=t.stream,n=t.minimal,a=t.className,i=E(),s=i.near.accountId===e.owner_id,c=i.near.accountId===e.receiver_id,d=!s&&!c,o=e.status===se.INTERRUPTED||e.status===se.FINISHED,l=Object(r.useState)(!1),u=Object(m.a)(l,2),j=u[0],w=u[1],b=ie(e.stream_id);if(o||d)return Object(R.jsx)(he,{className:F()(n?"":"twind-border twind-border-border twind-p-4 twind-px-6 twind-rounded-lg",a),stream:e});var x=j&&!b.loading;return Object(R.jsxs)("div",{className:F()(a,"twind-relative twind-inline-flex"),children:[Object(R.jsx)(nt,{minimal:n,opened:x,onClick:function(){return w(!j)},children:b.loading?"Loading...":Object(R.jsx)(he,{stream:e})}),Object(R.jsxs)(Q,{opened:x,className:"twind-top-full twind-w-44",children:[e.status!==se.ACTIVE&&s?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)($,{children:Object(R.jsxs)("button",{className:"twind-inline-flex twind-items-center twind-font-semibold",onClick:b.restart,children:[Object(R.jsx)(Mt,{className:"twind-mr-4 twind-flex-shrink-0"}),Object(R.jsx)("span",{children:"Start stream "})," "]})}),Object(R.jsx)(tt,{})]}):null,e.status!==se.PAUSED?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)($,{children:Object(R.jsxs)("button",{className:"twind-inline-flex twind-items-center twind-font-semibold",onClick:b.pause,children:[Object(R.jsx)(Rt,{className:"twind-mr-4 twind-flex-shrink-0"}),Object(R.jsx)("span",{children:"Pause stream"})]})}),Object(R.jsx)(tt,{})]}):null,Object(R.jsx)($,{children:Object(R.jsxs)("button",{className:"twind-inline-flex twind-items-center twind-font-semibold",onClick:b.stop,children:[Object(R.jsx)(Ft,{className:"twind-mr-4 twind-flex-shrink-0"}),Object(R.jsx)("span",{children:" Stop stream "})]})})]})]})}var Oe=["stream","className","disableMsg","enableMsg"];function ve(t){var e,n=t.stream,r=t.className,a=t.disableMsg,i=t.enableMsg,s=Object(d.a)(t,Oe),o=(e={},Object(g.a)(e,oe,{colorClass:"twind-text-special-hold",label:a||"Enabled"}),Object(g.a)(e,le,{colorClass:"twind-text-special-active",label:i||"Disabled"}),e)[n.auto_deposit_enabled?"enabled":"disabled"]||{};return Object(R.jsx)("div",Object(c.a)(Object(c.a)({className:F()(o.colorClass,r)},s),{},{children:o.label}))}var ge=n(87),Ne=n.n(ge);function ke(t){var e=t.stream,n=ie(e.stream_id),a=Object(r.useState)(""),i=Object(m.a)(a,2),s=i[0],c=i[1],d=C(e.token_name),o=Kt(!1);return{modal:Object(R.jsxs)(Ne.a,{isOpen:o.on,onRequestClose:o.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(R.jsx)("h2",{className:"twind-text-2xl twind-mb-6",children:"Amount to deposit"}),Object(R.jsx)(Y,{className:"twind-mb-4",children:Object(R.jsx)("input",{placeholder:"0.00 ".concat(e.token_name),className:"twind-text-black",value:s,onChange:function(t){return c(t.target.value)}})}),Object(R.jsx)(U,{className:"twind-w-full",variant:"filled",type:"button",onClick:function(){return n.deposit({token:e.token_name,deposit:d.toInt(s)})},children:"Add funds"})]}),modalControl:o}}function ye(t){var e=t.stream,n=t.className,r=ke({stream:e});return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(U,{variant:"filled",type:"button",onClick:r.modalControl.turnOn,className:n,children:[Object(R.jsx)(Dt,{className:"twind-mr-2"}),"Add funds"]}),r.modal]})}function Ce(t){var e=t.stream,n=t.variant,r=void 0===n?"filled":n,a=ke({stream:e});return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)(U,{variant:r,color:"dark",type:"button",onClick:a.modalControl.turnOn,children:[Object(R.jsx)(Lt,{className:"twind-mr-2"}),"Add funds"]}),a.modal]})}function _e(t){var e=t.stream,n=t.minimal,r=t.className,a=t.disableMsg,i=t.enableMsg,s=E(),c=s.near.accountId===e.owner_id,d=s.near.accountId===e.receiver_id,o=!c&&!d,l=e.status===se.INTERRUPTED||e.status===se.FINISHED,u=ie(e.stream_id),j=Kt(!1),w=j.on&&!u.loading;return l||o?Object(R.jsx)(ve,{stream:e,enableMsg:i,disableMsg:a}):Object(R.jsxs)("div",{className:F()(r,"twind-relative twind-inline-flex"),children:[Object(R.jsx)(nt,{minimal:n,opened:w,onClick:j.toggle,className:"twind-flex-grow",children:Object(R.jsx)(ve,{stream:e,enableMsg:i,disableMsg:a})}),Object(R.jsx)(Q,{opened:w,className:"twind-top-full twind-w-44",children:e.auto_deposit_enabled?Object(R.jsx)($,{children:Object(R.jsxs)("button",{className:"twind-inline-flex twind-items-center twind-font-semibold twind-w-full",onClick:u.disable,children:[Object(R.jsx)(Rt,{className:"twind-mr-4 twind-flex-shrink-0"}),Object(R.jsx)("span",{children:"Disable"})]})}):Object(R.jsx)($,{children:Object(R.jsxs)("button",{className:"twind-inline-flex twind-items-center twind-font-semibold twind-w-full",onClick:u.enable,children:[Object(R.jsx)(Mt,{className:"twind-mr-4 twind-flex-shrink-0"}),Object(R.jsx)("span",{children:"Enable"})]})})})]})}var Ie=n(381),Se=n(379),Ae={xYears:"{{count}} years",xMonths:"{{count}} months",xDays:"{{count}}d",xSeconds:"{{count}}s",xMinutes:"{{count}}m",xHours:"{{count}}h"},Ee={formatDistance:function(t,e){return Ae[t].replace("{{count}}",e)}};function Te(t){return t instanceof Date&&!isNaN(t)}function De(t){var e=t.untilTimestamp,n=t.suffix,a=t.finishedText,i=function(t){var e=t.untilTimestamp,n=new Date(e),a=Te(n),i=Object(r.useState)(!a||(new Date).getTime()>n.getTime()),s=Object(m.a)(i,2),c=s[0],d=s[1],o=Object(r.useState)(c?null:Object(Ie.a)({start:new Date,end:n})),l=Object(m.a)(o,2),u=l[0],j=l[1];return Object(r.useEffect)((function(){var t=new Date(e);if(Te(t)){var n=setInterval((function(){var e=(new Date).getTime()>t.getTime();if(d(e),j(null),!e){var n=Object(Ie.a)({start:new Date,end:t});j(n)}}),1e3);return function(){return clearInterval(n)}}}),[e,c]),{duration:u,dateValid:a,expired:c}}({untilTimestamp:e}),s=i.duration,c=i.dateValid,d=i.expired;if(!c)return Object(R.jsx)("span",{children:"Invalid Date"});if(!s||d)return Object(R.jsx)("span",{children:a});(s.days||s.weeks||s.months||s.years)&&(s.seconds=0);var o=Object(Se.a)(s,{locale:Ee})+(n||"");return Object(R.jsx)("span",{children:o})}function Me(t){var e=C(t.token_name),n="".concat(window.location.origin,"/#/my_streams/").concat(t.stream_id),r=e.ticksToMs(Math.round((t.balance-t.available_to_withdraw)/t.tokens_per_tick)),a=new Date((new Date).getTime()+r),i=a.getTime(),s=Number(t.balance)+Number(t.tokens_total_withdrawn),c=Number(t.tokens_total_withdrawn),d=Number(t.tokens_total_withdrawn)+Number(t.available_to_withdraw),o=Number(t.available_to_withdraw),l=s-d,u={left:(s-d)/s,streamed:d/s,withdrawn:c/s,available:o/s};return{dateEnd:a,progresses:[c/s,d/s],tf:e,isDead:t.status===se.FINISHED||t.status===se.INTERRUPTED,percentages:u,link:n,timestampEnd:i,progress:{full:s,withdrawn:c,streamed:d,left:l,available:o}}}var Fe=["label","formattedFloatValue","percentageValue","colorClass","className"];function Re(t){var e=t.label,n=t.formattedFloatValue,r=t.percentageValue,a=t.colorClass,i=t.className,s=Object(d.a)(t,Fe);return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:i},s),{},{children:[Object(R.jsx)(Nt,{className:F()(a,"twind-mr-1")}),Object(R.jsxs)("span",{children:[e,":"," ",Object(R.jsxs)("span",{className:"twind-font-semibold",children:[n," "]}),Object(R.jsxs)("span",{className:"twind-text-gray",children:[" ","(",k()(r).format({output:"percent",mantissa:1}),")"]})]})]}))}var Le={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"};function Pe(t){var e=t.stream,n=void 0===e?Le:e,r=t.direction,a=t.className,i=Me(n),s=(i.dateEnd,i.progresses),c=i.tf,d=i.timestampEnd,o=i.percentages,u=i.progress,j=u.full,w=u.withdrawn,b=u.streamed,m=i.link;return Object(R.jsxs)("div",{className:F()("twind-grid twind-grid-cols-12 twind-gap-6 twind-justify-items-center","twind-p-10 twind-bg-input twind-rounded-3xl",a),children:[Object(R.jsxs)(l.b,{to:Xt(n.stream_id),className:"twind-w-full twind-col-span-12 xl:twind-col-span-6 twind-justify-self-start",children:[Object(R.jsxs)("div",{className:"twind-flex twind-items-center",children:[Object(R.jsx)(ht,{tokenName:n.token_name,className:"twind-mr-4"}),Object(R.jsxs)("div",{className:"twind-w-full twind-gap-4 twind-flex twind-items-end twind-flex-wrap",children:[Object(R.jsxs)("div",{className:"twind-text-2xl twind-whitespace-nowrap twind-flex-shrink-0",children:[c.amount(b)," of ",c.amount(j)," ",Object(R.jsx)("span",{className:"twind-uppercase",children:n.token_name})]}),Object(R.jsx)(re,{stream:n,direction:r}),Object(R.jsx)("div",{className:"twind-whitespace-nowrap",children:n.status===se.PAUSED?"":Object(R.jsx)(De,{untilTimestamp:d,suffix:" remaining"})})]})]}),Object(R.jsx)(lt,{className:"twind-mt-5",progresses:s}),Object(R.jsxs)("div",{className:"twind-flex twind-text-sm twind-mt-3 twind-mr-3",children:[Object(R.jsx)(Re,{className:"twind-mr-4",label:"Withdrawn",colorClass:"twind-bg-streams-withdrawn",formattedFloatValue:c.amount(w)+" "+n.token_name,percentageValue:o.withdrawn}),Object(R.jsx)(Re,{label:"Streamed",colorClass:"twind-bg-streams-streamed",formattedFloatValue:c.amount(b)+" "+n.token_name,percentageValue:o.streamed})]})]}),Object(R.jsx)("div",{className:"twind-hidden xl:twind-block"}),Object(R.jsxs)("div",{className:"twind-flex twind-gap-5 twind-justify-between xl:twind-justify-end twind-col-span-12 xl:twind-col-span-5 twind-w-full twind-items-center twind-flex-wrap md:twind-flex-nowrap",children:[Object(R.jsxs)("div",{className:"twind-w-44",children:[Object(R.jsx)("div",{className:"twind-text-gray",children:"Receiver:"}),Object(R.jsx)("div",{className:"twind-break-words",children:n.receiver_id})]}),Object(R.jsxs)("div",{className:"twind-w-24",children:[Object(R.jsx)("div",{className:"twind-text-gray",children:"Status:"}),Object(R.jsx)(fe,{className:"twind-w-full",minimal:!0,stream:n})]}),"out"===r?Object(R.jsxs)("div",{className:"twind-col-span-1 twind-mr-4",children:[Object(R.jsx)("div",{className:"twind-text-gray",children:"Auto\u2011dep:"}),Object(R.jsx)(_e,{minimal:!0,stream:n})]}):null,Object(R.jsxs)("div",{className:"twind-flex twind-items-start twind-justify-end twind-w-52",children:["out"===r?Object(R.jsx)(ye,{className:"twind-flex-grow",stream:n}):null,Object(R.jsx)(U,{className:"twind-ml-3",variant:"filled",onClick:function(){return ee()(m)},to:Xt(n.stream_id),children:Object(R.jsx)(Pt,{})})]})]})]})}var Ve,We=n(380),Ue=["stream","account","className"],Be={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"},He=function(t){var e=t.label,n=t.children;return Object(R.jsxs)("div",{children:[Object(R.jsx)("div",{className:"twind-text-gray twind-text-sm",children:e}),Object(R.jsx)("div",{className:"twind-font-semibold twind-text-lg",children:n})]})},ze=function(t){var e=t.label,n=t.children;return Object(R.jsxs)("div",{className:"twind-flex twind-justify-between twind-my-3",children:[Object(R.jsx)("div",{className:"twind-text-gray twind-text-sm",children:e}),Object(R.jsx)("div",{className:"twind-text-sm twind-text-right",children:n})]})};function Ye(t){var e=t.stream,n=void 0===e?Be:e,r=t.account,a=t.className,i=Object(d.a)(t,Ue),s=Me(n),o=s.tf,l=s.percentages,u=s.timestampEnd,j=s.progress,w=j.full,b=j.streamed,m=(j.withdrawn,j.left),x=j.available,p=Ze({stream:n,account:r});return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:F()("twind-pt-10 twind-p-9 twind-bg-input twind-rounded-3xl",a)},i),{},{children:[Object(R.jsxs)("div",{className:"twind-flex twind-text-center twind-justify-between",children:[Object(R.jsx)(He,{label:"Receiver:",children:n.receiver_id}),Object(R.jsx)(He,{label:"Time Remaining:",children:n.status===se.PAUSED?"Paused":Object(R.jsx)(De,{untilTimestamp:u,finishedText:"Finished"})})]}),Object(R.jsx)("div",{className:"twind-border-t twind-border-border twind-mt-8 twind-mb-9"}),Object(R.jsx)(ze,{label:"Stream Created:",children:Object(We.a)(new Date(n.timestamp_created/1e6),"Yo")}),Object(R.jsx)(ze,{label:"Token:",children:n.token_name}),Object(R.jsxs)(ze,{label:"Total:",children:[o.amount(w)," ",n.token_name]}),Object(R.jsx)(ze,{label:"Tokens Transferred:",children:Object(R.jsxs)("span",{children:[o.amount(b)," ",n.token_name," ",Object(R.jsxs)("span",{className:"twind-text-gray",children:["(",k()(l.streamed).format({output:"percent",mantissa:2}),")"]})]})}),Object(R.jsx)(ze,{label:"Tokens Left:",children:Object(R.jsxs)("span",{children:[o.amount(m)," ",n.token_name," ",Object(R.jsxs)("span",{className:"twind-text-gray",children:["(",k()(l.left).format({output:"percent",mantissa:2}),")"]})]})}),Object(R.jsxs)(ze,{label:"Tokens Available:",children:[o.amount(x)," ",n.token_name]}),Object(R.jsx)(ze,{label:"Speed:",children:Object(R.jsx)(re,{stream:n,direction:null})}),"in"===p?Object(R.jsx)(ze,{label:"Latest Withdrawal:",children:Object(We.a)(new Date(r.last_action/1e6),"MMM dd, Yo  H:m")}):"",Object(R.jsx)(ze,{label:"Auto-deposit:",children:n.auto_deposit_enabled?"Enabled":"Disabled"}),Object(R.jsxs)(ze,{label:"Stream ID:",children:[Object(R.jsx)("div",{className:"twind-inline-block twind-w-24 twind-overflow-ellipsis twind-overflow-hidden",children:n.stream_id}),Object(R.jsx)("button",{onClick:function(){return ee()(n.stream_id)},className:"hover:twind-text-blue",children:Object(R.jsx)(kt,{})})]})]}))}function Ze(t){var e=t.stream,n=t.account;return n?e.owner_id===n.account_id?"out":e.receiver_id===n.account_id?"in":"":""}function qe(t){var e=E(),n=ie(),r=Object(b.b)().mutate;function a(){return(a=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.updateAllAndWithdraw();case 2:r(["account",e.near.accountId]);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(R.jsx)(U,Object(c.a)(Object(c.a)({loadingText:"Updating account..."},t),{},{loading:n.loading,onClick:function(){return a.apply(this,arguments)}}))}function Xe(t){var e=t.stream,n=t.account,r=Me(e),a=r.tf,i=r.progresses,s=r.percentages,c=r.isDead,d=r.progress,o=d.full,l=d.withdrawn,u=d.streamed,j=Ze({stream:e,account:n});return Object(R.jsxs)("div",{className:F()("twind-flex","twind-flex-col","twind-items-center"),children:[Object(R.jsxs)("div",{className:"twind--mb-32",children:[Object(R.jsx)(vt,{align:{offset:[0,-20]},offset:{top:20},overlay:Object(R.jsxs)("div",{className:"twind-text-left",children:[Object(R.jsx)(Re,{className:"twind-whitespace-nowrap twind-mb-2",label:"Withdrawn",colorClass:"twind-bg-streams-withdrawn",formattedFloatValue:a.amount(l)+" "+e.token_name,percentageValue:s.withdrawn}),Object(R.jsx)(Re,{className:"twind-whitespace-nowrap",label:"Streamed",colorClass:"twind-bg-streams-streamed",formattedFloatValue:a.amount(u)+" "+e.token_name,percentageValue:s.streamed})]}),children:Object(R.jsx)(jt,{className:"twind-w-96 twind-h-48",progresses:i})}),Object(R.jsxs)("div",{className:"twind-flex twind-justify-between twind-pt-5 twind--mx-2 twind-text-gray",children:[Object(R.jsx)("div",{className:"twind-w-10 twind-text-center",children:" 0%"}),Object(R.jsx)("div",{className:"twind-w-10 twind-text-center",children:" 100%"})]})]}),Object(R.jsx)(ht,{size:14,tokenName:e.token_name,className:"twind-mb-8"}),Object(R.jsx)("div",{className:"twind-text-6xl twind-font-semibold",children:a.amount(u)}),Object(R.jsxs)("div",{className:"twind-text-gray twind-font-semibold",children:["of ",a.amount(o)," ",e.token_name]}),Object(R.jsx)(re,{stream:e,direction:j,className:"twind-mt-6 twind-mb-6"}),c?"":Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"twind-flex twind-relative twind-z-10",children:[Object(R.jsx)(fe,{stream:e,className:"twind-mr-2"}),"out"===j?Object(R.jsx)(Ce,{variant:"outlined",stream:e}):"in"===j?Object(R.jsx)(qe,{loadingText:"Withdrawing...",variant:"outlined",color:"dark",children:"Withdraw from all streams"}):null]}),"out"===j?Object(R.jsx)(_e,{stream:e,enableMsg:"Enable auto-deposit",disableMsg:"Disable auto-deposit",className:"twind-mt-4 twind-w-72"}):null]})]})}var Ge=["children","className"],Ke=["children","className"],Je=["actionType","className"],Qe=["stream","history","currentPage","onNextPageClick","onPrevPageClick","maxPage","pageSize","loading","className"];function $e(t){var e=t.children,n=t.className,r=Object(d.a)(t,Ge);return Object(R.jsx)("th",Object(c.a)(Object(c.a)({className:F()("twind-text-gray twind-font-normal twind-text-left twind-p-4",n)},r),{},{children:e}))}function tn(t){var e=t.children,n=t.className,r=Object(d.a)(t,Ke);return Object(R.jsx)("td",Object(c.a)(Object(c.a)({className:F()("first:twind-rounded-l-xl last:twind-rounded-r-xl twind-p-4 twind-font-normal twind-text-left twind-h-14 twind-bg-input",n)},r),{},{children:e}))}var en,nn=(Ve={},Object(g.a)(Ve,ue,"twind-text-special-active"),Object(g.a)(Ve,je,"twind-text-special-active"),Object(g.a)(Ve,we,"twind-text-special-active"),Object(g.a)(Ve,be,"twind-text-special-hold"),Object(g.a)(Ve,me,"twind-text-special-inactive"),Object(g.a)(Ve,xe,"twind-text-special-inactive"),Ve);function rn(t){var e=t.actionType,n=t.className,r=Object(d.a)(t,Je);return Object(R.jsx)("span",Object(c.a)(Object(c.a)({className:F()(nn[e],n)},r),{},{children:e}))}function an(t){var e=t.stream,n=t.history,r=t.currentPage,a=t.onNextPageClick,i=t.onPrevPageClick,s=t.maxPage,o=t.pageSize,l=t.loading,u=t.className,j=Object(d.a)(t,Qe),w=C(e.token_name);return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:F()("twind-border-separate Table",u)},j),{},{children:[Object(R.jsxs)("table",{className:"twind-border-separate Table twind-w-full",children:[Object(R.jsx)("thead",{children:Object(R.jsxs)("tr",{children:[Object(R.jsx)($e,{children:"Actor"}),Object(R.jsx)($e,{children:"Action Type"}),Object(R.jsx)($e,{children:"Amount"}),Object(R.jsx)($e,{children:"Timestamp"})]})}),Object(R.jsx)("tbody",{children:l?Array(o).fill(null).map((function(t,e){return Object(R.jsxs)("tr",{className:"twind-mb-2",children:[Object(R.jsx)(tn,{}),Object(R.jsx)(tn,{}),Object(R.jsx)(tn,{}),Object(R.jsx)(tn,{})]},e)})):n.map((function(t){return Object(R.jsxs)("tr",{className:"twind-mb-2",children:[Object(R.jsx)(tn,{className:"twind-break-all twind-w-42",children:t.actor}),Object(R.jsx)(tn,{children:Object(R.jsx)(rn,{actionType:t.action_type})}),Object(R.jsx)(tn,{children:t.amount?"".concat(w.amount(t.amount)," ").concat(e.token_name):""}),Object(R.jsx)(tn,{children:Object(We.a)((n=t.timestamp,{fromNanosec:function(){return n/1e3/1e3}}).fromNanosec(),"yyyy MMM dd HH:mm:ss")})]},t.timestamp+t.action_type);var n}))})]}),Object(R.jsxs)("div",{className:F()("twind-flex twind-justify-between",0===s?"twind-invisible":""),children:[Object(R.jsx)("button",{className:F()("twind-p-2 hover:twind-bg-hover hover:twind-border-hover twind-border twind-border-border twind-rounded-xl",r<=0?"twind-invisible":""),onClick:i,children:"Prev Page"}),Object(R.jsx)("div",{className:F()("twind-rounded-full twind-border-border twind-border twind-w-10 twindh-10 twind-inline-flex twind-items-center twind-justify-center"),children:r+1}),Object(R.jsx)("button",{className:F()("twind-p-2 hover:twind-bg-hover hover:twind-border-hover twind-border twind-border-border twind-rounded-xl",r>=s?"twind-invisible":""),onClick:a,children:"Next Page"})]})]}))}function sn(t){var e=t.options,n=Object.keys(e),a=Object(r.useState)(n[0]),i=Object(m.a)(a,2),s=i[0],c=i[1],d=e[s];return Object(r.useMemo)((function(){return{option:s,selectOption:c,options:e,optionsArray:n,currentFilterFunction:d}}),[e,s])}var cn="All",dn="Incoming",on="Outgoing",ln=(en={ALL:"All",ACTIVE:"Active",PAUSED:"Paused",ARCHIVED:"Archived"},Object(g.a)(en,se.FINISHED,"Finished"),Object(g.a)(en,se.INTERRUPTED,"Interrupted"),en);function un(t){var e=Object(r.useMemo)((function(){var t;return t={},Object(g.a)(t,ln.ALL,(function(){return!0})),Object(g.a)(t,ln.ACTIVE,(function(t){return t.status===se.ACTIVE})),Object(g.a)(t,ln.PAUSED,(function(t){return t.status===se.PAUSED})),Object(g.a)(t,ln.ARCHIVED,(function(t){return t.status===se.ARCHIVED})),Object(g.a)(t,ln[se.INTERRUPTED],(function(t){return t.status===se.INTERRUPTED})),Object(g.a)(t,ln[se.FINISHED],(function(t){return t.status===se.FINISHED})),t}),[]),n=Object(r.useMemo)((function(){var t;return t={},Object(g.a)(t,cn,(function(){return!0})),Object(g.a)(t,dn,(function(t){return ce===t.direction})),Object(g.a)(t,on,(function(t){return de===t.direction})),t}),[]),a=sn({options:e}),i=sn({options:n}),s=function(t){var e=t.items,n=t.filters,a=Object(r.useState)([]),i=Object(m.a)(a,2),s=i[0],c=i[1],d=Object(r.useState)([]),o=Object(m.a)(d,2),l=o[0],u=o[1];return Object(r.useEffect)((function(){var t=e,r=[];n.forEach((function(e){var n={};Object.keys(e.options).forEach((function(r){var a=t.filter(e.options[r]);n[r]=a}));var a={};Object.keys(n).forEach((function(t){return a[t]=n[t].length})),r.push(a),t=n[e.option]})),u(r),c(t)}),[e,n]),{filterCounts:l,filteredItems:s}}({items:t,filters:Object(r.useMemo)((function(){return[i,a,i]}),[i,a])});return{statusFilter:a,directionFilter:i,result:s}}function jn(t,e,n){return Number(t[n])>Number(e[n])?-1:Number(t[n])<Number(e[n])?1:0}var wn={bigBalanceFirst:{label:"With big balances",fn:function(t,e){return jn(t,e,"balance")}},highSpeedFirst:{label:"With high speed",fn:function(t,e){return jn(t,e,"tokens_per_tick")}},highSpeedLast:{label:"With low speed",fn:function(t,e){return-1*jn(t,e,"tokens_per_tick")}},mostRecent:{label:"Most recent",fn:function(t,e){return jn(t,e,"timestamp_created")}}},bn=[se.INITIALIZED,se.ACTIVE,se.PAUSED,se.INTERRUPTED,se.FINISHED];function mn(t,e){return bn.indexOf(t.status)-bn.indexOf(e.status)}function xn(t){var e=t.items,n=t.onFilterDone,a=t.className,i=un(e),s=Object(r.useState)(wn.mostRecent),c=Object(m.a)(s,2),d=c[0],o=c[1],l=Object.values(wn);return Object(r.useEffect)((function(){var t=Object(at.a)(i.result.filteredItems);t.sort(mn),t.sort(d.fn),n(t)}),[i.result.filteredItems,n,d.fn]),Object(R.jsxs)("div",{className:F()("md:twind-flex",a),children:[Object(R.jsx)(K,{className:"twind-mr-5 twind-z-10",options:i.directionFilter.optionsArray,label:"Type:",active:i.directionFilter.option,onChange:i.directionFilter.selectOption,renderOption:function(t){var e=i.result.filterCounts[0];return Object(R.jsx)(G,{option:t,count:e?e[t]:""})}}),Object(R.jsx)(K,{className:"twind-z-10",options:i.statusFilter.optionsArray,label:"Status:",active:i.statusFilter.option,onChange:i.statusFilter.selectOption,renderOption:function(t){var e=i.result.filterCounts[1];return Object(R.jsx)(G,{option:t,count:e?e[t]:""})}}),Object(R.jsx)("div",{className:"twind-flex-grow"}),Object(R.jsx)(K,{className:"twind-mt-3 md:twind-mt-0",minimal:!0,options:l,label:"Show first:",active:d,onChange:o,renderOption:function(t){return Object(R.jsx)("span",{children:t.label})},renderActive:function(t){return Object(R.jsx)("span",{children:t.label})}})]})}function pn(t,e){return hn.apply(this,arguments)}function hn(){return(hn=Object(w.a)(j.a.mark((function t(e,n){var r,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.streamId,a=n.near,t.next=4,a.contractApi.getStream({streamId:r});case 4:return i=t.sent,t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function fn(t,e){return On.apply(this,arguments)}function On(){return(On=Object(w.a)(j.a.mark((function t(e,n){var r,a,i,s,c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.streamId,a=e.from,i=e.to,s=n.near,t.next=4,s.contractApi.getStreamHistory({streamId:r,from:a,to:i});case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function vn(){return(vn=Object(w.a)(j.a.mark((function t(e,n){var r,a,i,s,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.inputs,a=e.outputs,i=n.near,t.next=4,Promise.all(r.map((function(t){return i.contractApi.getStream({streamId:t})})));case 4:return s=t.sent,t.next=7,Promise.all(a.map((function(t){return i.contractApi.getStream({streamId:t})})));case 7:return d=t.sent,t.abrupt("return",{inputs:s.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{direction:"in"})})),outputs:d.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{direction:"out"})}))});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function gn(t){var e=t.near;return Object(b.a)(["account",e.near.accountId],e.contractApi.getCurrentAccount,{errorRetryInterval:250})}function Nn(t){var e=t.near,n=t.accountSWR.data;return Object(b.a)((function(){return!!n&&["streams",n.account_id,n.last_action]}),(function(){return function(t,e){return vn.apply(this,arguments)}({inputs:n.inputs,outputs:n.outputs},{near:e})}))}var kn=n.p+"static/media/RUSSIANS_HACK.83d68466.gif",yn=n.p+"static/media/crab.3fbdb8f2.gif",Cn=["message","onRetry","className"];function _n(t){var e=t.message,n=t.onRetry,r=t.className,i=(Object(d.a)(t,Cn),a.a.useRef(Math.random()));return Object(R.jsxs)("div",{className:F()("twind-text-center",r),children:[i.current>.5?Object(R.jsx)("img",{src:kn,className:"twind-mx-auto",alt:"funny hackers gif with bird dancing around"}):Object(R.jsx)("img",{src:yn,className:"twind-mx-auto",alt:"crab with a knife tries to hurt people"}),Object(R.jsx)("h1",{className:"twind-text-4xl twind-font-semibold twind-mb-6 twind-mt-10",children:"Something is broken."}),Object(R.jsx)("p",{className:"twind-text-gray twind-mb-4",children:"Finally we have something to fix"}),e&&Object(R.jsx)("code",{className:"twind-p-4 twind-border-special-inactive twind-border twind-block twind-text-special-inactive twind-text-xs twind-mb-4",children:e}),Object(R.jsx)(U,{variant:"outlined",color:"dark",className:"twind-mt-10",onClick:n,children:"Try again"}),Object(R.jsx)("p",{className:"twind-text-xs twind-text-gray twind-mt-2",children:"(that probably wont help)"})]})}var In=[],Sn=[];function An(){var t=E(),e=Object(r.useState)([]),n=Object(m.a)(e,2),a=n[0],i=n[1],s=gn({near:t}),c=Nn({near:t,accountSWR:s}),d=function(e){return e.owner_id!==t.near.accountId},o=c.data,l=o?o.inputs:In,u=o?o.outputs:Sn,j=Object(r.useMemo)((function(){return l.concat(u)}),[l,u]),w=s.error||c.error;return Object(R.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(R.jsxs)("div",{className:"twind-flex twind-mb-12",children:[Object(R.jsx)("h1",{className:"twind-text-3xl ",children:"All Streams"}),Object(R.jsx)("div",{className:"twind-flex-grow"}),Object(R.jsx)(qe,{variant:"main",size:"normal",children:"Update streams and withdraw"})]}),Object(R.jsx)(xn,{items:j,onFilterDone:i,className:"twind-mb-10 twind-relative twind-z-10"}),w?Object(R.jsx)(_n,{className:"twind-max-w-2xl twind-mx-auto twind-py-32",message:w.message,onRetry:function(){s.mutate(),c.mutate()}}):o?0===j.length?Object(R.jsxs)("div",{className:"twind-flex twind-flex-col twind-w-80 twind-mx-auto",children:[Object(R.jsx)("h3",{className:"twind-text-3xl twind-text-center twind-my-12 ",children:"You dont have any streams yet."}),Object(R.jsx)(U,{variant:"main",link:!0,to:qt,children:"Create First Stream"})]}):0===a.length?Object(R.jsxs)("h3",{className:"twind-text-3xl twind-text-center twind-my-12 twind-w-80 twind-mx-auto",children:["No streams matching your filters. ",Object(R.jsx)("br",{}),"Try selecting different filters!"]}):a.map((function(t){return Object(R.jsx)(Pe,{stream:t,className:"twind-mb-4",direction:d(t)?"in":"out"},t.stream_id)})):Object(R.jsx)("div",{children:"Loading"})]})}function En(t){var e=t.token,n=t.balance,r=t.streamsLength,a=t.period,i=void 0===a?"":a,s=t.showPeriod,c=void 0===s||s,d=t.className,o=(C(e),1);switch(i){case"min":o=60;break;case"hour":o=3600;break;case"day":o=86400}return n=x.utils.format.formatNearAmount(n),n*=o,Object(R.jsx)("div",{className:F()("twind-w-full twind-h-24 twind-rounded-lg twind-bg-input twind-flex twind-items-center twind-width-full twind-p-6",d),children:Object(R.jsxs)("div",{className:"twind-w-full twind-flex twind-items-center",children:[Object(R.jsx)("div",{className:"twind-w-12 twind-mr-12",children:Object(R.jsx)("span",{className:"twind-flex-shrink-0 twind-rounded-full twind-bg-card2 twind-inline-flex twind-items-center twind-justify-center twind-w-12 twind-h-12",children:xt(e)})}),Object(R.jsxs)("div",{className:"",children:[Object(R.jsxs)("div",{className:"twind-font-bold",children:[y[e].name,", ",e]}),r>0?Object(R.jsxs)("div",{className:"twind-text-gray twind-text-sm",children:["from ",r," steams"]}):""]}),Object(R.jsxs)("div",{className:"twind-ml-auto",children:[Object(R.jsx)("span",{className:" twind-text-3xl",children:n<.001?"<0.001":k()(n).format({mantissa:3})}),c?Object(R.jsx)("span",{children:""!==i?"/"+i:""}):""]})]})})}var Tn={sec:"/sec",min:"/min",hour:"/hour",day:"/day"};function Dn(t){var e=t.account,n=t.header,a=t.icon,i=t.tokensField,s=t.streamsType,c=(t.period,t.showPeriod),d=void 0===c||c,o=t.className,l=E(),u=Nn({near:l,accountSWR:gn({near:l})}).data,j=[];"inputs"===s?j=u?u.inputs:[]:"outputs"===s&&(j=u?u.outputs:[]);var w={};void 0!==j&&(w=j.reduce((function(t,e){var n=t[e.token_name]||[];return n.push(e),t[e.token_name]=n,t}),{})),console.log("AccountColumn",{streamsType:s,tokensField:i,streams:j,allStreams:u,streamGroups:w});var b=void 0!==e?e[i]:[],x=sn({options:Tn}),p=Object(r.useState)(!1),h=Object(m.a)(p,2),f=h[0],O=h[1],v=x.option;return Object(R.jsxs)("div",{className:o,children:[Object(R.jsxs)("h2",{className:"twind-text-xl twind-mb-6 twind-flex twind-items-center",children:[Object(R.jsx)("span",{className:"twind-mr-3",children:a}),n,Object(R.jsx)("span",{className:"twind-ml-2",children:d?Object(R.jsxs)("div",{className:"twind-inline-flex twind-items-center twind-relative",children:[Object(R.jsx)(nt,{minimal:!0,rounded:!0,onClick:function(){return O(!f)},children:x.options[v]}),Object(R.jsx)(Q,{opened:f,className:"twind-right-0",children:x.optionsArray.map((function(t,e){return Object(R.jsx)($,{children:Object(R.jsx)(rt,{label:t,active:v===t,value:t,onChange:x.selectOption})},e)}))})]}):""})]}),Object(R.jsx)("div",{children:b.map((function(t){return Object(R.jsx)(En,{token:t[0],balance:t[1],streamsLength:w[t[0]]?w[t[0]].length:0,period:v,showPeriod:d,className:"twind-mb-4"})}))})]})}var Mn=n(382),Fn=[],Rn=[];function Ln(){var t=E(),e=gn({near:t});function n(){return(n=Object(w.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t.contractApi.startCron();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var r=e.data,a=r&&r.inputs||Fn,i=r&&r.outputs||Rn;console.log("ACCOUNT",r),console.log("INPUTS",a),console.log("OUTPUTS",i);var s=e.error;return Object(R.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(R.jsxs)("div",{className:"twind-flex twind-justify-between twind-items-center twind-mb-10",children:[Object(R.jsx)("h1",{className:"twind-text-3xl",children:"My Account"}),Object(R.jsxs)("div",{className:"twind-flex twind-items-center",children:[Object(R.jsxs)("div",{className:"twind-mr-12 twind-text-gray twind-flex twind-items-center",children:[Object(R.jsx)("span",{className:"twind-mr-2",children:Object(R.jsx)(Et,{})}),void 0!==r?Object(R.jsxs)("span",{children:["Last updated\xa0",Object(Mn.a)(new Date(r.last_action/1e3/1e3),new Date,{addSuffix:!0})]}):""]}),Object(R.jsx)("div",{children:Object(R.jsxs)(U,{variant:"main",size:"normal",className:"twind-p-0",onClick:function(t){return function(t){return n.apply(this,arguments)}(t)},children:[Object(R.jsx)("span",{className:"twind-mr-2",children:Object(R.jsx)(Tt,{})}),"Subscribe to CRON"]})})]})]}),s?Object(R.jsx)(_n,{className:"twind-max-w-2xl twind-mx-auto twind-py-32",message:s.message,messaonClick:e.mutate}):Object(R.jsxs)("div",{className:"twind-grid twind-grid-cols-3 twind-gap-4",children:[Object(R.jsx)(Dn,{icon:Object(R.jsx)(_t,{}),header:"Receiving",account:r,tokensField:"total_incoming",streamsType:"inputs",period:"sec"},"AccountInputs"),Object(R.jsx)(Dn,{icon:Object(R.jsx)(It,{}),header:"Sending",account:r,tokensField:"total_outgoing",streamsType:"outputs",period:"sec"},"AccountOutputs"),Object(R.jsx)(Dn,{icon:Object(R.jsx)(At,{}),header:"Withdrawn",account:r,tokensField:"total_received",showPeriod:!1},"AccountWithdrawn")]})]})}function Pn(){return Object(R.jsx)("div",{className:"twind-flex twind-h-screen twind-mx-3",children:Object(R.jsx)("div",{className:"lg:twind-m-auto twind-mx-auto twind-my-auto lg:twind-w-2/5 twind-bg-gray-90 twind-rounded-3xl twind-p-5",style:{"background-color":"#0D0B26"},children:Object(R.jsxs)("div",{className:"twind-my-24 twind-text-center",children:[Object(R.jsxs)("h1",{className:"twind-text-3xl twind-mb-4 twind-font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(R.jsx)("p",{className:"twind-text-gray",children:"Click button below to login or create new account"}),Object(R.jsx)(zt,{variant:"main",className:"twind-mt-10 twind-rounded-lg twind-py-4 twind-px-8"})]})})})}var Vn=["to","className"],Wn=["className","link"];function Un(t){var e=t.to,n=t.className,r=Object(d.a)(t,Vn);return Object(R.jsxs)(l.b,Object(c.a)(Object(c.a)({to:e,className:F()("twind-group twind-flex twind-items-center",n)},r),{},{children:[Object(R.jsx)("div",{className:"twind-flex twind-items-center twind-justify-center twind-h-11 twind-w-11 twind-rounded-full twind-border-border twind-border group-hover:twind-bg-border twind-mr-4",children:Object(R.jsx)(Vt,{})}),Object(R.jsxs)("span",{className:"twind-uppercase twind-text-gray twind-text-xs",children:[" ","Back"," "]})]}))}function Bn(t){var e=t.className,n=t.link,r=Object(d.a)(t,Wn);return Object(R.jsxs)("div",Object(c.a)(Object(c.a)({className:e},r),{},{children:[Object(R.jsx)("div",{className:"twind-mb-4 twind-text-gray twind-text-center",children:"Public link to view the stream:"}),Object(R.jsxs)("div",{className:"twind-border twind-border-border twind-bg-input twind-py-4 twind-px-5 twind-rounded-2xl twind-flex twind-items-center",children:[Object(R.jsx)("div",{className:"twind-break-all twind-select-all",children:n}),Object(R.jsx)("div",{className:"twind-w-px twind-bg-border twind-mx-6 twind-self-stretch twind-flex-shrink-0"}),Object(R.jsxs)("button",{className:"twind-whitespace-nowrap twind-text-blue twind-py-2 twind-px-3 twind-font-semibold twind-text-sm twind-inline-flex twind-bg-transparent hover:twind-bg-hover active:twind-bg-input twind-rounded-lg twind-transition",onClick:function(){return ee()(n)},variant:"filled",children:[Object(R.jsx)(Pt,{className:"twind-mr-2"}),"Copy Link"]})]})]}))}function Hn(){var t=E(),e=Object(o.g)(),n=gn({near:t}),a=function(t,e){var n=t.streamId,r=e.near,a=e.accountSWR.data;return Object(b.a)((function(){return!!a&&["stream",n,a.id,a.last_action]}),Object(w.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pn({streamId:n},{near:r});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),{errorRetryInterval:2e3,errorRetryCount:3})}({streamId:e.id},{near:t,accountSWR:n}),i=function(t,e){var n=t.pageSize,a=void 0===n?3:n,i=e.near,s=e.accountSWR,c=e.streamSWR,d=a,o=s.data,l=c.data,u=l?l.stream_id:null,x=Object(r.useState)(0),p=Object(m.a)(x,2),h=p[0],f=p[1],O=l?Math.ceil(l.history_len/d)-1:0,v=h>1,g=Object(b.a)((function(){return!!l&&["stream_history",l.stream_id,o.last_action,h]}),Object(w.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fn({streamId:u,from:h*d,to:(h+1)*d},{near:i});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),{onError:function(t,e){console.log("useSingleStreamHistory error",t)}});return Object(b.a)((function(){return!!l&&["stream_history",l.stream_id,o.last_action,h+1]}),Object(w.a)(j.a.mark((function t(){var e,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={streamId:u,from:(h+1)*d,to:(h+2)*d},t.next=3,fn(e,{near:i});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))),{swr:g,canGoBack:v,nextPage:function(){f(h+1)},prevPage:function(){f(h-1)},maxPage:O,currentPage:h}}({pageSize:10},{near:t,accountSWR:n,streamSWR:a}),s=i.swr,c=i.nextPage,d=i.prevPage,l=i.maxPage,u=i.currentPage,x=n.data,p=a.data,h=s.data||[],f=a.error||n.error,O=p&&x;if(f)return Object(R.jsx)(_n,{className:"twind-max-w-2xl twind-mx-auto twind-py-32",message:f.message,onRetry:function(){n.mutate(),a.mutate()}});return Object(R.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(R.jsx)("div",{className:"twind-mb-10",children:Object(R.jsx)(Un,{to:Zt})}),O?function(){var t=Me(p).link;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("div",{className:"twind-flex twind-flex-col lg:twind-flex-row twind-justify-between",children:[Object(R.jsxs)("div",{className:"twind-flex twind-flex-col twind-items-center twind-flex-grow",children:[Object(R.jsx)(Xe,{stream:p,account:x}),Object(R.jsx)(Bn,{link:t,className:"twind-max-w-xl twind-w-full twind-mt-28"})]}),Object(R.jsx)(Ye,{className:"twind-mt-10 twind-w-full lg:twind-mt-0 lg:twind-w-1/3 twind-self-start",stream:p,account:x})]}),Object(R.jsx)(an,{pageSize:10,loading:!s.data,stream:p,history:h,className:"twind-mx-auto twind-max-w-6xl twind-my-24 twind-w-full",onPrevPageClick:d,onNextPageClick:c,maxPage:l,currentPage:u})]})}():Object(R.jsx)("div",{className:"twind-py-32 twind-text-center twind-text-gray twind-text-2xl",children:"Loading..."})]})}var zn=["children","allowed","redirect"];function Yn(t){var e=t.children,n=t.allowed,r=t.redirect,a=Object(d.a)(t,zn);return Object(R.jsx)(o.b,Object(c.a)(Object(c.a)({},a),{},{render:function(t){t.location;return n?e:r}}))}var Zn=function(){var t=function(){var t=a.a.useRef(null),e=Object(r.useState)(!1),n=Object(m.a)(e,2),i=n[0],s=n[1],d=Object(r.useState)({keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}),o=Object(m.a)(d,2),l=o[0],u=o[1],b={signedIn:!!l.accountId,signedAccountId:l.accountId};function x(){return(x=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,l.walletConnection.requestSignIn(v.contractName,"Streaming Xyiming");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){l.walletConnection.signOut(),u(Object(c.a)(Object(c.a)({},l),{},{accountId:null}))}function h(){return(h=Object(w.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),t.next=3,p();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){var e=Object(w.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:n=e.sent,t.current=f(n),u(n),s(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),{auth:b,near:l,contractApi:t.current,inited:i,login:function(){return x.apply(this,arguments)},logout:p,refreshAllowance:function(){return h.apply(this,arguments)}}}();return Object(R.jsx)(_.Provider,{value:t,children:Object(R.jsx)("div",{className:"twind-bg-dark twind-text-white",children:t.inited?Object(R.jsxs)(l.a,{basename:"",children:[Object(R.jsx)($t,{}),Object(R.jsxs)(o.d,{children:[Object(R.jsx)(Yn,{exact:!0,redirect:Object(R.jsx)(o.a,{to:"/"}),allowed:!t.auth.signedIn,path:"/authorize",children:Object(R.jsx)(Pn,{})}),Object(R.jsx)(Yn,{exact:!0,redirect:Object(R.jsx)(o.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/",children:Object(R.jsx)(Ht,{})}),Object(R.jsx)(Yn,{exact:!0,redirect:Object(R.jsx)(o.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/account",children:Object(R.jsx)(Ln,{})}),Object(R.jsx)(o.b,{exact:!0,path:"/my_streams/:id",children:Object(R.jsx)(Hn,{})}),Object(R.jsx)(Yn,{exact:!0,redirect:Object(R.jsx)(o.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/my_streams",children:Object(R.jsx)(An,{})})]})]}):null})})},qn=(n(377),document.getElementById("root"));Ne.a.setAppElement(qn),s.a.render(Object(R.jsx)(Zn,{}),qn)}},[[378,1,2]]]);
//# sourceMappingURL=main.d3936663.chunk.js.map
{"version":3,"sources":["images/logo.png","components/Helpers.js","pages/Send.js","pages/Receive.js","App.js","index.js"],"names":["fromNear","s","parseFloat","SendPage","props","profileId","signedAccountId","useState","showButtons","setShowButtons","e","output","a","preventDefault","console","log","_near","contract","pause_stream","stream_id","res","restart_stream","stop_stream","ownerId","document","getElementById","value","receiverId","deposit","String","parseInt","speed","create_stream","description","owner_id","receiver_id","token_name","tokens_per_tick","fetchAccount","get_account","account_id","account","useSWR","errorRetryInterval","data","outputs","connected","map","id","className","style","width","margin","backgroundColor","substr","balance","toFixed","tokens_available","tokens_transferred","status","disabled","signedIn","onClick","pauseStreamClick","restartStreamClick","stopStreamClick","onSubmit","createStreamClick","htmlFor","placeholder","color","describedby","role","ReceivePage","input","withdraw","inputs","withdrawStreamClick","NearConfig","window","location","hostname","accountSuffix","networkId","nodeUrl","contractName","walletUrl","App","state","config","_initNear","then","setState","accountId","keyStore","nearAPI","BrowserLocalStorageKeyStore","Object","assign","deps","near","this","walletConnection","getAccountId","viewMethods","changeMethods","logOut","signOut","_accountId","refreshAllowance","alert","requestSignIn","passProps","header","basename","process","to","title","src","Logo","alt","opacity","type","exact","path","Send","Receive","React","Component","ReactDOM","render"],"mappings":"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","file":"static/js/main.5fa9bb3e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.fd13f323.png\";","import React from 'react'\n\nconst NEAR = '\\u24C3\\u202F'\n\nconst fromNear = (s) => parseFloat(s) / 1e24 || 0\n\nfunction loader () {\n  return (\n  // key='1' is needed by InfiniteScroll\n    <div className='d-flex justify-content-center' key='1'>\n      <div className='spinner-grow' role='status'>\n        <span className='visually-hidden'>Loading...</span>\n      </div>\n    </div>\n  )\n}\n\nexport { NEAR, fromNear, loader }\n","import React, { useState } from 'react'\nimport useSWR from 'swr'\n\nimport { NEAR, fromNear, loader } from '../components/Helpers'\n\nfunction SendPage (props) {\n  const profileId = props.signedAccountId\n  const [showButtons, setShowButtons] = useState(true)\n\n  async function pauseStreamClick (e, output) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('pausing', output)\n    const res = await props._near.contract.pause_stream({ stream_id: output.stream_id }, '200000000000000', 1)\n    console.log('pausing res', res)\n  }\n\n  async function restartStreamClick (e, output) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('restarting', output)\n    const res = await props._near.contract.restart_stream({ stream_id: output.stream_id }, '200000000000000', 1)\n    console.log('restarting res', res)\n  }\n\n  async function stopStreamClick (e, output) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('stopping', output)\n    const res = await props._near.contract.stop_stream({ stream_id: output.stream_id }, '200000000000000', 1)\n    console.log('stopping res', res)\n  }\n\n  async function createStreamClick (e) {\n    e.preventDefault()\n    setShowButtons(false)\n    const ownerId = document.getElementById('ownerInput').value\n    const receiverId = document.getElementById('receiverInput').value\n    // TODO\n    const deposit = String(parseInt((parseFloat(document.getElementById('depositInput').value) + 1e-1) * 1e9)) + '000000000000000'\n    const speed = String(parseInt((parseFloat(document.getElementById('speedInput').value) + 0) * 1e9)) + '000000'\n    const res = await props._near.contract.create_stream({ description: 'blabla', owner_id: ownerId, receiver_id: receiverId, token_name: 'NEAR', tokens_per_tick: speed }, '200000000000000', deposit)\n    console.log('create res', res)\n  }\n\n  const fetchAccount = async (...args) => {\n    try {\n      if (!profileId) {\n        return []\n      }\n      return await props._near.contract.get_account({ account_id: profileId })\n    } catch (e) {\n      console.log('near error', e)\n    }\n    return []\n  }\n\n  const { data: account } = useSWR(['account', profileId], fetchAccount, { errorRetryInterval: 250 })\n  let outputs = (account && account.outputs) ? account.outputs : []\n\n  if (props.connected && account) {\n    console.log('account', account)\n    outputs = outputs.map((output, id) => {\n      return (\n        <div className='card' style={{ width: '90%', margin: '15px', backgroundColor: '#141414' }} key={id}>\n          <div className='card-body'>\n            <div className='d-flex flex-row justify-content-between w-100'>\n              <div className='col-2 m-1'>\n                {output.receiver_id}\n              </div>\n              <small className='col-1 m-1'>\n                <small><samp className='text-secondary'>{output.stream_id.substr(0, 6)}...</samp></small>\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(output.balance).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {output.token_name}\n              </small>\n              <small className='col-1 m-1'>\n                {(fromNear(output.tokens_per_tick) * 1e9).toFixed(2)} {output.token_name}/s\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(output.tokens_available).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(output.tokens_transferred).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {output.status}\n              </small>\n              <div className='col-2 m-1'>\n                {props.connected && showButtons && (output.status === 'ACTIVE' || output.status === 'PAUSED') ? (\n                  <div className='d-flex flex-row'>\n                    <div>\n                      {output.status === 'ACTIVE' ? (\n                        <button disabled={!props.signedIn} className='btn btn-warning btn-sm m-1' onClick={(e) => pauseStreamClick(e, output)}>Pause</button>\n                      ) : (\n                        <button disabled={!props.signedIn} className='btn btn-warning btn-sm m-1' onClick={(e) => restartStreamClick(e, output)}>Restart</button>\n                      )}\n                    </div>\n                    <button disabled={!props.signedIn} className='btn btn-danger btn-sm m-1' onClick={(e) => stopStreamClick(e, output)}>Stop</button>\n                  </div>\n                ) : (\n                  <div />)}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    })\n  }\n\n  console.log(props)\n\n  return (!props.connected) ? (<div className='container g-0 px-5'>Please connect your NEAR Account first</div>) : (\n    <div className='container g-0 px-5'>\n      <div className='card' style={{ width: '90%', margin: '15px', backgroundColor: '#141414' }}>\n        <div className='card-body'>\n          <h5 className='card-title'>Create a stream</h5>\n          <h6 className='card-subtitle mb-3 text-muted'>Stream your tokens to the receiver directly</h6>\n          <form onSubmit={(e) => createStreamClick(e)}>\n            <div className='form-group mb-2'>\n              <label htmlFor='ownerInput' className='mb-2'>Owner</label>\n              <input className='form-control' id='ownerInput' placeholder={props.signedAccountId} style={{ backgroundColor: '#101010', color: '#e0e0e0' }} />\n            </div>\n            <div className='form-group mb-2'>\n              <label htmlFor='receiverInput' className='mb-2'>Receiver</label>\n              <input className='form-control' id='receiverInput' placeholder='root.near' style={{ backgroundColor: '#101010', color: '#e0e0e0' }} />\n            </div>\n            <label htmlFor='depositInput' className='mb-2'>Initial deposit</label>\n            <div className='input-group mb-2'>\n              <div className='input-group-prepend'>\n                <span className='input-group-text' id='basic-addon1' style={{ backgroundColor: '#303030', color: '#e0e0e0' }}>{NEAR}</span>\n              </div>\n              <input className='form-control' id='depositInput' placeholder='15.70' describedby='basic-addon1' style={{ backgroundColor: '#101010', color: '#e0e0e0' }} />\n            </div>\n            <label htmlFor='speedInput' className='mb-2'>Streaming speed, tokens per second</label>\n            <div className='input-group mb-2'>\n              <div className='input-group-prepend'>\n                <span className='input-group-text' id='basic-addon2' style={{ backgroundColor: '#303030', color: '#e0e0e0' }}>{NEAR}</span>\n              </div>\n              <input className='form-control' id='speedInput' placeholder='0.03' describedby='basic-addon2' style={{ backgroundColor: '#101010', color: '#e0e0e0' }} />\n            </div>\n\n            {props.connected && showButtons ? (\n              <button disabled={!props.signedIn} className='btn btn-primary mt-4'>Create a stream</button>\n            ) : (\n              <div className='mt-4'>{loader()}</div>)}\n          </form>\n        </div>\n      </div>\n      <h4>Streams owned by you</h4>\n      <div className='card' style={{ width: '90%', margin: '15px', backgroundColor: '#181818' }}>\n        <div className='card-body'>\n          <div className='d-flex flex-row justify-content-between w-100'>\n            <div className='col-2 m-1'>\n            Receiver\n            </div>\n            <div className='col-1 m-1'>\n            Stream ID\n            </div>\n            <div className='col-1 m-1'>\n            Tokens left\n            </div>\n            <div className='col-1 m-1'>\n            Token name\n            </div>\n            <div className='col-1 m-1'>\n            Stream speed\n            </div>\n            <div className='col-1 m-1'>\n            Tokens unlocked\n            </div>\n            <div className='col-1 m-1'>\n            Tokens transferred\n            </div>\n            <div className='col-1 m-1'>\n            Stream status\n            </div>\n            <div className='col-2 m-1' />\n          </div>\n        </div>\n      </div>\n      {outputs}\n    </div>\n  )\n}\n\nexport default SendPage\n","import React, { useState } from 'react'\nimport useSWR from 'swr'\n\nimport { fromNear, loader } from '../components/Helpers'\n\nfunction ReceivePage (props) {\n  const profileId = props.signedAccountId\n  const [showButtons, setShowButtons] = useState(true)\n\n  async function pauseStreamClick (e, output) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('pausing', output)\n    const res = await props._near.contract.pause_stream({ stream_id: output.stream_id }, '200000000000000', 1)\n    console.log('pausing res', res)\n  }\n\n  async function withdrawStreamClick (e, input) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('withdraw', input)\n    const res = await props._near.contract.withdraw({ stream_id: input.stream_id }, '200000000000000', 0)\n    console.log('withdraw res', res)\n    // TODO update the page instantly\n    setShowButtons(true)\n  }\n\n  async function stopStreamClick (e, input) {\n    e.preventDefault()\n    setShowButtons(false)\n    console.log('stopping', input)\n    const res = await props._near.contract.stop_stream({ stream_id: input.stream_id }, '200000000000000', 1)\n    console.log('stopping res', res)\n  }\n\n  const fetchAccount = async (...args) => {\n    try {\n      if (!profileId) {\n        return []\n      }\n      return await props._near.contract.get_account({ account_id: profileId })\n    } catch (e) {\n      console.log('near error', e)\n    }\n    return []\n  }\n\n  const { data: account } = useSWR(['account', profileId], fetchAccount, { errorRetryInterval: 250 })\n  let inputs = (account && account.inputs) ? account.inputs : []\n\n  if (props.connected && account) {\n    console.log('account', account)\n    inputs = inputs.map((input, id) => {\n      return (\n        <div className='card' style={{ width: '90%', margin: '15px', backgroundColor: '#141414' }} key={id}>\n          <div className='card-body'>\n            <div className='d-flex flex-row justify-content-between w-100'>\n              <div className='col-2 m-1'>\n                {input.owner_id}\n              </div>\n              <small className='col-1 m-1'>\n                <small><samp className='text-secondary'>{input.stream_id.substr(0, 6)}...</samp></small>\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(input.balance).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {input.token_name}\n              </small>\n              <small className='col-1 m-1'>\n                {(fromNear(input.tokens_per_tick) * 1e9).toFixed(2)} {input.token_name}/s\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(input.tokens_available).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {fromNear(input.tokens_transferred).toFixed(2)}\n              </small>\n              <small className='col-1 m-1'>\n                {input.status}\n              </small>\n              <div className='col-2 m-1'>\n                {props.connected && showButtons && input.status === 'ACTIVE' ? (\n                  <div className='d-flex flex-row'>\n                    <button disabled={!props.signedIn} className='btn btn-success btn-sm m-1' onClick={(e) => withdrawStreamClick(e, input)}>Withdraw</button>\n                    <button disabled={!props.signedIn} className='btn btn-warning btn-sm m-1' onClick={(e) => pauseStreamClick(e, input)}>Pause</button>\n                    <button disabled={!props.signedIn} className='btn btn-danger btn-sm m-1' onClick={(e) => stopStreamClick(e, input)}>Stop</button>\n                  </div>\n                ) : (\n                  <div />)}\n              </div>\n            </div>\n          </div>\n        </div>\n      )\n    })\n  }\n\n  console.log(props)\n\n  return (!props.connected) ? (<div className='container g-0 px-5'>Please connect your NEAR Account first</div>) : (\n    <div className='container g-0 px-5'>\n      <h4>Your receiving streams</h4>\n      <div className='card' style={{ width: '90%', margin: '15px', backgroundColor: '#181818' }}>\n        <div className='card-body'>\n          <div className='d-flex flex-row justify-content-between w-100'>\n            <div className='col-2 m-1'>\n            From owner\n            </div>\n            <div className='col-1 m-1'>\n            Stream ID\n            </div>\n            <div className='col-1 m-1'>\n            Tokens left\n            </div>\n            <div className='col-1 m-1'>\n            Token name\n            </div>\n            <div className='col-1 m-1'>\n            Stream speed\n            </div>\n            <div className='col-1 m-1'>\n            Tokens unlocked\n            </div>\n            <div className='col-1 m-1'>\n            Tokens transferred\n            </div>\n            <div className='col-1 m-1'>\n            Stream status\n            </div>\n            <div className='col-2 m-1' />\n          </div>\n        </div>\n      </div>\n      {inputs}\n    </div>\n  )\n}\n\nexport default ReceivePage\n","import React from 'react'\nimport 'error-polyfill'\nimport 'bootstrap/dist/js/bootstrap.bundle'\nimport 'bootstrap/dist/css/bootstrap.min.css'\nimport './App.scss'\nimport * as nearAPI from 'near-api-js'\nimport Logo from './images/logo.png'\nimport { HashRouter as Router, Link, Route, Switch } from 'react-router-dom'\nimport SendPage from './pages/Send'\nimport ReceivePage from './pages/Receive'\n\nconst IsMainnet = window.location.hostname === '(xyiming)' // TODO\nconst TestNearConfig = {\n  accountSuffix: 'testnet',\n  networkId: 'testnet',\n  nodeUrl: 'https://rpc.testnet.near.org',\n  contractName: 'dev-1630685656410-62108694435619',\n  walletUrl: 'https://wallet.testnet.near.org'\n}\nconst MainNearConfig = {\n  accountSuffix: 'near',\n  networkId: 'mainnet',\n  nodeUrl: 'https://rpc.mainnet.near.org',\n  contractName: 'dev-1630411495814-97749356114440',\n  walletUrl: 'https://wallet.near.org'\n}\n\nconst NearConfig = IsMainnet ? MainNearConfig : TestNearConfig\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this._near = {}\n\n    this.state = {\n      connected: false,\n      account: null\n    }\n\n    this._near.config = NearConfig\n\n    this._initNear().then(() => {\n      this.setState({\n        signedIn: !!this._near.accountId,\n        signedAccountId: this._near.accountId,\n        connected: true\n      })\n    })\n  }\n\n  async _initNear () {\n    const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore()\n    const near = await nearAPI.connect(Object.assign({ deps: { keyStore } }, NearConfig))\n    this._near.keyStore = keyStore\n    this._near.near = near\n\n    this._near.walletConnection = new nearAPI.WalletConnection(near, NearConfig.contractName)\n    this._near.accountId = this._near.walletConnection.getAccountId()\n\n    this._near.account = this._near.walletConnection.account()\n    this._near.contract = new nearAPI.Contract(this._near.account, NearConfig.contractName, {\n      viewMethods: [\n        'get_account',\n        'get_stream'\n      ],\n      changeMethods: [\n        'create_stream',\n        'deposit',\n        'withdraw',\n        'pause_stream',\n        'restart_stream',\n        'create_bridge',\n        'delete_bridge',\n        'push_flow',\n        'stop_stream'\n      ]\n    })\n\n    this._near.logOut = () => {\n      this._near.walletConnection.signOut()\n      this._near.accountId = null\n      this.setState({\n        signedIn: !!this._accountId,\n        signedAccountId: this._accountId\n      })\n    }\n\n    this._near.refreshAllowance = async () => {\n      alert(\"You're out of access key allowance. Need sign in again to refresh it\")\n      await this.logOut()\n      await this.requestSignIn()\n    }\n  }\n\n  async requestSignIn (e) {\n    e && e.preventDefault()\n    const appTitle = 'Streaming Xyiming'\n    await this._near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle\n    )\n    return false\n  }\n\n  render () {\n    const passProps = {\n      _near: this._near,\n      refreshAllowance: () => this._near.refreshAllowance(),\n      ...this.state\n    }\n    const header = !this.state.connected ? (\n      <div>Connecting... <span className='spinner-grow spinner-grow-sm' role='status' aria-hidden='true' /></div>\n    ) : (this.state.signedIn ? (\n      <div>\n        <button\n          className='btn btn-outline-secondary'\n          onClick={() => this._near.logOut()}\n        >Sign out ({this.state.signedAccountId})\n        </button>\n      </div>\n    ) : (\n      <div>\n        <button\n          className='btn btn-primary'\n          onClick={(e) => this.requestSignIn(e)}\n        >Sign in with NEAR Wallet\n        </button>\n      </div>\n    ))\n\n    return (\n      <div className='App text-white' style={{ backgroundColor: '#1E1E1E' }}>\n        <Router basename={process.env.PUBLIC_URL}>\n          <nav className='navbar navbar-expand-lg navbar-dark mb-3' style={{ backgroundColor: '#2F2F2F' }}>\n            <div className='container-fluid'>\n              <Link className='navbar-brand' to='/' title='Xyiming'>\n                <img src={Logo} alt='Xyiming' className='d-inline-block align-middle mx-3' style={{ opacity: 0.65 }} />\n                Streaming Xyiming\n              </Link>\n              <button\n                className='navbar-toggler' type='button' data-bs-toggle='collapse'\n                data-bs-target='#navbarSupportedContent' aria-controls='navbarSupportedContent'\n                aria-expanded='false' aria-label='Toggle navigation'\n              >\n                <span className='navbar-toggler-icon' />\n              </button>\n              <div className='collapse navbar-collapse' id='navbarSupportedContent'>\n                <ul className='navbar-nav me-auto mb-2 mb-lg-0'>\n                  <li className='nav-item'>\n                    <Link className='nav-link' aria-current='page' to='/'>Send</Link>\n                  </li>\n                  <li className='nav-item'>\n                    <Link className='nav-link' aria-current='page' to='/receive'>Receive</Link>\n                  </li>\n                </ul>\n                <form className='d-flex'>\n                  {header}\n                </form>\n              </div>\n            </div>\n          </nav>\n\n          <Switch>\n            <Route exact path='/'>\n              <SendPage {...passProps} />\n            </Route>\n            <Route exact path='/receive'>\n              <ReceivePage {...passProps} />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{145:function(t,e,n){},148:function(t,e,n){},153:function(t,e,n){},156:function(t,e){},161:function(t,e){},177:function(t,e){},179:function(t,e){},211:function(t,e,n){},212:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),a=n(72),c=n.n(a),s=n(4),o=n(10),d=(n(75),n(134),n(144),n(145),n(11)),l=n(32),u=n(2),j=n.n(u),b=n(7),w=n(9),m=n(24),p=n(0);var h=n(6),x=n.n(h),f=(n(148),["icon","children","className","link","size","loading","loadingText","color","variant"]),O="main",v="filled",g="outlined";function N(t){var e=t.icon,n=t.children,r=t.className,i=t.link,a=t.size,c=t.loading,d=t.loadingText,u=t.color,j=void 0===u?"light":u,b=t.variant,w=void 0===b?"outlined":b,m=Object(o.a)(t,f),h="",N="",k="";w===O?(h="Button--main",N="normal"===a?"twind-px-5 twind-py-4  twind-rounded-2xl twind-font-semibold":"big"===a?"twind-px-12 twind-py-6 twind-rounded-3xl twind-font-bold":""):w===g?(h="twind-border-solid twind-border twind-font-semibold twind-rounded-lg",k="light"===j?"twind-border-blue hover:twind-bg-blue":"dark"===j?"twind-border-border hover:twind-bg-hover hover:twind-border-hover":""):w===v&&(h="twind-bg-dark hover:twind-bg-hover twind-font-semibold twind-rounded-lg");var y=i?l.b:"button";return Object(p.jsx)(y,Object(s.a)(Object(s.a)({disabled:c,className:x()("twind-inline-flex twind-items-center twind-justify-center twind-p-3  twind-whitespace-nowrap",h,N,k,"twind-transition-all",r)},m),{},{children:c?d:Object(p.jsxs)(p.Fragment,{children:[e?Object(p.jsx)("div",{className:"twind-mr-2",children:e}):null,n]})}))}var k=["icon","children","className","to"];function y(t){var e=t.icon,n=t.children,r=t.className,i=t.to,a=Object(o.a)(t,k),c=Object(d.h)(i),u=c&&c.isExact;return Object(p.jsxs)(l.b,Object(s.a)(Object(s.a)({to:i,className:x()(r,"twind-text-white twind-font-semibold","twind-flex twind-items-center twind-px-5 twind-py-4 twind-rounded-xl ","twind-group twind-cursor-pointer twind-whitespace-nowrap",u?"twind-bg-hover":"","twind-transition-all","hover:twind-bg-hover")},a),{},{children:[Object(p.jsx)("div",{className:x()("group-hover:twind-text-blue",u?"twind-text-blue":""),children:e}),Object(p.jsx)("div",{className:"twind-ml-2",children:n})]}))}n(153);var _=["children","className","error"];function I(t){var e=t.children,n=t.className,r=t.error,i=Object(o.a)(t,_),a=r?"twind-border-red-400":"twind-border-border";return Object(p.jsx)("label",Object(s.a)(Object(s.a)({className:x()("Input twind-font-semibold twind-flex twind-p-4 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",a,n)},i),{},{children:e}))}var C=["children","label","error","className"];function A(t){var e=t.children,n=t.label,r=t.error,i=t.className,a=Object(o.a)(t,C);return Object(p.jsxs)("label",Object(s.a)(Object(s.a)({className:x()("twind-block",i)},a),{},{children:[Object(p.jsx)("div",{className:"twind-mb-1",children:n}),Object(p.jsx)("div",{children:e}),r?Object(p.jsx)("div",{className:"twind-text-red-500 twind-mt-1 twind-text-xs",children:r}):null]}))}var S=function(t){return Object(p.jsx)("svg",Object(s.a)(Object(s.a)({width:"12",height:"7",viewBox:"0 0 12 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(p.jsx)("path",{d:"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731",stroke:"white","stroke-width":"1.5"})}))};function E(t){var e=t.count,n=t.option;return Object(p.jsxs)("span",{children:[n," ",Object(p.jsx)("span",{className:"twind-text-gray twind-font-normal",children:e})]})}function T(t){var e=t.label,n=t.options,i=t.renderOption,a=t.renderActive,c=t.active,s=t.minimal,o=t.onChange,d=t.className,l=Object(r.useState)(!1),u=Object(w.a)(l,2),j=u[0],b=u[1];return Object(p.jsxs)("div",{className:x()("twind-inline-flex twind-items-center twind-relative",d),children:[Object(p.jsx)("div",{className:"twind-text-gray twind-mr-2",children:e}),Object(p.jsx)(U,{minimal:s,rounded:!0,onClick:function(){return b(!j)},children:a?a(c):c}),Object(p.jsx)(M,{opened:j,className:"twind-right-0",children:n.map((function(t,e){return Object(p.jsx)(F,{children:Object(p.jsx)(P,{label:i?i(t,c===t):t,active:c===t,value:t,onChange:o})},e)}))})]})}var D=["children","className"];function M(t){var e=t.opened,n=t.children,r=t.className;return Object(p.jsx)("div",{className:x()(r,"twind-absolute twind-top-full pt-2",e?"twind-flex":"twind-hidden"),children:Object(p.jsx)("div",{className:x()("twind-bg-hover twind-rounded-2xl twind-py-2"),children:n})})}function F(t){var e=t.children,n=t.className,r=Object(o.a)(t,D);return Object(p.jsx)("div",Object(s.a)(Object(s.a)({className:x()("twind-px-3 twind-py-1 twind-font-semibold twind-text-sm hover:twind-font-bold",n)},r),{},{children:e}))}function R(){return Object(p.jsx)("div",{className:"twind-border-dark twind-border-t twind-w-full twind-my-2"})}var L=["opened","className","children","onClick","rounded","minimal"];function U(t){var e=t.opened,n=t.className,r=t.children,i=t.onClick,a=t.rounded,c=t.minimal,d=Object(o.a)(t,L),l=c?"":"twind-px-4 twind-py-3 twind-border twind-border-border twind-w-36 hover:twind-bg-hover hover:twind-border-hover";return Object(p.jsxs)("button",Object(s.a)(Object(s.a)({onClick:i,className:x()("twind-cursor-pointer twind-flex twind-items-center",n,l,a?"twind-rounded-full":"twind-rounded-lg")},d),{},{children:[r,Object(p.jsx)("div",{className:"twind-flex-grow"}),Object(p.jsx)(S,{className:x()("twind-ml-2","twind-transform",e?"twind-rotate-180":"")})]}))}function P(t){var e=t.active,n=t.label,r=t.value,i=t.onChange;return Object(p.jsxs)("label",{className:"twind-inline-flex twind-items-center twind-whitespace-nowrap",children:[Object(p.jsx)("input",{type:"radio",className:"twind-invisible twind-w-0 twind-h-0 twind-absolute",checked:e,onChange:function(){return i(r)}}),Object(p.jsx)("div",{className:x()(e?"twind-border-blue twind-border-4":"twind-border-border twind-border-2","twind-border-full twind-w-3 twind-h-3 twind-rounded-full")}),Object(p.jsx)("div",{className:x()(e?"twind-font-semibold":"","twind-ml-3"),children:n})]})}var B=n(56),V=["progresses","className"],H=["linear-gradient(270deg, #C750FF 0%, #4743FB 100%)","linear-gradient(270deg, #FFCC69 0%, #FF8469 100%)"];function z(t){var e=t.progresses,n=t.className,r=Object(o.a)(t,V),i=Object(B.a)(e);return i.sort((function(t,e){return e-t})),Object(p.jsx)("div",Object(s.a)(Object(s.a)({className:x()("twind-relative twind-h-3 twind-rounded-r-md twind-rounded-l-lg twind-bg-progressBar",n)},r),{},{children:i.map((function(t,e){return Object(p.jsx)("div",{className:"twind-absolute twind-left-0 twind-h-full twind-rounded-lg",style:{width:100*t+"%",background:H[e]}},e)}))}))}function W(t){var e=t.tokenName,n={NEAR:Object(p.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet",children:Object(p.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(p.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})}),fallback:Object(p.jsx)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"20pt",height:"20pt",viewBox:"0 0 864.000000 864.000000",preserveAspectRatio:"xMidYMid meet",children:Object(p.jsx)("g",{transform:"translate(0.000000,864.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none",children:Object(p.jsx)("path",{d:"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z"})})})};return n[e]||n.fallback}var Y=["tokenName","size","className"];function Z(t){var e=t.tokenName,n=t.size,r=void 0===n?8:n,i=t.className;Object(o.a)(t,Y);return Object(p.jsx)("div",{className:x()(" twind-flex-shrink-0 twind-rounded-lg twind-bg-card2 twind-inline-flex twind-items-center twind-justify-center","twind-w-".concat(r," twind-h-").concat(r),i),children:Object(p.jsx)(W,{tokenName:e})})}var q=n(28),X="200000000000000";function G(t){console.log("NearContractApi",t);var e=t.contract,n=function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,e.get_account({account_id:n});case 5:return t.abrupt("return",t.sent);case 8:t.prev=8,t.t0=t.catch(0),console.log("near error",t.t0);case 11:return t.abrupt("return",[]);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();function r(){return(r=Object(b.a)(j.a.mark((function n(){var r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.update_account({account_id:t.account.accountId},X);case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function i(){return(i=Object(b.a)(j.a.mark((function t(n){var r,i,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,i=n.deposit,t.next=3,e.deposit({stream_id:r},X,i);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(){return(a=Object(b.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.pause_stream({stream_id:r},X,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=Object(b.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.start_stream({stream_id:r},X,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(b.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.stop_stream({stream_id:r},X,1);case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(b.a)(j.a.mark((function t(n){var r,i,a,c,s,o,d,l,u;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.deposit,i=n.ownerId,a=n.receiverId,c=n.token,s=n.speed,o=n.description,d=n.autoDepositEnabled,l=void 0!==d&&d,t.next=3,e.create_stream({owner_id:i,receiver_id:a,token_name:c,tokens_per_tick:s,auto_deposit_enabled:l,description:o},X,r);case 3:return u=t.sent,t.abrupt("return",u);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(b.a)(j.a.mark((function t(n){var r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.streamId,t.next=3,e.get_stream({stream_id:r});case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{getCurrentAccount:function(){return n(t.walletConnection.getAccountId())},updateAccount:function(){return r.apply(this,arguments)},getAccount:n,createStream:function(t){return o.apply(this,arguments)},depositStream:function(t){return i.apply(this,arguments)},pauseStream:function(t){return a.apply(this,arguments)},startStream:function(t){return c.apply(this,arguments)},stopStream:function(t){return s.apply(this,arguments)},getStream:function(t){return d.apply(this,arguments)}}}var K={ACCOUNT_SUFFIX:"testnet",NEAR_NETWORK_ID:"testnet",NEAR_NODE_URL:"https://rpc.testnet.near.org",CONTRACT_NAME:"dev-1631015258223-36596603302446",WALLET_URL:"https://wallet.testnet.near.org",FT_CONTRACT_NAME:""},J={accountSuffix:K.NEAR_ACCOUNT_SUFFIX,networkId:K.NEAR_NETWORK_ID,nodeUrl:K.NEAR_NODE_URL,contractName:K.CONTRACT_NAME,walletUrl:K.WALLET_URL,ft:K.FT_CONTRACT_NAME},Q=i.a.createContext({inited:!1,near:{keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null},auth:{signedIn:!1,signedAccountId:null},contractApi:G({}),refreshAllowance:function(){},login:function(){},logout:function(){}});function $(){return tt.apply(this,arguments)}function tt(){return(tt=Object(b.a)(j.a.mark((function t(){var e,n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new q.keyStores.BrowserLocalStorageKeyStore,t.next=3,q.connect(Object.assign({deps:{keyStore:e}},J));case 3:return n=t.sent,(r={keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}).keyStore=e,r.near=n,r.walletConnection=new q.WalletConnection(n,J.contractName),r.accountId=r.walletConnection.getAccountId(),r.account=r.walletConnection.account(),r.contractName=J.contractName,r.contract=new q.Contract(r.account,J.contractName,{viewMethods:["get_account","get_stream"],changeMethods:["create_stream","deposit","update_account","start_stream","pause_stream","stop_stream"]}),r.ft=new q.Contract(r.account,J.ft,{viewMethods:["ft_balance_of"],changeMethods:["ft_transfer","ft_transfer_call"]}),t.abrupt("return",r);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var et=new Error("Near context is not found");function nt(){var t=Object(r.useContext)(Q);if(!!!t)throw et;return t}var rt=n(26),it=n.n(rt),at={NEAR:{decimals:24,name:"Near"},TARAS:{decimals:18,name:"Taras"},fallback:{decimals:18}};function ct(t){var e=at[t]||at.fallback,n=Math.pow(10,6),r=Math.pow(10,9),i=Math.pow(10,e.decimals);return{tokenPerSecondToInt:function(t){return it()(t).multiply(i).divide(r).format({mantissa:0})},toInt:function(t){return it()(t).multiply(i).format({mantissa:0})},amount:function(t){return it()(t).divide(i).format({mantissa:2})},tokensPerMS:function(t){return it()(t).multiply(n).divide(i).format({mantissa:e.decimals-6,trimMantissa:!0})},tokensPerS:function(t){return it()(t).multiply(r).divide(i).format({mantissa:e.decimals-6,trimMantissa:!0})},ticksToMs:function(t){return Math.round(t/n)}}}var st=function(){return Object(p.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{d:"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round"})})},ot=function(){return Object(p.jsxs)("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("circle",{cx:"2.08925",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(p.jsx)("circle",{cx:"11.1691",cy:"2.03994",r:"2.03994",fill:"currentColor"}),Object(p.jsx)("circle",{cx:"2.08925",cy:"11.1198",r:"2.03994",fill:"currentColor"}),Object(p.jsx)("circle",{cx:"11.1691",cy:"11.1198",r:"2.03994",fill:"currentColor"})]})},dt=function(){return Object(p.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("path",{d:"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004",stroke:"#2EDDD9","stroke-width":"2","stroke-linecap":"round"}),Object(p.jsx)("path",{d:"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931",stroke:"#2EDDD9","stroke-width":"2","stroke-linecap":"round"})]})},lt=function(){return Object(p.jsxs)("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(p.jsx)("path",{d:"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523",stroke:"#F56173","stroke-width":"2","stroke-linecap":"round"}),Object(p.jsx)("path",{d:"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931",stroke:"#F56173","stroke-width":"2","stroke-linecap":"round"})]})},ut=function(){return Object(p.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("path",{d:"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})})},jt=function(t){return Object(p.jsx)("svg",Object(s.a)(Object(s.a)({width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(p.jsx)("path",{d:"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})}))},bt=function(t){return Object(p.jsx)("svg",Object(s.a)(Object(s.a)({width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(p.jsx)("path",{d:"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z",fill:"#2EDDD9"})}))},wt=function(t){return Object(p.jsx)("svg",Object(s.a)(Object(s.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:Object(p.jsx)("rect",{x:"0.429626",y:"0.930298",width:"9.58382",height:"9.58382",rx:"2",fill:"#F56173"})}))},mt=function(t){return Object(p.jsxs)("svg",Object(s.a)(Object(s.a)({width:"11",height:"11",viewBox:"0 0 11 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(p.jsx)("path",{d:"M2.42963 2.28638V8.60681",stroke:"#FFAB6A","stroke-width":"3","stroke-linecap":"round"}),Object(p.jsx)("path",{d:"M8.76996 2.28638V8.60681",stroke:"#FFAB6A","stroke-width":"3","stroke-linecap":"round"})]}))},pt=function(t){return Object(p.jsxs)("svg",Object(s.a)(Object(s.a)({width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),{},{children:[Object(p.jsx)("circle",{cx:"14.5566",cy:"14.7314",r:"14.5",fill:"url(#paint0_linear)"}),Object(p.jsx)("path",{d:"M14.7506 10.7635L14.7506 14.7314M14.7506 18.6993L14.7506 14.7314M14.7506 14.7314L18.7185 14.7314M14.7506 14.7314L10.7827 14.7314",stroke:"#1F1D37","stroke-width":"2.5","stroke-linecap":"round"}),Object(p.jsx)("defs",{children:Object(p.jsxs)("linearGradient",{id:"paint0_linear",x1:"-2.34261",y1:"7.84647",x2:"34.6054",y2:"32.139",gradientUnits:"userSpaceOnUse",children:[Object(p.jsx)("stop",{"stop-color":"#FF856A"}),Object(p.jsx)("stop",{offset:"1","stop-color":"#FFCD6A"})]})})]}))};var ht=function(){var t=nt(),e=t.auth.signedAccountId,n=Object(r.useState)(!1),i=Object(w.a)(n,2),a=i[0],c=i[1],s=Object(r.useState)("NEAR"),o=Object(w.a)(s,2),d=o[0],l=o[1],u=Object(r.useState)(0),h=Object(w.a)(u,2),x=h[0],f=h[1],O=Object(r.useState)(0),v=Object(w.a)(O,2),g=v[0],k=v[1],y=Object(r.useState)(0),_=Object(w.a)(y,2),C=_[0],S=_[1],E=Object(r.useState)(0),T=Object(w.a)(E,2),D=T[0],R=T[1],L=Object(r.useState)(),B=Object(w.a)(L,2),V=B[0],H=B[1],z=Object(r.useState)({}),Y=Object(w.a)(z,2),Z=(Y[0],Y[1],Object.keys(at).filter((function(t){return"fallback"!==t})));function q(){return(q=Object(b.a)(j.a.mark((function e(n){var r,i,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=ct(d),i=document.getElementById("ownerInput").value,a=document.getElementById("receiverInput").value,c=D/(3600*x*24+60*g+3600*C),e.next=7,t.contractApi.createStream({deposit:r.toInt(D),description:V,ownerId:i,receiverId:a,token:d,speed:r.tokenPerSecondToInt(c),autoDepositEnabled:!1});case 7:e.sent;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var X=function(){var n=Object(b.a)(j.a.mark((function n(){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return",[]);case 3:return n.next=5,t.near.contract.get_account({account_id:e});case 5:return n.abrupt("return",n.sent);case 8:n.prev=8,n.t0=n.catch(0),console.log("near error",n.t0);case 11:return n.abrupt("return",[]);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(){return n.apply(this,arguments)}}();return Object(m.a)(["account",e],X,{errorRetryInterval:250}).data,Object(p.jsxs)("div",{className:"twind-container twind-m-auto twind-px-5 twind-py-12",children:[Object(p.jsxs)("div",{className:"twind-text-center",children:[Object(p.jsx)("h1",{className:"twind-text-5xl twind-mb-4 twind-text-center",children:"Create a stream"}),Object(p.jsx)("p",{className:"twind-text-gray",children:"Stream your tokens to the receiver directly"})]}),Object(p.jsxs)("form",{className:"twind-max-w-lg twind-mx-auto twind-w-full",onSubmit:function(t){return function(t){return q.apply(this,arguments)}(t)},children:[Object(p.jsx)(A,{label:"Owner:",className:"twind-mb-4",children:Object(p.jsx)(I,{children:Object(p.jsx)("input",{required:!0,placeholder:"owner.near",id:"ownerInput",value:t.near.accountId})})}),Object(p.jsx)(A,{label:"Receiver:",className:"twind-mb-4",children:Object(p.jsx)(I,{children:Object(p.jsx)("input",{required:!0,id:"receiverInput",placeholder:"root.near"})})}),Object(p.jsxs)("div",{className:"twind-flex twind-mb-4",children:[Object(p.jsxs)(A,{label:"Token:",className:"twind-w-1/3 twind-items-center twind-relative",children:[Object(p.jsx)(U,{className:"twind-bg-input focus-within:twind-border-blue hover:twind-border-blue twind-text-xl twind-h-14",onClick:function(){return c(!a)},children:Object(p.jsxs)("div",{className:"twind-inline-flex",children:[Object(p.jsx)(W,{tokenName:d})," ",Object(p.jsx)("span",{children:d})]})}),Object(p.jsx)(M,{opened:a,className:"twind-z-10",children:Z.map((function(t){return Object(p.jsx)(F,{className:"twind-bg-input",children:Object(p.jsx)(P,{label:Object(p.jsxs)("div",{className:"twind-inline-flex",children:[Object(p.jsx)(W,{tokenName:t})," ",Object(p.jsx)("span",{children:t})]}),active:d===t,value:t,onChange:function(t){c(!1),l(t)}})})}))})]}),Object(p.jsx)(A,{label:"Amount to stream:",className:"twind-w-2/3",children:Object(p.jsx)(I,{children:Object(p.jsx)("input",{requried:!0,placeholder:"0.00",id:"depositInput",value:D,onChange:function(t){return R(t.target.value)}})})})]}),Object(p.jsxs)("div",{className:"twind-block twind-mb-4",children:[Object(p.jsxs)("div",{className:"twind-relative",children:[Object(p.jsx)("div",{children:"Stream duration:"}),Object(p.jsxs)("div",{className:"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1",children:["Streaming speed: ",x+g+C===0?0:(D/(3600*x*24+60*g+3600*C)).toFixed(6)," ",d," / sec"]})]}),Object(p.jsxs)("div",{className:"twind-flex",label:"Stream duration",children:[Object(p.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-l-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(p.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"daysInput",placeholder:"0",describedby:"basic-addon2",value:x,onChange:function(t){f(t.target.value)}}),Object(p.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"days"})]}),Object(p.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(p.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"hourseInput",placeholder:"0",describedby:"basic-addon2",value:C,onChange:function(t){return S(t.target.value)}}),Object(p.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"hourse"})]}),Object(p.jsxs)("div",{className:"twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-r-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue",children:[Object(p.jsx)("input",{className:"focus:twind-outline-none input twind-bg-input twind-w-1/3",required:!0,id:"minutesInput",placeholder:"0",describedby:"basic-addon2",value:g,onChange:function(t){return k(t.target.value)}}),Object(p.jsx)("div",{className:"twind-right-2 twind-opacity-100 twind-w-1/3",children:"mins"})]})]})]}),Object(p.jsx)(A,{children:Object(p.jsxs)("label",{className:"twind-block twind-mb-6 twind-relative",children:[Object(p.jsxs)("div",{className:"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1",children:[V&&V.length||0,"/255"]}),Object(p.jsx)("div",{className:"twind-mb-1",children:"Comment:"}),Object(p.jsx)("div",{children:Object(p.jsx)("label",{className:"twind-h-40 Input twind-font-semibold twind-flex twind-p-4 twind-pt-0 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue twind-border-border",children:Object(p.jsx)("textarea",{id:"commentInput",className:" twind-bg-input  twind-w-full twind-h-full twind-pt-2 focus:twind-outline-none twind-resize-none",placeholder:"Enter comment",maxlength:"255",value:V,onChange:function(t){H(t.target.value)}})})})]})}),Object(p.jsxs)("div",{className:"twind-flex twind-relaitive",children:[Object(p.jsx)("div",{children:Object(p.jsx)("p",{className:"twind-text-left twind-text-gray twind-w-2/3 twind-text-sm",children:"You will be charged 0.1 NEAR fee for that stream"})}),Object(p.jsx)(N,{variant:"main",className:"twind-mx-auto twind-right-0",children:"Create Stream"})]})]})]})};function xt(t){var e=function(){var t=nt();function e(){return(e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.preventDefault(),e.next=3,t.login();case 3:return e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.logout();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{accountId:t.auth.signedAccountId,signedIn:t.auth.signedIn,inited:t.inited,login:function(t){return e.apply(this,arguments)},logout:function(t){return n.apply(this,arguments)}}}(),n=e.inited,r=e.logout,i=e.login,a=e.accountId,c=e.signedIn;return n?c?Object(p.jsxs)(N,Object(s.a)(Object(s.a)({onClick:r},t),{},{children:["Sign out (",a,")"]})):Object(p.jsx)(N,Object(s.a)(Object(s.a)({onClick:i},t),{},{children:"Sign in with NEAR Wallet"})):Object(p.jsxs)(N,Object(s.a)(Object(s.a)({},t),{},{children:["Connecting..."," ",Object(p.jsx)("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"})]}))}var ft="/account",Ot="/my_streams",vt="/",gt=function(t){return"/my_streams/".concat(t)},Nt=n.p+"static/media/logo_stream_with_text.765f9ae8.svg";function kt(){var t=Object(p.jsxs)("ul",{className:"twind-flex-col lg:twind-flex-row twind-flex twind-justify-center ",children:[Object(p.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(p.jsx)(y,{to:ft,icon:Object(p.jsx)(ut,{}),children:"Account"})}),Object(p.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(p.jsx)(y,{to:Ot,icon:Object(p.jsx)(ot,{}),children:"My Streams"})}),Object(p.jsx)("li",{className:"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0",children:Object(p.jsx)(y,{to:vt,icon:Object(p.jsx)(st,{}),children:"Send"})})]}),e=Object(p.jsx)("div",{className:"twind-flex twind-justify-start twind-items-center",children:Object(p.jsx)("img",{src:Nt,alt:"xyiming logo"})});return Object(p.jsxs)("div",{className:"twind-py-4 twind-px-6",children:[Object(p.jsxs)("div",{className:x()("twind-hidden lg:twind-grid twind-items-center twind-grid-cols-3 twind-gap-3 "),children:[e,t,Object(p.jsx)("div",{className:"twind-flex twind-justify-end",children:Object(p.jsx)(xt,{})})]}),Object(p.jsxs)("div",{className:x()("lg:twind-hidden","navbar-dark"),children:[Object(p.jsxs)("div",{className:"twind-flex twind-justify-between",children:[e,Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})})]}),Object(p.jsxs)("div",{className:"collapse navbar-collapse twind-mt-4",id:"navbarSupportedContent",children:[t,Object(p.jsx)(xt,{className:"mt-4"})]})]})]})}var yt=["stream","className"];function _t(t){var e=t.stream,n=t.className,r=Object(o.a)(t,yt),i=e.direction,a=qt(e).tf;return Object(p.jsxs)("div",Object(s.a)(Object(s.a)({className:x()("twind-inline-flex twind-items-center twind-whitespace-nowrap",n)},r),{},{children:["out"===i?Object(p.jsx)(lt,{}):Object(p.jsx)(dt,{}),Object(p.jsxs)("span",{className:"twind-ml-2",children:[Object(p.jsxs)("span",{children:["@",a.tokensPerS(e.tokens_per_tick)]}),Object(p.jsxs)("span",{children:[" ",e.token_name," / Sec"]})]})]}))}var It=new Error("Provide stream id to use stream methods");function Ct(t){var e=function(){if(!t)throw It},n=nt(),r=i.a.useState(!1),a=Object(w.a)(r,2),c=a[0],s=a[1];function o(){return(o=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("updating all account"),t.next=3,n.contractApi.updateAccount({});case 3:console.log("update completed");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return(d=Object(b.a)(j.a.mark((function r(i){var a;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=i.deposit,e(),console.log("depositing",t),r.next=5,n.contractApi.depositStream({streamId:t,deposit:a});case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function l(){return(l=Object(b.a)(j.a.mark((function e(r){var i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.deposit,console.log("depositing ft",t),e.next=4,n.near.ft.ft_transfer_call({receiver_id:n.near.contractName,amount:i,memo:"xyiming transfer",msg:t},"200000000000000",1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(b.a)(j.a.mark((function r(){var i;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("pausing",t),r.next=4,n.contractApi.pauseStream({streamId:t});case 4:return i=r.sent,console.log("pausing res",i),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function m(){return(m=Object(b.a)(j.a.mark((function r(){var i;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("restarting",t),r.next=4,n.contractApi.startStream({streamId:t});case 4:return i=r.sent,console.log("restarting res",i),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(){return(p=Object(b.a)(j.a.mark((function r(){var i;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e(),console.log("Stop called stopping",t),r.next=4,n.contractApi.stopStream({streamId:t});case 4:return i=r.sent,console.log("stopping res",i),r.abrupt("return",i);case 7:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function h(t){return Object(b.a)(j.a.mark((function e(){var n=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.prev=3,e.next=6,t.apply(void 0,n);case 6:return e.abrupt("return",e.sent);case 7:return e.prev=7,s(!1),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[3,,7,10]])})))}return{loading:c,updateAllAndWithdraw:h((function(){return o.apply(this,arguments)})),pause:h((function(){return u.apply(this,arguments)})),restart:h((function(){return m.apply(this,arguments)})),stop:h((function(){return p.apply(this,arguments)})),deposit:h((function(t){return d.apply(this,arguments)})),deposit_ft:h((function(t){return l.apply(this,arguments)}))}}var At=n(13),St={INITIALIZED:"INITIALIZED",ACTIVE:"ACTIVE",PAUSED:"PAUSED",FINISHED:"FINISHED",INTERRUPTED:"INTERRUPTED"},Et="in",Tt="out",Dt=["stream","className"];function Mt(t){var e,n=t.stream,r=t.className,i=Object(o.a)(t,Dt),a=(e={},Object(At.a)(e,St.INITIALIZED,{colorClass:"twind-text-special-active",label:"Initialized"}),Object(At.a)(e,St.ACTIVE,{colorClass:"twind-text-special-active",label:"Active"}),Object(At.a)(e,St.PAUSED,{colorClass:"twind-text-special-hold",label:"Paused"}),Object(At.a)(e,St.FINISHED,{colorClass:"twind-text-special-active",label:"Finished"}),Object(At.a)(e,St.INTERRUPTED,{colorClass:"twind-text-special-inactive",label:"Interrupted"}),e)[n.status]||{};return Object(p.jsx)("div",Object(s.a)(Object(s.a)({className:x()(a.colorClass,r)},i),{},{children:a.label}))}function Ft(t){var e=t.stream,n=t.minimal,i=t.className,a=nt().near.accountId===e.owner_id,c=e.status===St.INTERRUPTED||e.status===St.FINISHED,s=Object(r.useState)(!1),o=Object(w.a)(s,2),d=o[0],l=o[1],u=Ct(e.stream_id);return u.loading?Object(p.jsx)("span",{children:"Loading!"}):c?Object(p.jsx)(Mt,{stream:e}):Object(p.jsxs)("div",{className:x()(i,"twind-relative twind-inline-flex"),children:[Object(p.jsx)(U,{minimal:n,opened:d,onClick:function(){return l(!d)},children:Object(p.jsx)(Mt,{stream:e})}),Object(p.jsxs)(M,{opened:d,className:"twind-w-36",children:[e.status!==St.ACTIVE&&a?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{children:Object(p.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:u.restart,children:[Object(p.jsx)(bt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(p.jsx)("span",{children:"Start stream "})," "]})}),Object(p.jsx)(R,{})]}):null,e.status!==St.PAUSED?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(F,{children:Object(p.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:u.pause,children:[Object(p.jsx)(mt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(p.jsx)("span",{children:"Pause stream"})]})}),Object(p.jsx)(R,{})]}):null,Object(p.jsx)(F,{children:Object(p.jsxs)("button",{className:"twind-inline-flex twind-items-center",onClick:u.stop,children:[Object(p.jsx)(wt,{className:"twind-mr-2 twind-flex-shrink-0"}),Object(p.jsx)("span",{children:" Stop stream "})]})})]})]})}var Rt=n(54),Lt=n.n(Rt);function Ut(t){var e=t.stream,n=Ct(e.stream_id),a=Object(r.useState)(""),c=Object(w.a)(a,2),s=c[0],o=c[1],d=ct(e.token_name),l=function(t){var e=i.a.useState(t),n=Object(w.a)(e,2),r=n[0],a=n[1];return{on:r,off:!r,toggle:function(){return a(!r)},turnOff:function(){return a(!1)},turnOn:function(){return a(!0)}}}(!1);return{modal:Object(p.jsxs)(Lt.a,{isOpen:l.on,onRequestClose:l.turnOff,className:"ModalContent",overlayClassName:"ModalOverlay",children:[Object(p.jsx)("h2",{className:"twind-text-2xl twind-mb-6",children:"Amount to deposit"}),Object(p.jsx)(I,{className:"twind-mb-4",children:Object(p.jsx)("input",{placeholder:"0.00 ".concat(e.token_name),className:"twind-text-black",value:s,onChange:function(t){return o(t.target.value)}})}),Object(p.jsx)(N,{className:"twind-w-full",variant:"filled",type:"button",onClick:function(){return"NEAR"===e.token_name?n.deposit({deposit:d.toInt(s)}):n.deposit_ft({deposit:d.toInt(s)})},children:"Add funds"})]}),modalControl:l}}function Pt(t){var e=Ut({stream:t.stream});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(N,{variant:"filled",type:"button",onClick:e.modalControl.turnOn,children:[Object(p.jsx)(jt,{className:"twind-mr-2"}),"Add funds"]}),e.modal]})}function Bt(t){var e=t.stream,n=t.variant,r=void 0===n?"filled":n,i=Ut({stream:e});return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(N,{variant:r,color:"dark",type:"button",onClick:i.modalControl.turnOn,children:[Object(p.jsx)(pt,{className:"twind-mr-2"}),"Add funds"]}),i.modal]})}var Vt=n(214),Ht=n(213),zt={xSeconds:"{{count}} sec",xMinutes:"{{count}} min",xHours:"{{count}} h"},Wt={formatDistance:function(t,e){return zt[t].replace("{{count}}",e)}};function Yt(t){return t instanceof Date&&!isNaN(t)}function Zt(t){var e=t.untilDate,n=t.suffix,i=Yt(e),a=Object(r.useState)(!i||(new Date).getTime()>e.getTime()),c=Object(w.a)(a,2),s=c[0],o=c[1],d=Object(r.useState)(s?null:Object(Vt.a)({start:new Date,end:e})),l=Object(w.a)(d,2),u=l[0],j=l[1];if(Object(r.useEffect)((function(){if(Yt(e)){var t=setInterval((function(){var t=(new Date).getTime()>e.getTime();if(o(t),j(null),!t){var n=Object(Vt.a)({start:new Date,end:e});j(n)}}),1e3);return function(){return clearInterval(t)}}}),[e,s]),!i)return Object(p.jsx)("span",{children:"Invalid Date"});var b=u?Object(Ht.a)(u,{locale:Wt})+(n||""):"";return Object(p.jsx)("span",{children:b})}function qt(t){var e=ct(t.token_name),n=e.ticksToMs(Math.round((t.balance-t.available_to_withdraw)/t.tokens_per_tick)),r=new Date((new Date).getTime()+n),i=Number(t.balance)+Number(t.tokens_total_withdrawn),a=Number(t.tokens_total_withdrawn),c=Number(t.tokens_total_withdrawn)+Number(t.available_to_withdraw),s=Number(t.available_to_withdraw),o=i-c,d={left:(i-c)/i,streamed:c/i,withdrawn:a/i,available:s/i};return{dateEnd:r,progresses:[a/i,c/i],tf:e,isDead:t.status===St.FINISHED||t.status===St.INTERRUPTED,percentages:d,progress:{full:i,withdrawn:a,streamed:c,left:o,available:s}}}var Xt,Gt={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"};function Kt(t){var e=t.stream,n=void 0===e?Gt:e,r=t.direction,i=t.className,a=qt(n),c=a.dateEnd,s=a.progresses,o=a.tf,d=a.progress,l=d.full,u=(d.withdrawn,d.streamed);return Object(p.jsxs)("div",{className:x()("twind-grid twind-grid-cols-12 twind-gap-6 twind-justify-items-center","twind-p-10 twind-bg-input twind-rounded-3xl",i),children:[Object(p.jsxs)("div",{className:"twind-w-full twind-col-span-12 xl:twind-col-span-5 2xl:twind-col-span-6 twind-justify-self-start",children:[Object(p.jsxs)("div",{className:"twind-flex twind-items-center",children:[Object(p.jsx)(Z,{tokenName:n.token_name,className:"twind-mr-4"}),Object(p.jsxs)("div",{className:"twind-w-full twind-gap-4 twind-flex twind-items-end",children:[Object(p.jsxs)("div",{className:"twind-text-2xl twind-whitespace-nowrap twind-flex-shrink-0",children:[o.amount(u)," of ",o.amount(l)," ",Object(p.jsx)("span",{className:"twind-uppercase",children:n.token_name})]}),Object(p.jsx)(_t,{stream:n}),Object(p.jsx)("div",{className:"twind-whitespace-nowrap",children:Object(p.jsx)(Zt,{untilDate:c,suffix:" remaining"})})]})]}),Object(p.jsx)(z,{className:"twind-mt-5",progresses:s})]}),Object(p.jsxs)("div",{className:"twind-col-span-2",children:[Object(p.jsx)("div",{className:"twind-text-gray",children:"Receiver:"}),Object(p.jsx)("div",{children:n.receiver_id})]}),Object(p.jsxs)("div",{className:"twind-col-span-2",children:[Object(p.jsx)("div",{className:"twind-text-gray",children:"Status:"}),Object(p.jsx)(Ft,{minimal:!0,stream:n})]}),Object(p.jsxs)("div",{className:"twind-col-span-2 twind-flex twind-items-start",children:["out"===r?Object(p.jsx)(Pt,{stream:n}):null,Object(p.jsx)(N,{className:"twind-ml-3",variant:"filled",link:!0,to:gt(n.stream_id),children:"Inspect"})]})]})}function Jt(t){var e=t.options,n=Object.keys(e),i=Object(r.useState)(n[0]),a=Object(w.a)(i,2),c=a[0],s=a[1],o=e[c];return Object(r.useMemo)((function(){return{option:c,selectOption:s,options:e,optionsArray:n,currentFilterFunction:o}}),[e,c])}var Qt="All",$t="Incoming",te="Outgoing",ee=(Xt={ALL:"All",ACTIVE:"Active",ARCHIVED:"Archived"},Object(At.a)(Xt,St.FINISHED,"Finished"),Object(At.a)(Xt,St.INTERRUPTED,"Interrupted"),Xt);function ne(t){var e=Object(r.useMemo)((function(){var t;return t={},Object(At.a)(t,ee.ALL,(function(){return!0})),Object(At.a)(t,ee.ACTIVE,(function(t){return t.status===St.ACTIVE})),Object(At.a)(t,ee.ARCHIVED,(function(t){return t.status===St.ARCHIVED})),Object(At.a)(t,ee[St.INTERRUPTED],(function(t){return t.status===St.INTERRUPTED})),Object(At.a)(t,ee[St.FINISHED],(function(t){return t.status===St.FINISHED})),t}),[]),n=Object(r.useMemo)((function(){var t;return t={},Object(At.a)(t,Qt,(function(){return!0})),Object(At.a)(t,$t,(function(t){return Et===t.direction})),Object(At.a)(t,te,(function(t){return Tt===t.direction})),t}),[]),i=Jt({options:e}),a=Jt({options:n}),c=function(t){var e=t.items,n=t.filters,i=Object(r.useState)([]),a=Object(w.a)(i,2),c=a[0],s=a[1],o=Object(r.useState)([]),d=Object(w.a)(o,2),l=d[0],u=d[1];return Object(r.useEffect)((function(){var t=e,r=[];n.forEach((function(e){var n={};Object.keys(e.options).forEach((function(r){var i=t.filter(e.options[r]);n[r]=i}));var i={};Object.keys(n).forEach((function(t){return i[t]=n[t].length})),r.push(i),t=n[e.option]})),u(r),s(t)}),[e,n]),{filterCounts:l,filteredItems:c}}({items:t,filters:Object(r.useMemo)((function(){return[a,i,a]}),[a,i])});return{statusFilter:i,directionFilter:a,result:c}}function re(t,e,n){return Number(t[n])>Number(e[n])?-1:Number(t[n])<Number(e[n])?1:0}var ie={bigBalanceFirst:{label:"With big balances",fn:function(t,e){return re(t,e,"balance")}},highSpeedFirst:{label:"With high speed",fn:function(t,e){return re(t,e,"tokens_per_tick")}},highSpeedLast:{label:"With low speed",fn:function(t,e){return-1*re(t,e,"tokens_per_tick")}}};function ae(t){var e=t.items,n=t.onFilterDone,i=t.className,a=ne(e),c=Object(r.useState)(ie.highSpeedFirst),s=Object(w.a)(c,2),o=s[0],d=s[1],l=Object.values(ie);return Object(r.useEffect)((function(){var t=Object(B.a)(a.result.filteredItems);t.sort(o.fn),n(t)}),[a.result.filteredItems,n,o.fn]),Object(p.jsxs)("div",{className:x()("twind-flex",i),children:[Object(p.jsx)(T,{className:"twind-mr-5",options:a.directionFilter.optionsArray,label:"Type:",active:a.directionFilter.option,onChange:a.directionFilter.selectOption,renderOption:function(t){var e=a.result.filterCounts[0];return Object(p.jsx)(E,{option:t,count:e?e[t]:""})}}),Object(p.jsx)(T,{options:a.statusFilter.optionsArray,label:"Status:",active:a.statusFilter.option,onChange:a.statusFilter.selectOption,renderOption:function(t){var e=a.result.filterCounts[1];return Object(p.jsx)(E,{option:t,count:e?e[t]:""})}}),Object(p.jsx)("div",{className:"twind-flex-grow"}),Object(p.jsx)(T,{minimal:!0,options:l,label:"Show first:",active:o,onChange:d,renderOption:function(t){return Object(p.jsx)("span",{children:t.label})},renderActive:function(t){return Object(p.jsx)("span",{children:t.label})}})]})}function ce(t,e){return se.apply(this,arguments)}function se(){return(se=Object(b.a)(j.a.mark((function t(e,n){var r,i,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.streamId,i=n.near,t.next=4,i.contractApi.getStream({streamId:r});case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oe(){return(oe=Object(b.a)(j.a.mark((function t(e,n){var r,i,a,c,o;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.inputs,i=e.outputs,a=n.near,t.next=4,Promise.all(r.map((function(t){return a.contractApi.getStream({streamId:t})})));case 4:return c=t.sent,t.next=7,Promise.all(i.map((function(t){return a.contractApi.getStream({streamId:t})})));case 7:return o=t.sent,t.abrupt("return",{inputs:c.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{direction:"in"})})),outputs:o.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{direction:"out"})}))});case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function de(t){var e=t.near;return Object(m.a)(["account",e.near.accountId],e.contractApi.getCurrentAccount,{errorRetryInterval:250})}function le(t){var e=t.near,n=t.accountSWR.data;return Object(m.a)((function(){return!!n&&["streams",n.account_id,n.last_action]}),(function(){return function(t,e){return oe.apply(this,arguments)}({inputs:n.inputs,outputs:n.outputs},{near:e})}))}var ue=[],je=[];function be(){var t=nt(),e=Object(r.useState)([]),n=Object(w.a)(e,2),i=n[0],a=n[1],c=Ct(),s=de({near:t}),o=le({near:t,accountSWR:s}),d=function(e){return e.owner_id!==t.near.accountId};function l(){return(l=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.updateAllAndWithdraw();case 2:s.mutate();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var u=o.data,m=u?u.inputs:ue,h=u?u.outputs:je;console.log({inputs:m,outputs:h,streams:u});var x=Object(r.useMemo)((function(){return m.concat(h)}),[m,h]);return Object(p.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(p.jsxs)("div",{className:"twind-flex twind-mb-12",children:[Object(p.jsx)("h1",{className:"twind-text-3xl ",children:"All Streams"}),Object(p.jsx)("div",{className:"twind-flex-grow"}),Object(p.jsx)(N,{loading:c.loading,loadingText:"Updating account...",variant:"main",size:"normal",onClick:function(){return l.apply(this,arguments)},children:"Update streams and withdraw"})]}),Object(p.jsx)(ae,{items:x,onFilterDone:a,className:"twind-mb-10 twind-relative twind-z-10"}),u?0===x.length?Object(p.jsxs)("div",{className:"twind-flex twind-flex-col twind-w-80 twind-mx-auto",children:[Object(p.jsx)("h3",{className:"twind-text-3xl twind-text-center twind-my-12 ",children:"You dont have any streams yet."}),Object(p.jsx)(N,{variant:"main",link:!0,to:vt,children:"Create First Stream"})]}):0===i.length?Object(p.jsxs)("h3",{className:"twind-text-3xl twind-text-center twind-my-12 twind-w-80 twind-mx-auto",children:["No streams matching your filters. ",Object(p.jsx)("br",{}),"Try selecting different filters!"]}):i.map((function(t){return Object(p.jsx)(Kt,{stream:t,className:"twind-mb-4",direction:d(t)?"in":"out"},t.stream_id)})):Object(p.jsx)("div",{children:"Loading"})]})}function we(){nt();return Object(p.jsxs)("div",{className:"twind-my-24 twind-text-center",children:[Object(p.jsxs)("h1",{className:"twind-text-3xl twind-mb-4 twind-font-semibold",children:[" ","Login via NEAR Network"," "]}),Object(p.jsx)("p",{className:"twind-text-gray",children:"Click button below to login or create new account"}),Object(p.jsx)(xt,{className:"twind-mt-10"})]})}var me=n(215),pe=["stream","account","className"],he={stream_id:"FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST",description:"test stream",owner_id:"kpr.testnet",receiver_id:"pinkinice.testnet",token_name:"NEAR",timestamp_created:"1630964802206727665",balance:"3472735225910300000000000",tokens_per_tick:"100000000000",auto_deposit_enabled:!1,status:"ACTIVE",tokens_total_withdrawn:"27264774089700000000000",available_to_withdraw:"3472735225910300000000000",history:[{actor:"dev-1630964633889-96006156236045",action_type:"Deposit",amount:"3500000000000000000000000",timestamp:"1630964802206727665"}],direction:"in"},xe=function(t){var e=t.label,n=t.children;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{className:"twind-text-gray twind-text-sm",children:e}),Object(p.jsx)("div",{className:"twind-font-semibold twind-text-lg",children:n})]})},fe=function(t){var e=t.label,n=t.children;return Object(p.jsxs)("div",{className:"twind-flex twind-justify-between twind-my-3",children:[Object(p.jsx)("div",{className:"twind-text-gray twind-text-sm",children:e}),Object(p.jsx)("div",{className:"twind-text-sm twind-text-right",children:n})]})};function Oe(t){var e=t.stream,n=void 0===e?he:e,r=t.account,i=t.className,a=(Object(o.a)(t,pe),qt(n)),c=a.dateEnd,s=a.tf,d=a.percentages,l=a.progress,u=l.full,j=l.streamed,b=(l.withdrawn,l.left),w=l.available,m=a.progresses;return console.log(m),Object(p.jsxs)("div",{className:x()("twind-pt-10 twind-p-9 twind-bg-input twind-rounded-3xl",i),children:[Object(p.jsxs)("div",{className:"twind-flex twind-text-center twind-justify-between",children:[Object(p.jsx)(xe,{label:"Receiver:",children:n.receiver_id}),Object(p.jsx)(xe,{label:"Time Remaining:",children:Object(p.jsx)(Zt,{untilDate:c})})]}),Object(p.jsx)("div",{className:"twind-border-t twind-border-border twind-mt-8 twind-mb-9"}),Object(p.jsx)(fe,{label:"Stream Created:",children:Object(me.a)(new Date(n.timestamp_created/1e6),"Yo")}),Object(p.jsx)(fe,{label:"Token:",children:n.token_name}),Object(p.jsxs)(fe,{label:"Total:",children:[s.amount(u)," ",n.token_name]}),Object(p.jsx)(fe,{label:"Tokens Transferred:",children:Object(p.jsxs)("span",{children:[s.amount(j)," ",n.token_name," ",Object(p.jsxs)("span",{className:"twind-text-gray",children:["(",it()(d.streamed).format({output:"percent",mantissa:2}),")"]})]})}),Object(p.jsx)(fe,{label:"Tokens Left:",children:Object(p.jsxs)("span",{children:[s.amount(b)," ",n.token_name," ",Object(p.jsxs)("span",{className:"twind-text-gray",children:["(",it()(d.left).format({output:"percent",mantissa:2}),")"]})]})}),Object(p.jsxs)(fe,{label:"Tokens Available:",children:[s.amount(w)," ",n.token_name]}),Object(p.jsxs)(fe,{label:"Speed:",children:[s.tokensPerS(n.tokens_per_tick)," ",n.token_name]}),"in"===n.direction?Object(p.jsx)(fe,{label:"Latest Withdrawal:",children:Object(me.a)(new Date(r.last_action/1e6),"MMM dd, Yo  H:m")}):"",Object(p.jsxs)(fe,{label:"Stream ID:",children:[s.amount(u)," ",n.token_name]})]})}function ve(){var t=nt(),e=Object(d.g)(),n=de({near:t}),r=function(t,e){var n=t.streamId,r=e.near,i=e.accountSWR.data;return Object(m.a)((function(){return!!i&&["stream",n,i.id,i.last_action]}),Object(b.a)(j.a.mark((function t(){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ce({streamId:n},{near:r});case 2:return(e=t.sent).owner_id===i.account_id?e.direction="out":e.direction="in",t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)}))))}({streamId:e.id},{near:t,accountSWR:n}),i=n.data,a=r.data;if(console.log(i,a),r.error||n.error)return Object(p.jsx)("div",{children:"Erro!"});if(!a||!i)return Object(p.jsx)("div",{children:"Loading"});a.direction;var c="out"===a.direction,s=qt(a),o=s.tf,l=(s.progresses,s.isDead),u=s.progress,w=u.full,h=(u.withdrawn,u.streamed);return Object(p.jsxs)("div",{className:"twind-container twind-mx-auto twind-p-12",children:[Object(p.jsx)("div",{children:"Header"}),Object(p.jsxs)("div",{className:"twind-flex twind-justify-between",children:[Object(p.jsxs)("div",{className:"twind-flex twind-flex-col twind-items-center twind-flex-grow",children:[Object(p.jsx)(Z,{size:14,tokenName:a.token_name,className:"twind-mb-8"}),Object(p.jsx)("div",{className:"twind-text-6xl twind-font-semibold",children:o.amount(h)}),Object(p.jsxs)("div",{className:"twind-text-gray twind-font-semibold",children:["of ",o.amount(w)]}),Object(p.jsx)(_t,{stream:a,className:"twind-mt-6 twind-mb-6"}),l?"":Object(p.jsxs)("div",{className:"twind-flex",children:[Object(p.jsx)(Ft,{stream:a,className:"twind-mr-2"}),c?Object(p.jsx)(Bt,{variant:"outlined",stream:a}):null]})]}),Object(p.jsx)(Oe,{className:"twind-w-1/3",stream:a,account:i})]})]})}var ge=["children","allowed","redirect"];function Ne(t){var e=t.children,n=t.allowed,r=t.redirect,i=Object(o.a)(t,ge);return Object(p.jsx)(d.b,Object(s.a)(Object(s.a)({},i),{},{render:function(t){t.location;return console.log("Render ".concat(i.path,", allowed? ").concat(n)),n?e:r}}))}var ke=function(){var t=function(){var t=i.a.useRef(null),e=Object(r.useState)(!1),n=Object(w.a)(e,2),a=n[0],c=n[1],o=Object(r.useState)({keyStore:null,near:null,walletConnection:null,accountId:null,contract:null,ft:null}),d=Object(w.a)(o,2),l=d[0],u=d[1],m={signedIn:!!l.accountId,signedAccountId:l.accountId};function p(){return(p=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,l.walletConnection.requestSignIn(J.contractName,"Streaming Xyiming");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){l.walletConnection.signOut(),u(Object(s.a)(Object(s.a)({},l),{},{accountId:null}))}function x(){return(x=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),t.next=3,h();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){var e=Object(b.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:n=e.sent,t.current=G(n),u(n),c(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),{auth:m,near:l,contractApi:t.current,inited:a,login:function(){return p.apply(this,arguments)},logout:h,refreshAllowance:function(){return x.apply(this,arguments)}}}();return Object(p.jsx)(Q.Provider,{value:t,children:Object(p.jsx)("div",{className:"twind-bg-dark text-white",children:t.inited?Object(p.jsxs)(l.a,{basename:"",children:[Object(p.jsx)(kt,{}),Object(p.jsxs)(d.d,{children:[Object(p.jsx)(Ne,{exact:!0,redirect:Object(p.jsx)(d.a,{to:"/"}),allowed:!t.auth.signedIn,path:"/authorize",children:Object(p.jsx)(we,{})}),Object(p.jsx)(Ne,{exact:!0,redirect:Object(p.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/",children:Object(p.jsx)(ht,{})}),Object(p.jsx)(Ne,{exact:!0,redirect:Object(p.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/my_streams/:id",children:Object(p.jsx)(ve,{})}),Object(p.jsx)(Ne,{exact:!0,redirect:Object(p.jsx)(d.a,{to:"/authorize"}),allowed:t.auth.signedIn,path:"/my_streams",children:Object(p.jsx)(be,{})})]})]}):null})})},ye=(n(211),document.getElementById("root"));Lt.a.setAppElement(ye),c.a.render(Object(p.jsx)(ke,{}),ye)}},[[212,1,2]]]);
//# sourceMappingURL=main.0b74ef2c.chunk.js.map
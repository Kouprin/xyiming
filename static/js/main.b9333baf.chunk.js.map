{"version":3,"sources":["components/kit/Button/Button.jsx","components/kit/NavLink.jsx","components/kit/Input/Input.jsx","components/kit/FormField/FormField.jsx","components/icons/DropdownArrowDown.jsx","components/kit/Filter/Filter.jsx","components/kit/DropdownMenu/DropdownMenu.jsx","components/kit/DropdownOpener/DropdownOpener.jsx","components/kit/RadioButton/RadioButton.jsx","components/kit/ProgressBar/ProgressBar.jsx","components/icons/Tokens.jsx","components/kit/TokenImage/TokenImage.jsx","features/near-connect/near-contract-api.js","lib/environment.js","features/near-connect/config.js","features/near-connect/useNear.js","lib/formatting.js","components/icons/Copy.jsx","components/icons/Send.jsx","components/icons/Streams.jsx","components/icons/StreamIn.jsx","components/icons/StreamOut.jsx","components/icons/Account.jsx","components/icons/Plus.jsx","components/icons/Start.jsx","components/icons/Stop.jsx","components/icons/Pause.jsx","components/icons/PlusGradient.jsx","pages/Send.js","features/near-auth/NearAuthButton.jsx","features/near-auth/useNearAuth.js","lib/routing.js","images/logo_stream_with_text.svg","components/Header.jsx","features/stream-view/StreamingSpeed.jsx","features/stream-control/useStreamControl.js","features/stream-control/lib.js","features/stream-control/StreamStatus.jsx","features/stream-control/StreamControls.jsx","features/stream-control/StreamDepositButton.jsx","lib/useBool.js","components/DurationTimer.jsx","features/stream-view/streamViewData.js","features/stream-view/StreamCard.jsx","features/filtering/lib.js","features/filtering/streams/useStreamFilters.js","features/filtering/streams/StreamFilters.jsx","features/xyiming-resources/index.js","pages/MyStreams.js","pages/Authorize.js","pages/StreamPage.js","App.js","index.js"],"names":["variants","Button","icon","children","className","link","size","loading","loadingText","color","variant","rest","variantStyles","sizeStyles","colorStyles","ButtonComponent","Link","disabled","classNames","NavLink","to","match","useRouteMatch","isActive","isExact","Input","error","borderColor","FormField","label","DropdownArrowDown","props","width","height","viewBox","fill","xmlns","d","stroke","FilterOptionWithCounter","count","option","Filter","options","renderOption","renderActive","active","minimal","onChange","useState","opened","setOpened","DropdownOpener","rounded","onClick","DropdownMenu","map","i","DropdownMenuItem","RadioButton","value","DropdownMenuDivider","minimalClasses","type","checked","COLORS","ProgressBar","progresses","p","sort","a","b","progress","style","background","Tokens","tokenName","tokens","NEAR","version","preserveAspectRatio","transform","fallback","TokenImage","GAS_SIZE","NearContractApi","near","console","log","contract","getAccount","accountId","get_account","account_id","update_account","account","res","streamId","deposit","stream_id","pause_stream","start_stream","stop_stream","ownerId","receiverId","token","speed","description","autoDepositEnabled","create_stream","owner_id","receiver_id","token_name","tokens_per_tick","auto_deposit_enabled","get_stream","getCurrentAccount","walletConnection","getAccountId","updateAccount","createStream","depositStream","pauseStream","startStream","stopStream","getStream","env","ACCOUNT_SUFFIX","process","NEAR_NETWORK_ID","NEAR_NODE_URL","CONTRACT_NAME","WALLET_URL","FT_CONTRACT_NAME","NEAR_CONFIG","accountSuffix","NEAR_ACCOUNT_SUFFIX","networkId","nodeUrl","contractName","walletUrl","ft","NearContext","React","createContext","inited","keyStore","auth","signedIn","signedAccountId","contractApi","refreshAllowance","login","logout","createNearInstance","nearAPI","BrowserLocalStorageKeyStore","Object","assign","deps","NearConfig","_near","viewMethods","changeMethods","ERR_NOT_IN_NEAR_CONTEXT","Error","useNear","useContext","decimals","name","TARAS","TokenFormatter","TICK_TO_MS","Math","pow","TICK_TO_S","MP","tokenPerSecondToInt","tps","numbro","multiply","divide","format","mantissa","toInt","floatValue","amount","tokensPerMS","tokensPerTick","trimMantissa","tokensPerS","ticksToMs","ticks","round","Send","strokeWidth","strokeLinecap","Streams","cx","cy","r","StreamIn","StreamOut","Account","Plus","Start","Stop","x","y","rx","Pause","PlusGradient","id","x1","y1","x2","y2","gradientUnits","offset","SendPage","profileId","dropdownOpened","setDropdownOpened","dropdownActive","setDropdownActive","days","setDays","minutes","setMinutes","hourse","setHourse","setDeposit","comment","setComment","tokensNames","keys","filter","item","e","preventDefault","formatter","document","getElementById","fetchAccount","useSWR","errorRetryInterval","data","onSubmit","createStreamClick","required","placeholder","requried","target","toFixed","describedby","length","maxlength","NearAuthButton","useNearAuth","role","routes","Header","navigation","logo","src","LogoText","alt","StreamingSpeed","stream","direction","tf","streamViewData","STREAM_CONTROL_ID_NOT_PROVIDED","useStreamControl","ensureMethodHasStreamId","setLoading","ft_transfer_call","memo","msg","wrapped","fn","updateAllAndWithdraw","pause","restart","stop","deposit_ft","STREAM_STATUS","INITIALIZED","ACTIVE","PAUSED","FINISHED","INTERRUPTED","STREAM_DIRECTION","StreamStatus","binding","colorClass","status","StreamControls","isOutgoing","isDead","menuOpened","setMenuOpened","controls","useDepositButton","modalControl","initial","on","setOn","off","toggle","turnOff","turnOn","useBool","modal","isOpen","onRequestClose","overlayClassName","StreamDepositButton","depositButton","StreamDepositButtonOutlined","formatDistanceLocale","xYears","xMonths","xDays","xSeconds","xMinutes","xHours","shortEnLocale","formatDistance","replace","isValidDate","Date","isNaN","DurationTimer","untilDate","suffix","dateValid","getTime","expired","setExpired","intervalToDuration","start","end","duration","setDuration","useEffect","setInterval","isExpired","clearInterval","formatted","formatDuration","locale","secondsLeft","balance","available_to_withdraw","dateEnd","full","Number","tokens_total_withdrawn","withdrawn","streamed","available","left","percentages","streamType","timestamp_created","history","actor","action_type","timestamp","StreamCard","useFilter","selectOption","currentFilterFunction","useMemo","optionsArray","STREAM_TYPE_FILTER","STREAM_STATUS_FILTER","ALL","ARCHIVED","useStreamFilters","streams","statusOptions","directionOptions","statusFilter","directionFilter","result","items","filters","filteredItems","setFilteredItems","filterCounts","setFilterCounts","forEach","filterRunResult","filtered","currentFilterCount","push","useFilters","compareBy","key","sorts","bigBalanceFirst","highSpeedFirst","highSpeedLast","StreamFilters","onFilterDone","sorting","setSorting","sortOptions","values","sorted","counts","fetchStream","inputs","outputs","Promise","all","inputStreams","outputStreams","useAccount","useStreams","accountSWR","last_action","fetchStreams","__INPUTS","__OUTPUTS","MyStreamsPage","setFiltered","streamControl","streamsSWR","isIncomingStream","mutate","allStreams","concat","AuthorizePage","VerticalData","HorizontalData","StreamOverviewCard","output","StreamPage","params","useParams","streamSWR","useSingleStream","PrivateRoute","allowed","redirect","render","location","path","AppFn","apiRef","useRef","setInited","setNear","requestSignIn","signOut","alert","current","init","useCreateNear","Provider","basename","exact","rootEl","Modal","setAppElement","ReactDOM"],"mappings":"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","file":"static/js/main.b9333baf.chunk.js","sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport {Link} from 'react-router-dom';\nimport './Button.scss';\n\nconst variants = {\n  main: 'main',\n  filled: 'filled',\n  outlined: 'outlined',\n};\n\nconst sizes = ['normal', 'big'];\nconst colors = ['dark', 'light'];\n\nexport function Button({\n  icon,\n  children,\n  className,\n  link,\n  size,\n  loading,\n  loadingText,\n  color = 'light',\n  variant = 'outlined',\n  ...rest\n}) {\n  let variantStyles = '';\n  let sizeStyles = '';\n  let colorStyles = '';\n\n  if (variant === variants.main) {\n    variantStyles = 'Button--main';\n\n    sizeStyles =\n      size === 'normal'\n        ? 'twind-px-5 twind-py-4  twind-rounded-2xl twind-font-semibold'\n        : size === 'big'\n        ? 'twind-px-12 twind-py-6 twind-rounded-3xl twind-font-bold'\n        : '';\n  } else if (variant === variants.outlined) {\n    variantStyles =\n      'twind-border-solid twind-border twind-font-semibold twind-rounded-lg';\n    colorStyles =\n      color === 'light'\n        ? 'twind-border-blue hover:twind-bg-blue'\n        : color === 'dark'\n        ? 'twind-border-border hover:twind-bg-hover hover:twind-border-hover'\n        : '';\n  } else if (variant === variants.filled) {\n    variantStyles =\n      'twind-bg-dark hover:twind-bg-hover twind-font-semibold twind-rounded-lg';\n  }\n  const ButtonComponent = link ? Link : 'button';\n\n  return (\n    <ButtonComponent\n      disabled={loading}\n      className={classNames(\n        'twind-inline-flex twind-items-center twind-justify-center twind-p-3  twind-whitespace-nowrap',\n        variantStyles,\n        sizeStyles,\n        colorStyles,\n        'twind-transition-all',\n        className,\n      )}\n      {...rest}\n    >\n      {loading ? (\n        loadingText\n      ) : (\n        <>\n          {icon ? <div className=\"twind-mr-2\">{icon}</div> : null}\n          {children}\n        </>\n      )}\n    </ButtonComponent>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport {Link, useRouteMatch} from 'react-router-dom';\nexport function NavLink({icon, children, className, to, ...rest}) {\n  const activeClassname = 'twind-bg-hover';\n  const match = useRouteMatch(to);\n  const isActive = match && match.isExact;\n\n  return (\n    <Link\n      to={to}\n      className={classNames(\n        className,\n        'twind-text-white twind-font-semibold',\n        'twind-flex twind-items-center twind-px-5 twind-py-4 twind-rounded-xl ',\n        'twind-group twind-cursor-pointer twind-whitespace-nowrap',\n        isActive ? activeClassname : '',\n        'twind-transition-all',\n        'hover:twind-bg-hover',\n      )}\n      {...rest}\n    >\n      <div\n        className={classNames(\n          'group-hover:twind-text-blue',\n          isActive ? 'twind-text-blue' : '',\n        )}\n      >\n        {icon}\n      </div>\n      <div className=\"twind-ml-2\">{children}</div>\n    </Link>\n  );\n}\n","import React from 'react';\nimport './Input.scss';\nimport classNames from 'classnames';\n\nexport function Input({children, className, error, ...rest}) {\n  const borderColor = error ? 'twind-border-red-400' : 'twind-border-border';\n  return (\n    <label\n      className={classNames(\n        'Input twind-font-semibold twind-flex twind-p-4 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue',\n        borderColor,\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </label>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nexport function FormField({children, label, error, className, ...rest}) {\n  return (\n    <label className={classNames('twind-block', className)} {...rest}>\n      <div className=\"twind-mb-1\">{label}</div>\n      <div>{children}</div>\n      {error ? (\n        <div className=\"twind-text-red-500 twind-mt-1 twind-text-xs\">\n          {error}\n        </div>\n      ) : null}\n    </label>\n  );\n}\n","import React from 'react';\n\nexport const DropdownArrowDown = (props) => (\n  <svg\n    width=\"12\"\n    height=\"7\"\n    viewBox=\"0 0 12 7\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M1.37378 0.739731L6.11885 5.4848L10.8639 0.739731\"\n      stroke=\"white\"\n      stroke-width=\"1.5\"\n    />\n  </svg>\n);\n","import React, {useState} from 'react';\nimport {DropdownArrowDown} from '../../icons/DropdownArrowDown';\nimport classNames from 'classnames';\nimport {RadioButton, DropdownOpener, DropdownMenu, DropdownMenuItem} from '..';\n\nexport function FilterOptionWithCounter({count, option}) {\n  return (\n    <span>\n      {option}{' '}\n      <span className=\"twind-text-gray twind-font-normal\">{count}</span>\n    </span>\n  );\n}\n\nexport function Filter({\n  label,\n  options,\n  renderOption,\n  renderActive,\n  active,\n  minimal,\n  onChange,\n  className,\n}) {\n  const [opened, setOpened] = useState(false);\n\n  return (\n    <div\n      className={classNames(\n        'twind-inline-flex twind-items-center twind-relative',\n        className,\n      )}\n    >\n      <div className=\"twind-text-gray twind-mr-2\">{label}</div>\n      <DropdownOpener\n        minimal={minimal}\n        rounded\n        onClick={() => setOpened(!opened)}\n      >\n        {renderActive ? renderActive(active) : active}\n      </DropdownOpener>\n\n      <DropdownMenu opened={opened} className=\"twind-right-0\">\n        {options.map((option, i) => (\n          <DropdownMenuItem key={i}>\n            <RadioButton\n              label={\n                renderOption ? renderOption(option, active === option) : option\n              }\n              active={active === option}\n              value={option}\n              onChange={onChange}\n            />\n          </DropdownMenuItem>\n        ))}\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nexport function DropdownMenu({opened, children, className}) {\n  return (\n    <div\n      className={classNames(\n        className,\n        'twind-absolute twind-top-full pt-2',\n        opened ? 'twind-flex' : 'twind-hidden',\n      )}\n    >\n      <div\n        className={classNames('twind-bg-hover twind-rounded-2xl twind-py-2')}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\nexport function DropdownMenuItem({children, className, ...rest}) {\n  return (\n    <div\n      className={classNames(\n        'twind-px-3 twind-py-1 twind-font-semibold twind-text-sm hover:twind-font-bold',\n        className,\n      )}\n      {...rest}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function DropdownMenuDivider() {\n  return (\n    <div className=\"twind-border-dark twind-border-t twind-w-full twind-my-2\" />\n  );\n}\n","import React from 'react';\nimport {DropdownArrowDown} from '../../icons/DropdownArrowDown';\nimport classNames from 'classnames';\n\n/**\n * @param {minimal} Boolean remove outline and padding if true\n * @param {rounded} Boolean set to true to change shape to pill\n * @returns\n */\nexport function DropdownOpener({\n  opened,\n  className,\n  children,\n  onClick,\n  rounded,\n  minimal,\n  ...rest\n}) {\n  const minimalClasses = minimal\n    ? ''\n    : 'twind-px-4 twind-py-3 twind-border twind-border-border twind-w-36 hover:twind-bg-hover hover:twind-border-hover';\n\n  return (\n    <button\n      onClick={onClick}\n      className={classNames(\n        'twind-cursor-pointer twind-flex twind-items-center',\n        className,\n        minimalClasses,\n        rounded ? 'twind-rounded-full' : 'twind-rounded-lg',\n      )}\n      {...rest}\n    >\n      {children}\n      <div className=\"twind-flex-grow\"></div>\n      <DropdownArrowDown\n        className={classNames(\n          'twind-ml-2',\n          'twind-transform',\n          opened ? 'twind-rotate-180' : '',\n        )}\n      />\n    </button>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nexport function RadioButton({active, label, value, onChange}) {\n  return (\n    <label className=\"twind-inline-flex twind-items-center twind-whitespace-nowrap\">\n      <input\n        type=\"radio\"\n        className=\"twind-invisible twind-w-0 twind-h-0 twind-absolute\"\n        checked={active}\n        onChange={() => onChange(value)}\n      />\n      <div\n        className={classNames(\n          active\n            ? 'twind-border-blue twind-border-4'\n            : 'twind-border-border twind-border-2',\n          'twind-border-full twind-w-3 twind-h-3 twind-rounded-full',\n        )}\n      ></div>\n\n      <div\n        className={classNames(\n          active ? 'twind-font-semibold' : '',\n          'twind-ml-3',\n        )}\n      >\n        {label}\n      </div>\n    </label>\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nconst COLORS = [\n  'linear-gradient(270deg, #C750FF 0%, #4743FB 100%)',\n  'linear-gradient(270deg, #FFCC69 0%, #FF8469 100%)',\n];\n\nexport function ProgressBar({progresses, className, ...rest}) {\n  let p = [...progresses];\n  p.sort((a, b) => b - a);\n  return (\n    <div\n      className={classNames(\n        'twind-relative twind-h-3 twind-rounded-r-md twind-rounded-l-lg twind-bg-progressBar',\n        className,\n      )}\n      {...rest}\n    >\n      {p.map((progress, i) => (\n        <div\n          key={i}\n          className=\"twind-absolute twind-left-0 twind-h-full twind-rounded-lg\"\n          style={{\n            width: progress * 100 + '%',\n            background: COLORS[i],\n          }}\n        ></div>\n      ))}\n    </div>\n  );\n}\n","import React from 'react';\nexport function Tokens({ tokenName }) {\n\n    const tokens = {\n        NEAR: (<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20pt\" height=\"20pt\" viewBox=\"0 0 864.000000 864.000000\" preserveAspectRatio=\"xMidYMid meet\"><g transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\" fill=\"#000000\" stroke=\"none\"><path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" /></g></svg>),\n        fallback: (<svg version=\"1.0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20pt\" height=\"20pt\" viewBox=\"0 0 864.000000 864.000000\" preserveAspectRatio=\"xMidYMid meet\"><g transform=\"translate(0.000000,864.000000) scale(0.100000,-0.100000)\" fill=\"#000000\" stroke=\"none\"><path d=\"M2490 6461 c-164 -53 -265 -156 -314 -320 -14 -49 -16 -226 -16 -1821 0 -1595 2 -1772 16 -1821 25 -85 62 -148 118 -205 179 -178 476 -178 650 0 30 30 249 347 519 749 518 772 502 742 438 799 -21 19 -42 28 -66 28 -40 0 -6 28 -555 -449 -283 -246 -411 -351 -425 -349 -20 3 -20 11 -20 1238 l0 1235 21 3 c16 2 286 -315 1376 -1621 746 -892 1372 -1637 1392 -1654 94 -83 187 -113 351 -113 169 0 275 39 371 134 56 57 93 120 118 205 14 49 16 226 16 1821 0 1595 -2 1772 -16 1821 -25 85 -62 148 -118 205 -179 178 -476 178 -650 0 -30 -30 -249 -347 -519 -749 -518 -772 -502 -742 -438 -799 21 -19 42 -28 66 -28 40 0 6 -28 555 449 283 246 411 351 425 349 20 -3 20 -11 20 -1238 l0 -1235 -21 -3 c-16 -2 -286 315 -1376 1621 -746 892 -1372 1637 -1392 1654 -95 85 -187 113 -356 112 -82 0 -131 -5 -170 -18z\" /></g></svg>)\n    }\n\n    return tokens[tokenName] || tokens[\"fallback\"]\n}","import React from 'react';\nimport {Tokens} from '../../icons/Tokens';\nimport classNames from 'classnames';\nexport function TokenImage({tokenName, size = 8, className, ...rest}) {\n  return (\n    <div\n      className={classNames(\n        ' twind-flex-shrink-0 twind-rounded-lg twind-bg-card2 twind-inline-flex twind-items-center twind-justify-center',\n        `twind-w-${size} twind-h-${size}`,\n        className,\n      )}\n    >\n      <Tokens tokenName={tokenName} />\n    </div>\n  );\n}\n","const GAS_SIZE = '200000000000000';\nconst NOT_ZERO_NEAR_AMOUNT = 1;\n\nexport function NearContractApi(near) {\n  console.log('NearContractApi', near);\n\n  const contract = near.contract;\n\n  const getAccount = async (accountId) => {\n    try {\n      if (!accountId) {\n        return [];\n      }\n      return await contract.get_account({account_id: accountId});\n    } catch (e) {\n      console.log('near error', e);\n    }\n    return [];\n  };\n\n  const getCurrentAccount = () =>\n    getAccount(near.walletConnection.getAccountId());\n\n  async function updateAccount() {\n    const res = await contract.update_account(\n      {\n        account_id: near.account.accountId,\n      },\n      GAS_SIZE,\n    );\n    return res;\n  }\n\n  async function depositStream({streamId, deposit}) {\n    const res = await contract.deposit(\n      {stream_id: streamId},\n      GAS_SIZE,\n      deposit,\n    );\n\n    return res;\n  }\n\n  async function pauseStream({streamId}) {\n    const res = await contract.pause_stream(\n      {stream_id: streamId},\n      GAS_SIZE,\n      NOT_ZERO_NEAR_AMOUNT,\n    );\n\n    return res;\n  }\n\n  async function startStream({streamId}) {\n    const res = await contract.start_stream(\n      {stream_id: streamId},\n      GAS_SIZE,\n      NOT_ZERO_NEAR_AMOUNT,\n    );\n\n    return res;\n  }\n\n  async function stopStream({streamId}) {\n    const res = await contract.stop_stream(\n      {stream_id: streamId},\n      GAS_SIZE,\n      NOT_ZERO_NEAR_AMOUNT,\n    );\n    return res;\n  }\n\n  async function createStream({\n    deposit,\n    ownerId,\n    receiverId,\n    token,\n    speed,\n    description,\n    autoDepositEnabled = false,\n  }) {\n    const res = await contract.create_stream(\n      {\n        owner_id: ownerId,\n        receiver_id: receiverId,\n        token_name: token,\n        tokens_per_tick: speed,\n        auto_deposit_enabled: autoDepositEnabled,\n        description,\n      },\n      GAS_SIZE,\n      deposit,\n    );\n\n    return res;\n  }\n\n  async function getStream({streamId}) {\n    const res = await contract.get_stream({\n      stream_id: streamId,\n    });\n\n    return res;\n  }\n\n  return {\n    getCurrentAccount,\n    updateAccount,\n    getAccount,\n    createStream,\n    depositStream,\n    pauseStream,\n    startStream,\n    stopStream,\n    getStream,\n  };\n}\n","export const env = {\n  ACCOUNT_SUFFIX: process.env.REACT_APP_NEAR_ACCOUNT_SUFFIX,\n  NEAR_NETWORK_ID: process.env.REACT_APP_NEAR_NETWORK_ID,\n  NEAR_NODE_URL: process.env.REACT_APP_NEAR_NODE_URL,\n  CONTRACT_NAME: process.env.REACT_APP_CONTRACT_NAME,\n  WALLET_URL: process.env.REACT_APP_WALLET_URL,\n  FT_CONTRACT_NAME: process.env.REACT_APP_FT_CONTRACT_NAME,\n};\n","import {env} from '../../lib/environment';\n\nexport const NEAR_CONFIG = {\n  accountSuffix: env.NEAR_ACCOUNT_SUFFIX,\n  networkId: env.NEAR_NETWORK_ID,\n  nodeUrl: env.NEAR_NODE_URL,\n  contractName: env.CONTRACT_NAME,\n  walletUrl: env.WALLET_URL,\n  ft: env.FT_CONTRACT_NAME,\n};\n","import React, {useContext, useEffect, useState} from 'react';\nimport * as nearAPI from 'near-api-js';\nimport {NearContractApi} from './near-contract-api';\nimport {NEAR_CONFIG as NearConfig} from './config';\n\nexport const NearContext = React.createContext({\n  inited: false,\n  near: {\n    keyStore: null,\n    near: null,\n    walletConnection: null,\n    accountId: null,\n    contract: null,\n    ft: null,\n  },\n  auth: {\n    signedIn: false,\n    signedAccountId: null,\n  },\n  contractApi: NearContractApi({}),\n  refreshAllowance: () => {},\n  login: () => {},\n  logout: () => {},\n});\n\nasync function createNearInstance() {\n  const keyStore = new nearAPI.keyStores.BrowserLocalStorageKeyStore();\n  const near = await nearAPI.connect(\n    Object.assign({deps: {keyStore}}, NearConfig),\n  );\n\n  const _near = {\n    keyStore: null,\n    near: null,\n    walletConnection: null,\n    accountId: null,\n    contract: null,\n    ft: null,\n  };\n\n  _near.keyStore = keyStore;\n  _near.near = near;\n\n  _near.walletConnection = new nearAPI.WalletConnection(\n    near,\n    NearConfig.contractName,\n  );\n  _near.accountId = _near.walletConnection.getAccountId();\n\n  _near.account = _near.walletConnection.account();\n  _near.contractName = NearConfig.contractName;\n  _near.contract = new nearAPI.Contract(\n    _near.account,\n    NearConfig.contractName,\n    {\n      viewMethods: ['get_account', 'get_stream'],\n      changeMethods: [\n        'create_stream',\n        'deposit',\n        'update_account',\n        'start_stream',\n        'pause_stream',\n        'stop_stream',\n      ],\n    },\n  );\n\n  // TODO set multiple\n  _near.ft = new nearAPI.Contract(_near.account, NearConfig.ft, {\n    viewMethods: ['ft_balance_of'],\n    changeMethods: ['ft_transfer', 'ft_transfer_call'],\n  });\n\n  return _near;\n}\n\nexport function useCreateNear() {\n  const apiRef = React.useRef(null);\n\n  const [inited, setInited] = useState(false);\n  const [near, setNear] = useState({\n    keyStore: null,\n    near: null,\n    walletConnection: null,\n    accountId: null,\n    contract: null,\n    ft: null,\n  });\n\n  const auth = {\n    signedIn: !!near.accountId,\n    signedAccountId: near.accountId,\n  };\n\n  async function login() {\n    const appTitle = 'Streaming Xyiming';\n\n    await near.walletConnection.requestSignIn(\n      NearConfig.contractName,\n      appTitle,\n    );\n  }\n\n  function logout() {\n    near.walletConnection.signOut();\n\n    setNear({\n      ...near,\n      accountId: null,\n    });\n  }\n\n  async function refreshAllowance() {\n    alert(\n      \"You're out of access key allowance. Need sign in again to refresh it\",\n    );\n    await logout();\n    // await requestSignIn();\n  }\n\n  useEffect(() => {\n    const init = async () => {\n      const _near = await createNearInstance();\n\n      apiRef.current = NearContractApi(_near);\n      setNear(_near);\n      setInited(true);\n    };\n\n    init();\n  }, []);\n\n  return {\n    auth,\n    near,\n    contractApi: apiRef.current,\n    inited,\n    login,\n    logout,\n    refreshAllowance,\n  };\n}\n\nconst ERR_NOT_IN_NEAR_CONTEXT = new Error('Near context is not found');\n\nexport function useNear() {\n  const near = useContext(NearContext);\n  const insideContext = !!near;\n\n  if (!insideContext) {\n    throw ERR_NOT_IN_NEAR_CONTEXT;\n  }\n\n  return near;\n}\n","import numbro from 'numbro';\n\nexport const tokens = {\n  NEAR: {\n    decimals: 24,\n    name: 'Near',\n  },\n  TARAS: {\n    decimals: 18,\n    name: 'Taras',\n  },\n  fallback: {\n    decimals: 18,\n  },\n};\n\nexport function TokenFormatter(tokenName) {\n  let token = tokens[tokenName] || tokens.fallback;\n\n  const TICK_TO_MS = Math.pow(10, 6);\n  const TICK_TO_S = Math.pow(10, 9);\n  const MP = Math.pow(10, token.decimals);\n\n  return {\n    tokenPerSecondToInt: (tps) =>\n      numbro(tps).multiply(MP).divide(TICK_TO_S).format({mantissa: 0}),\n    toInt: (floatValue) =>\n      numbro(floatValue).multiply(MP).format({mantissa: 0}),\n    amount: (amount) =>\n      numbro(amount).divide(MP).format({\n        mantissa: 2,\n      }),\n    tokensPerMS: (tokensPerTick) =>\n      numbro(tokensPerTick)\n        .multiply(TICK_TO_MS)\n        .divide(MP)\n        .format({\n          mantissa: token.decimals - 6,\n          trimMantissa: true,\n        }),\n    tokensPerS: (tokensPerTick) =>\n      numbro(tokensPerTick)\n        .multiply(TICK_TO_S)\n        .divide(MP)\n        .format({\n          mantissa: token.decimals - 6,\n          trimMantissa: true,\n        }),\n    ticksToMs: (ticks) => Math.round(ticks / TICK_TO_MS),\n  };\n}\n","import React from 'react';\n\nexport const Copy = () => (\n  <svg\n    width=\"17\"\n    height=\"16\"\n    viewBox=\"0 0 17 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M12.1884 4.70767H13.2423C14.6173 4.70767 15.7319 5.82227 15.7319 7.1972V12.6244C15.7319 13.9994 14.6173 15.114 13.2423 15.114H7.81509C6.44016 15.114 5.32556 13.9994 5.32556 12.6244V11.5705\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.65968\"\n    />\n    <rect\n      x=\"1.46289\"\n      y=\"1.3735\"\n      width=\"10.4063\"\n      height=\"10.4063\"\n      rx=\"2.48952\"\n      stroke=\"currentColor\"\n      strokeWidth=\"1.65968\"\n    />\n  </svg>\n);\n","import React from 'react';\nexport const Send = () => (\n  <svg\n    width=\"12\"\n    height=\"12\"\n    viewBox=\"0 0 12 12\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M10.5309 10.5238L1.9707 1.96368M1.9707 1.96368V10.5238M1.9707 1.96368H10.5308\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2.5\"\n      strokeLinecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\nexport const Streams = () => (\n  <svg\n    width=\"14\"\n    height=\"14\"\n    viewBox=\"0 0 14 14\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <circle cx=\"2.08925\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n    <circle cx=\"11.1691\" cy=\"2.03994\" r=\"2.03994\" fill=\"currentColor\" />\n    <circle cx=\"2.08925\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n    <circle cx=\"11.1691\" cy=\"11.1198\" r=\"2.03994\" fill=\"currentColor\" />\n  </svg>\n);\n","import React from 'react';\nexport const StreamIn = () => (\n  <svg\n    width=\"16\"\n    height=\"17\"\n    viewBox=\"0 0 16 17\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M0.999991 1.84371L8.23523 9.07889M8.23523 9.07889V1.84371M8.23523 9.07889H1.00004\"\n      stroke=\"#2EDDD9\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n    />\n    <path\n      d=\"M12.1637 6.27124C13.5911 7.14289 14.5438 8.71524 14.5438 10.5101C14.5438 13.2512 12.3218 15.4733 9.58068 15.4733C7.7858 15.4733 6.21344 14.5205 5.3418 13.0931\"\n      stroke=\"#2EDDD9\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\nexport const StreamOut = () => (\n  <svg\n    width=\"16\"\n    height=\"17\"\n    viewBox=\"0 0 16 17\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M8.23528 9.07894L1 1.8437M1 1.8437V9.07894M1 1.8437H8.23523\"\n      stroke=\"#F56173\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n    />\n    <path\n      d=\"M12.1637 6.27117C13.591 7.14282 14.5438 8.71519 14.5438 10.5101C14.5438 13.2512 12.3217 15.4733 9.58065 15.4733C7.78575 15.4733 6.21339 14.5205 5.34174 13.0931\"\n      stroke=\"#F56173\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const Account = () => (\n  <svg\n    width=\"17\"\n    height=\"17\"\n    viewBox=\"0 0 17 17\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M1.35828 8.21811C1.35828 7.03631 1.88087 5.91501 2.78586 5.15499L6.96214 1.64773C7.70587 1.02314 8.79082 1.02314 9.53456 1.64773L13.7108 5.15499C14.6158 5.91501 15.1384 7.03631 15.1384 8.2181V12.4077C15.1384 14.0646 13.7953 15.4077 12.1384 15.4077H4.35827C2.70142 15.4077 1.35828 14.0646 1.35828 12.4077V8.21811Z\"\n      stroke=\"currentColor\"\n      stroke-width=\"2\"\n      stroke-linecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const Plus = (props) => (\n  <svg\n    width=\"13\"\n    height=\"13\"\n    viewBox=\"0 0 13 13\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M6.62713 1.5929L6.62709 6.50002M6.62705 11.4071L6.62709 6.50002M6.62709 6.50002L11.5342 6.50002M6.62709 6.50002L1.72001 6.50002\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const Start = (props) => (\n  <svg\n    width=\"8\"\n    height=\"8\"\n    viewBox=\"0 0 8 8\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M7.17026 3.36901C7.72501 3.6893 7.72501 4.49002 7.17026 4.81031L2.10367 7.7355C1.54891 8.05579 0.855469 7.65543 0.855469 7.01486L0.85547 1.16446C0.85547 0.523887 1.54891 0.123526 2.10367 0.443814L7.17026 3.36901Z\"\n      fill=\"#2EDDD9\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const Stop = (props) => (\n  <svg\n    width=\"11\"\n    height=\"11\"\n    viewBox=\"0 0 11 11\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <rect\n      x=\"0.429626\"\n      y=\"0.930298\"\n      width=\"9.58382\"\n      height=\"9.58382\"\n      rx=\"2\"\n      fill=\"#F56173\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const Pause = (props) => (\n  <svg\n    width=\"11\"\n    height=\"11\"\n    viewBox=\"0 0 11 11\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <path\n      d=\"M2.42963 2.28638V8.60681\"\n      stroke=\"#FFAB6A\"\n      stroke-width=\"3\"\n      stroke-linecap=\"round\"\n    />\n    <path\n      d=\"M8.76996 2.28638V8.60681\"\n      stroke=\"#FFAB6A\"\n      stroke-width=\"3\"\n      stroke-linecap=\"round\"\n    />\n  </svg>\n);\n","import React from 'react';\n\nexport const PlusGradient = (props) => (\n  <svg\n    width=\"30\"\n    height=\"30\"\n    viewBox=\"0 0 30 30\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    {...props}\n  >\n    <circle cx=\"14.5566\" cy=\"14.7314\" r=\"14.5\" fill=\"url(#paint0_linear)\" />\n    <path\n      d=\"M14.7506 10.7635L14.7506 14.7314M14.7506 18.6993L14.7506 14.7314M14.7506 14.7314L18.7185 14.7314M14.7506 14.7314L10.7827 14.7314\"\n      stroke=\"#1F1D37\"\n      stroke-width=\"2.5\"\n      stroke-linecap=\"round\"\n    />\n    <defs>\n      <linearGradient\n        id=\"paint0_linear\"\n        x1=\"-2.34261\"\n        y1=\"7.84647\"\n        x2=\"34.6054\"\n        y2=\"32.139\"\n        gradientUnits=\"userSpaceOnUse\"\n      >\n        <stop stop-color=\"#FF856A\" />\n        <stop offset=\"1\" stop-color=\"#FFCD6A\" />\n      </linearGradient>\n    </defs>\n  </svg>\n);\n","import React, {useState} from 'react';\nimport useSWR from 'swr';\n\nimport {NEAR, loader, TARAS} from '../components/Helpers';\nimport {FormField, Input, Button} from '../components/kit';\nimport {useNear} from '../features/near-connect/useNear';\nimport {DropdownMenu, DropdownMenuItem} from '../components/kit/DropdownMenu';\nimport {DropdownOpener} from '../components/kit/DropdownOpener';\nimport {RadioButton} from '../components/kit/RadioButton';\nimport {DropdownArrowDown} from '../components/icons/DropdownArrowDown';\nimport classNames from 'classnames';\nimport {tokens} from '../lib/formatting';\nimport {Tokens, Streams} from '../components/icons'\nimport {TokenFormatter} from '../lib/formatting.js'\n\nfunction SendPage() {\n  const near = useNear();\n  const profileId = near.auth.signedAccountId;\n\n  const [dropdownOpened, setDropdownOpened] = useState(false);\n  const [dropdownActive, setDropdownActive] = useState('NEAR');\n\n  const [days, setDays] = useState(0.0);\n  const [minutes, setMinutes] = useState(0);\n  const [hourse, setHourse] = useState(0);\n  const [deposit, setDeposit] = useState(0.0);\n  const [comment, setComment] = useState();\n  const [errors, setError] = useState({});\n\n  const tokensNames = Object.keys(tokens).filter((item) => item !== 'fallback')\n  const dropdownOnChange = (value) => {\n    console.log(value);\n    setDropdownActive(value);\n  }\n\n  function radioClick(e, token) {\n    setDropdownActive(token);\n  }\n\n  async function createStreamClick(e) {\n    e.preventDefault();    \n    const formatter = TokenFormatter(dropdownActive);  \n\n    const ownerId = document.getElementById('ownerInput').value;\n    const receiverId = document.getElementById('receiverInput').value;\n    const speed = deposit/(days*3600*24+minutes*60+hourse*3600)\n\n    const res = await near.contractApi.createStream({\n      deposit: formatter.toInt(deposit),\n      description: comment,\n      ownerId: ownerId,\n      receiverId: receiverId,\n      token: dropdownActive,\n      speed: formatter.tokenPerSecondToInt(speed),\n      autoDepositEnabled: false,\n    });\n  }\n\n  const fetchAccount = async (...args) => {\n    try {\n      if (!profileId) {\n        return [];\n      }\n      return await near.near.contract.get_account({account_id: profileId});\n    } catch (e) {\n      console.log('near error', e);\n    }\n    return [];\n  };\n\n  const {data: account} = useSWR(['account', profileId], fetchAccount, {\n    errorRetryInterval: 250,\n  });\n\n  \n  return (\n    <div className=\"twind-container twind-m-auto twind-px-5 twind-py-12\">\n      <div className=\"twind-text-center\">\n        <h1 className=\"twind-text-5xl twind-mb-4 twind-text-center\">\n          Create a stream\n        </h1>\n        <p className=\"twind-text-gray\">\n          Stream your tokens to the receiver directly\n        </p>\n      </div>\n\n      <form\n        className=\"twind-max-w-lg twind-mx-auto twind-w-full\"\n        onSubmit={(e) => createStreamClick(e)}\n      >\n        <FormField label=\"Owner:\" className=\"twind-mb-4\">\n          <Input>\n            <input\n              required\n              placeholder=\"owner.near\"\n              id=\"ownerInput\"\n              value={near.near.accountId}\n            />\n          </Input>\n        </FormField>\n\n        <FormField label=\"Receiver:\" className=\"twind-mb-4\">\n          <Input>\n            <input required id=\"receiverInput\" placeholder=\"root.near\" />\n          </Input>\n        </FormField>\n\n        <div className=\"twind-flex twind-mb-4\">\n          <FormField label=\"Token:\" className=\"twind-w-1/3 twind-items-center twind-relative\">\n              <DropdownOpener\n                className=\"twind-bg-input focus-within:twind-border-blue hover:twind-border-blue twind-text-xl twind-h-14\"\n                onClick={() => setDropdownOpened(!dropdownOpened)}\n              >\n      \n                <div className=\"twind-inline-flex\">\n                          {<Tokens tokenName={dropdownActive}/>}{\" \"}\n                          <span>{dropdownActive}</span>\n                </div>\n              </DropdownOpener>\n        \n              <DropdownMenu opened={dropdownOpened} className=\"twind-z-10\">\n                {tokensNames.map((option) => (\n                  <DropdownMenuItem className=\"twind-bg-input\">\n                    <RadioButton\n                      label={\n                        <div className=\"twind-inline-flex\">\n                          {<Tokens tokenName={option}/>}{\" \"}\n                          <span>{option}</span>\n                        </div>\n                        }\n                      active={dropdownActive === option}\n                      value={option}\n                      onChange={(value) => \n                        {\n                          setDropdownOpened(false)\n                          setDropdownActive(value)\n                        }\n                      }\n                    />\n                  </DropdownMenuItem>\n                ))}\n              </DropdownMenu>\n          </FormField>\n  \n          <FormField label=\"Amount to stream:\" className=\"twind-w-2/3\">\n              <Input>\n                <input requried placeholder=\"0.00\" id=\"depositInput\" \n                value={deposit}\n                onChange={(e) => (setDeposit(e.target.value))}\n                />\n              </Input>\n            </FormField>\n         </div>\n\n\n\n         <div className=\"twind-block twind-mb-4\">\n            <div className=\"twind-relative\">\n              <div>Stream duration:</div>\n              <div className=\"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1\">Streaming speed: {days+minutes+hourse === 0 ? 0 :(deposit/(days*3600*24+minutes*60+hourse*3600)).toFixed(6)} {dropdownActive} / sec</div>\n            </div>\n            <div className=\"twind-flex\" label=\"Stream duration\">\n                  <div\n                      className='twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-l-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue'\n                  >\n                    <input\n                      className='focus:twind-outline-none input twind-bg-input twind-w-1/3'\n                      required\n                      id=\"daysInput\"\n                      placeholder=\"0\"\n                      describedby=\"basic-addon2\"\n                      value={days}\n                      onChange={(e) => {\n                        setDays(e.target.value)\n                      }}\n                    />\n                  <div className=\"twind-right-2 twind-opacity-100 twind-w-1/3\">days</div>\n                  </div>\n                   <div\n                      className='twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue'\n                  >\n                  <input\n                      className='focus:twind-outline-none input twind-bg-input twind-w-1/3'\n                      required\n                    id=\"hourseInput\"\n                    placeholder=\"0\"\n                    describedby=\"basic-addon2\"\n                    value={hourse}\n                    onChange={(e) => setHourse(e.target.value)}\n                  />\n                   <div className=\"twind-right-2 twind-opacity-100 twind-w-1/3\">hourse</div>\n                   </div>\n                   <div\n                      className='twind-w-1/3 input twind-font-semibold twind-flex twind-p-4 twind-rounded-r-lg twind-border-border twind-border twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue'\n                  >\n                  <input\n                      className='focus:twind-outline-none input twind-bg-input twind-w-1/3'\n                      required\n                    id=\"minutesInput\"\n                    placeholder=\"0\"\n                    describedby=\"basic-addon2\"\n                    value={minutes}\n                    onChange={(e) => setMinutes(e.target.value)}\n                  />\n                  <div className=\"twind-right-2 twind-opacity-100 twind-w-1/3\">mins</div>\n                  </div>\n            </div>\n        </div>\n\n        <FormField>\n          <label className=\"twind-block twind-mb-6 twind-relative\">\n            <div className=\"twind-text-xs twind-text-gray twind-absolute twind-right-0 twind-top-1\">{(comment && comment.length) || 0}/255</div>\n            <div className=\"twind-mb-1\">Comment:</div>\n            <div>\n              <label\n                  className=\"twind-h-40 Input twind-font-semibold twind-flex twind-p-4 twind-pt-0 twind-rounded-lg twind-border  twind-bg-input twind-text-white focus-within:twind-border-blue hover:twind-border-blue twind-border-border\"\n              >\n                \n                <textarea id=\"commentInput\"\n                  className=\" twind-bg-input  twind-w-full twind-h-full twind-pt-2 focus:twind-outline-none twind-resize-none\"\n                  placeholder=\"Enter comment\"\n                  maxlength=\"255\"\n                  value={comment}\n                  onChange={(e) => {\n                    // e.target.value > 255 ? set\n                    setComment(e.target.value)\n                  }}/>\n            </label>\n            </div>\n          </label>\n        </FormField> \n\n        <div className=\"twind-flex twind-relaitive\">\n          <div><p className=\"twind-text-left twind-text-gray twind-w-2/3 twind-text-sm\">\n            You will be charged 0.1 NEAR fee for that stream\n          </p></div>\n          <Button variant=\"main\" className=\"twind-mx-auto twind-right-0\">\n            Create Stream\n          </Button>\n        </div>\n        \n      </form>\n    </div>\n  );\n}\n\nexport default SendPage;\n","import React from 'react';\nimport {Button} from '../../components/kit';\nimport {useNearAuth} from './useNearAuth';\n\nexport function NearAuthButton(props) {\n  const {inited, logout, login, accountId, signedIn} = useNearAuth();\n\n  if (!inited) {\n    return (\n      <Button {...props}>\n        Connecting...{' '}\n        <span\n          className=\"spinner-grow spinner-grow-sm\"\n          role=\"status\"\n          aria-hidden=\"true\"\n        />\n      </Button>\n    );\n  }\n\n  return signedIn ? (\n    <Button onClick={logout} {...props}>\n      Sign out ({accountId})\n    </Button>\n  ) : (\n    <Button onClick={login} {...props}>\n      Sign in with NEAR Wallet\n    </Button>\n  );\n}\n","import {useNear} from '../near-connect/useNear';\n\nexport function useNearAuth() {\n  const near = useNear();\n\n  async function login(e) {\n    e && e.preventDefault();\n    await near.login();\n    return false;\n  }\n\n  async function logout(e) {\n    await near.logout();\n  }\n  return {\n    accountId: near.auth.signedAccountId,\n    signedIn: near.auth.signedIn,\n    inited: near.inited,\n    login,\n    logout,\n  };\n}\n","export const routes = {\n  authorize: '/authorize',\n  account: '/account',\n  myStreams: '/my_streams',\n  send: '/',\n  receive: '/receive',\n  stream: (id) => `/my_streams/${id}`,\n};\n","export default __webpack_public_path__ + \"static/media/logo_stream_with_text.765f9ae8.svg\";","import React from 'react';\nimport * as icons from './icons';\nimport {NavLink} from './kit';\nimport {NearAuthButton} from '../features/near-auth/NearAuthButton';\nimport classNames from 'classnames';\nimport {routes} from '../lib/routing';\nimport LogoText from '../images/logo_stream_with_text.svg';\n\nexport function Header() {\n  const navigation = (\n    <ul className=\"twind-flex-col lg:twind-flex-row twind-flex twind-justify-center \">\n      <li className=\"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0\">\n        <NavLink to={routes.account} icon={<icons.Account />}>\n          Account\n        </NavLink>\n      </li>\n      <li className=\"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0\">\n        <NavLink to={routes.myStreams} icon={<icons.Streams />}>\n          My Streams\n        </NavLink>\n      </li>\n      <li className=\"twind-mb-2 lg:twind-mr-2 lg:twind-mb-0\">\n        <NavLink to={routes.send} icon={<icons.Send />}>\n          Send\n        </NavLink>\n      </li>\n    </ul>\n  );\n\n  const logo = (\n    <div className=\"twind-flex twind-justify-start twind-items-center\">\n      <img src={LogoText} alt=\"xyiming logo\" />\n    </div>\n  );\n  return (\n    <div className=\"twind-py-4 twind-px-6\">\n      <div\n        className={classNames(\n          'twind-hidden lg:twind-grid twind-items-center twind-grid-cols-3 twind-gap-3 ',\n        )}\n      >\n        {logo}\n        {navigation}\n        <div className=\"twind-flex twind-justify-end\">\n          <NearAuthButton />\n        </div>\n      </div>\n\n      <div className={classNames('lg:twind-hidden', 'navbar-dark')}>\n        <div className=\"twind-flex twind-justify-between\">\n          {logo}\n\n          <button\n            className=\"navbar-toggler\"\n            type=\"button\"\n            data-bs-toggle=\"collapse\"\n            data-bs-target=\"#navbarSupportedContent\"\n            aria-controls=\"navbarSupportedContent\"\n            aria-expanded=\"false\"\n            aria-label=\"Toggle navigation\"\n          >\n            <span className=\"navbar-toggler-icon\" />\n          </button>\n        </div>\n        <div\n          className=\"collapse navbar-collapse twind-mt-4\"\n          id=\"navbarSupportedContent\"\n        >\n          {navigation}\n          <NearAuthButton className=\"mt-4\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport {streamViewData} from '.';\nimport {StreamIn, StreamOut} from '../../components/icons';\nimport classNames from 'classnames';\n\nexport function StreamingSpeed({stream, className, ...rest}) {\n  const direction = stream.direction;\n  const {tf} = streamViewData(stream);\n\n  return (\n    <div\n      className={classNames(\n        'twind-inline-flex twind-items-center twind-whitespace-nowrap',\n        className,\n      )}\n      {...rest}\n    >\n      {direction === 'out' ? <StreamOut /> : <StreamIn />}\n      <span className=\"twind-ml-2\">\n        <span>@{tf.tokensPerS(stream.tokens_per_tick)}</span>\n        <span> {stream.token_name} / Sec</span>\n      </span>\n    </div>\n  );\n}\n","import React from 'react';\nimport {useNear} from '../near-connect/useNear';\n\nconst STREAM_CONTROL_ID_NOT_PROVIDED = new Error(\n  'Provide stream id to use stream methods',\n);\n\nexport function useStreamControl(streamId) {\n  const ensureMethodHasStreamId = () => {\n    if (!streamId) throw STREAM_CONTROL_ID_NOT_PROVIDED;\n  };\n  const near = useNear();\n  const [loading, setLoading] = React.useState(false);\n\n  async function updateAllAndWithdraw() {\n    console.log('updating all account');\n\n    await near.contractApi.updateAccount({});\n    console.log('update completed');\n  }\n\n  async function deposit({deposit}) {\n    ensureMethodHasStreamId();\n    console.log('depositing', streamId);\n    await near.contractApi.depositStream({\n      streamId,\n      deposit,\n    });\n  }\n\n  async function deposit_ft({deposit}) {\n    console.log('depositing ft', streamId);\n    await near.near.ft.ft_transfer_call(\n      {\n        receiver_id: near.near.contractName,\n        amount: deposit,\n        memo: 'xyiming transfer',\n        msg: streamId,\n      },\n      '200000000000000',\n      1,\n    );\n  }\n\n  async function pause() {\n    ensureMethodHasStreamId();\n    console.log('pausing', streamId);\n    const res = await near.contractApi.pauseStream({\n      streamId,\n    });\n    console.log('pausing res', res);\n\n    return res;\n  }\n\n  async function restart() {\n    ensureMethodHasStreamId();\n    console.log('restarting', streamId);\n    const res = await near.contractApi.startStream({streamId: streamId});\n    console.log('restarting res', res);\n\n    return res;\n  }\n\n  async function stop() {\n    ensureMethodHasStreamId();\n    console.log('Stop called stopping', streamId);\n    const res = await near.contractApi.stopStream({streamId: streamId});\n    console.log('stopping res', res);\n    return res;\n  }\n\n  function wrapped(fn) {\n    return async (...args) => {\n      if (loading) return;\n\n      setLoading(true);\n\n      try {\n        return await fn(...args);\n      } finally {\n        setLoading(false);\n      }\n    };\n  }\n\n  return {\n    loading,\n    updateAllAndWithdraw: wrapped(updateAllAndWithdraw),\n    pause: wrapped(pause),\n    restart: wrapped(restart),\n    stop: wrapped(stop),\n    deposit: wrapped(deposit),\n    deposit_ft: wrapped(deposit_ft),\n  };\n}\n","export const STREAM_STATUS = {\n  INITIALIZED: 'INITIALIZED',\n  ACTIVE: 'ACTIVE',\n  PAUSED: 'PAUSED',\n  FINISHED: 'FINISHED',\n  INTERRUPTED: 'INTERRUPTED',\n};\nexport const STREAM_DIRECTION = {\n  IN: 'in',\n  OUT: 'out',\n};\n","import {STREAM_STATUS} from './lib';\nimport classNames from 'classnames';\n\nexport function StreamStatus({stream, className, ...rest}) {\n  const bindings = {\n    [STREAM_STATUS.INITIALIZED]: {\n      colorClass: 'twind-text-special-active',\n      label: 'Initialized',\n    },\n    [STREAM_STATUS.ACTIVE]: {\n      colorClass: 'twind-text-special-active',\n      label: 'Active',\n    },\n    [STREAM_STATUS.PAUSED]: {\n      colorClass: 'twind-text-special-hold',\n      label: 'Paused',\n    },\n    [STREAM_STATUS.FINISHED]: {\n      colorClass: 'twind-text-special-active',\n      label: 'Finished',\n    },\n    [STREAM_STATUS.INTERRUPTED]: {\n      colorClass: 'twind-text-special-inactive',\n      label: 'Interrupted',\n    },\n  };\n\n  const binding = bindings[stream.status] || {};\n\n  return (\n    <div className={classNames(binding.colorClass, className)} {...rest}>\n      {binding.label}\n    </div>\n  );\n}\n","import React, {useState} from 'react';\nimport {useStreamControl} from './useStreamControl';\nimport {useNear} from '../near-connect/useNear';\nimport {\n  DropdownOpener,\n  DropdownMenu,\n  DropdownMenuDivider,\n  DropdownMenuItem,\n} from '../../components/kit';\nimport {StreamStatus} from './StreamStatus';\nimport {STREAM_STATUS} from './lib';\nimport {Stop, Pause, Start} from '../../components/icons';\nimport classNames from 'classnames';\n\nexport function StreamControls({stream, minimal, className}) {\n  const near = useNear();\n  const isOutgoing = near.near.accountId === stream.owner_id;\n  const isDead =\n    stream.status === STREAM_STATUS.INTERRUPTED ||\n    stream.status === STREAM_STATUS.FINISHED;\n  const [menuOpened, setMenuOpened] = useState(false);\n\n  const controls = useStreamControl(stream.stream_id);\n\n  if (controls.loading) {\n    return <span>Loading!</span>;\n  }\n\n  if (isDead) {\n    return <StreamStatus stream={stream} />;\n  }\n\n  return (\n    <div className={classNames(className, 'twind-relative twind-inline-flex')}>\n      <DropdownOpener\n        minimal={minimal}\n        opened={menuOpened}\n        onClick={() => setMenuOpened(!menuOpened)}\n      >\n        <StreamStatus stream={stream} />\n      </DropdownOpener>\n      <DropdownMenu opened={menuOpened} className=\"twind-w-36\">\n        {stream.status !== STREAM_STATUS.ACTIVE && isOutgoing ? (\n          <>\n            <DropdownMenuItem>\n              <button\n                className=\"twind-inline-flex twind-items-center\"\n                onClick={controls.restart}\n              >\n                <Start className=\"twind-mr-2 twind-flex-shrink-0\" />\n                <span>Start stream </span>{' '}\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        ) : null}\n        {stream.status !== STREAM_STATUS.PAUSED ? (\n          <>\n            <DropdownMenuItem>\n              <button\n                className=\"twind-inline-flex twind-items-center\"\n                onClick={controls.pause}\n              >\n                <Pause className=\"twind-mr-2 twind-flex-shrink-0\" />\n                <span>Pause stream</span>\n              </button>\n            </DropdownMenuItem>\n            <DropdownMenuDivider />\n          </>\n        ) : null}\n\n        <DropdownMenuItem>\n          <button\n            className=\"twind-inline-flex twind-items-center\"\n            onClick={controls.stop}\n          >\n            <Stop className=\"twind-mr-2 twind-flex-shrink-0\" />\n            <span> Stop stream </span>\n          </button>\n        </DropdownMenuItem>\n      </DropdownMenu>\n    </div>\n  );\n}\n","import React, {useState} from 'react';\nimport {Button, Input} from '../../components/kit';\nimport {useStreamControl} from './useStreamControl';\nimport {TokenFormatter} from '../../lib/formatting';\nimport {useBool} from '../../lib/useBool';\nimport Modal from 'react-modal';\nimport {Plus, PlusGradient} from '../../components/icons';\n\nfunction useDepositButton({stream}) {\n  const controls = useStreamControl(stream.stream_id);\n  const [deposit, setDeposit] = useState('');\n  const tf = TokenFormatter(stream.token_name);\n  const modalControl = useBool(false);\n\n  const modal = (\n    <Modal\n      isOpen={modalControl.on}\n      onRequestClose={modalControl.turnOff}\n      className=\"ModalContent\"\n      overlayClassName=\"ModalOverlay\"\n    >\n      <h2 className=\"twind-text-2xl twind-mb-6\">Amount to deposit</h2>\n      <Input className=\"twind-mb-4\">\n        <input\n          placeholder={`0.00 ${stream.token_name}`}\n          className=\"twind-text-black\"\n          value={deposit}\n          onChange={(e) => setDeposit(e.target.value)}\n        />\n      </Input>\n\n      <Button\n        className=\"twind-w-full\"\n        variant=\"filled\"\n        type=\"button\"\n        onClick={() => stream.token_name === 'NEAR' ? controls.deposit({deposit: tf.toInt(deposit)}) : controls.deposit_ft({deposit: tf.toInt(deposit)})}\n      >\n        Add funds\n      </Button>\n    </Modal>\n  );\n\n  return {\n    modal,\n    modalControl,\n  };\n}\nexport function StreamDepositButton({stream}) {\n  const depositButton = useDepositButton({stream});\n  return (\n    <>\n      <Button\n        variant=\"filled\"\n        type=\"button\"\n        onClick={depositButton.modalControl.turnOn}\n      >\n        <Plus className=\"twind-mr-2\" />\n        Add funds\n      </Button>\n      {depositButton.modal}\n    </>\n  );\n}\n\nexport function StreamDepositButtonOutlined({stream, variant = 'filled'}) {\n  const depositButton = useDepositButton({stream});\n  return (\n    <>\n      <Button\n        variant={variant}\n        color=\"dark\"\n        type=\"button\"\n        onClick={depositButton.modalControl.turnOn}\n      >\n        <PlusGradient className=\"twind-mr-2\" />\n        Add funds\n      </Button>\n      {depositButton.modal}\n    </>\n  );\n}\n","import React from 'react';\n\nexport function useBool(initial) {\n  const [on, setOn] = React.useState(initial);\n\n  return {\n    on,\n    off: !on,\n    toggle: () => setOn(!on),\n    turnOff: () => setOn(false),\n    turnOn: () => setOn(true),\n  };\n}\n","import React, {useEffect, useState} from 'react';\nimport {intervalToDuration, formatDuration, isValid} from 'date-fns';\n\nconst formatDistanceLocale = {\n  xYears: '{{count}} years',\n  xMonths: '{{count}} months',\n  xDays: '{{count}}d',\n  xSeconds: '{{count}}s',\n  xMinutes: '{{count}}m',\n  xHours: '{{count}}h',\n};\n\nconst shortEnLocale = {\n  formatDistance: (token, count) => {\n    return formatDistanceLocale[token].replace('{{count}}', count);\n  },\n};\n\nfunction isValidDate(d) {\n  return d instanceof Date && !isNaN(d);\n}\n\nexport function DurationTimer({untilDate, suffix}) {\n  const dateValid = isValidDate(untilDate);\n\n  const [expired, setExpired] = useState(\n    dateValid ? new Date().getTime() > untilDate.getTime() : true,\n  );\n  const [duration, setDuration] = useState(\n    expired ? null : intervalToDuration({start: new Date(), end: untilDate}),\n  );\n\n  useEffect(() => {\n    if (!isValidDate(untilDate)) return;\n\n    let id = setInterval(() => {\n      const isExpired = new Date().getTime() > untilDate.getTime();\n      setExpired(isExpired);\n      setDuration(null);\n\n      if (isExpired) {\n        return;\n      }\n\n      const duration = intervalToDuration({start: new Date(), end: untilDate});\n      setDuration(duration);\n    }, 1000);\n\n    return () => clearInterval(id);\n  }, [untilDate, expired]);\n\n  if (!dateValid) {\n    return <span>Invalid Date</span>;\n  }\n\n  const formatted = !duration\n    ? ''\n    : formatDuration(duration, {\n        locale: shortEnLocale,\n      }) + (suffix || '');\n\n  return <span>{formatted}</span>;\n}\n","import {TokenFormatter} from '../../lib/formatting';\nimport {STREAM_STATUS} from '../stream-control/lib';\n\nexport function streamViewData(stream) {\n  const tf = TokenFormatter(stream.token_name);\n\n  // time left calculations\n  const secondsLeft = tf.ticksToMs(\n    Math.round(\n      (stream.balance - stream.available_to_withdraw) / stream.tokens_per_tick,\n    ),\n  );\n\n  const dateEnd = new Date(new Date().getTime() + secondsLeft);\n\n  // progress bar calculations\n  const full = Number(stream.balance) + Number(stream.tokens_total_withdrawn);\n  const withdrawn = Number(stream.tokens_total_withdrawn);\n  const streamed =\n    Number(stream.tokens_total_withdrawn) +\n    Number(stream.available_to_withdraw);\n  const available = Number(stream.available_to_withdraw);\n\n  const left = full - streamed;\n  const progresses = [withdrawn / full, streamed / full];\n\n  const percentages = {\n    left: (full - streamed) / full,\n    streamed: streamed / full,\n    withdrawn: withdrawn / full,\n    available: available / full,\n  };\n\n  const isDead =\n    stream.status === STREAM_STATUS.FINISHED ||\n    stream.status === STREAM_STATUS.INTERRUPTED;\n\n  return {\n    dateEnd,\n    progresses,\n    tf,\n    isDead,\n    percentages,\n    progress: {\n      full,\n      withdrawn,\n      streamed,\n      left,\n      available,\n    },\n  };\n}\n","import classNames from 'classnames';\nimport React from 'react';\nimport {StreamingSpeed} from './StreamingSpeed';\nimport {ProgressBar, Button, TokenImage} from '../../components/kit';\nimport {StreamControls, StreamDepositButton} from '../stream-control';\nimport {DurationTimer} from '../../components/DurationTimer';\nimport {routes} from '../../lib/routing';\nimport {streamViewData} from './streamViewData';\n\nconst streamType = {\n  stream_id: 'FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST',\n  description: 'test stream',\n  owner_id: 'kpr.testnet',\n  receiver_id: 'pinkinice.testnet',\n  token_name: 'NEAR',\n  timestamp_created: '1630964802206727665',\n  balance: '3472735225910300000000000',\n  tokens_per_tick: '100000000000',\n  auto_deposit_enabled: false,\n  status: 'ACTIVE',\n  tokens_total_withdrawn: '27264774089700000000000',\n  available_to_withdraw: '3472735225910300000000000',\n  history: [\n    {\n      actor: 'dev-1630964633889-96006156236045',\n      action_type: 'Deposit',\n      amount: '3500000000000000000000000',\n      timestamp: '1630964802206727665',\n    },\n  ],\n  direction: 'in',\n};\n\nexport function StreamCard({stream = streamType, direction, className}) {\n  const {\n    dateEnd,\n    progresses,\n    tf,\n    progress: {full, withdrawn, streamed},\n  } = streamViewData(stream);\n\n  return (\n    <div\n      className={classNames(\n        'twind-grid twind-grid-cols-12 twind-gap-6 twind-justify-items-center',\n        'twind-p-10 twind-bg-input twind-rounded-3xl',\n        className,\n      )}\n    >\n      <div className=\"twind-w-full twind-col-span-12 xl:twind-col-span-5 2xl:twind-col-span-6 twind-justify-self-start\">\n        <div className=\"twind-flex twind-items-center\">\n          <TokenImage tokenName={stream.token_name} className=\"twind-mr-4\" />\n          <div className=\"twind-w-full twind-gap-4 twind-flex twind-items-end\">\n            <div className=\"twind-text-2xl twind-whitespace-nowrap twind-flex-shrink-0\">\n              {tf.amount(streamed)} of {tf.amount(full)}{' '}\n              <span className=\"twind-uppercase\">{stream.token_name}</span>\n            </div>\n\n            <StreamingSpeed stream={stream} />\n\n            <div className=\"twind-whitespace-nowrap\">\n              <DurationTimer untilDate={dateEnd} suffix=\" remaining\" />\n            </div>\n          </div>\n        </div>\n        <ProgressBar className=\"twind-mt-5\" progresses={progresses} />\n      </div>\n      <div className=\"twind-col-span-2\">\n        <div className=\"twind-text-gray\">Receiver:</div>\n        <div>{stream.receiver_id}</div>\n      </div>\n      <div className=\"twind-col-span-2\">\n        <div className=\"twind-text-gray\">Status:</div>\n        <StreamControls minimal stream={stream} />\n      </div>\n      <div className=\"twind-col-span-2 twind-flex twind-items-start\">\n        {direction === 'out' ? <StreamDepositButton stream={stream} /> : null}\n        <Button\n          className=\"twind-ml-3\"\n          variant=\"filled\"\n          link\n          to={routes.stream(stream.stream_id)}\n        >\n          Inspect\n        </Button>\n      </div>\n    </div>\n  );\n}\n","import {useState, useEffect, useMemo} from 'react';\n\nexport function useFilter({options}) {\n  let keys = Object.keys(options);\n\n  const [option, selectOption] = useState(keys[0]);\n  const currentFilterFunction = options[option];\n\n  const filter = useMemo(\n    () => ({\n      option,\n      selectOption,\n      options,\n      optionsArray: keys,\n      currentFilterFunction,\n    }),\n    [options, option],\n  );\n\n  return filter;\n}\n\nexport function useFilters({items, filters}) {\n  const [filteredItems, setFilteredItems] = useState([]);\n  const [filterCounts, setFilterCounts] = useState([]);\n\n  useEffect(() => {\n    let filteredItems = items;\n    let filterCounts = [];\n\n    filters.forEach((filter) => {\n      const filterRunResult = {};\n      // run filter for every possible function\n      Object.keys(filter.options).forEach((option) => {\n        const filtered = filteredItems.filter(filter.options[option]);\n\n        filterRunResult[option] = filtered;\n      });\n\n      // calc counts for every option in filter\n      const currentFilterCount = {};\n      Object.keys(filterRunResult).forEach(\n        (option) =>\n          (currentFilterCount[option] = filterRunResult[option].length),\n      );\n\n      filterCounts.push(currentFilterCount);\n      // set items to selected filter\n      filteredItems = filterRunResult[filter.option];\n    });\n\n    setFilterCounts(filterCounts);\n    setFilteredItems(filteredItems);\n  }, [items, filters]);\n\n  return {\n    filterCounts,\n    filteredItems,\n  };\n}\n","import {useMemo} from 'react';\nimport {useFilter, useFilters} from '../lib';\nimport {STREAM_STATUS, STREAM_DIRECTION} from '../../stream-control/lib';\n\nconst STREAM_TYPE_FILTER = {\n  ALL: 'All',\n  INCOMING: 'Incoming',\n  OUTGOING: 'Outgoing',\n};\n\nconst STREAM_STATUS_FILTER = {\n  ALL: 'All',\n  ACTIVE: 'Active',\n  ARCHIVED: 'Archived',\n  [STREAM_STATUS.FINISHED]: 'Finished',\n  [STREAM_STATUS.INTERRUPTED]: 'Interrupted',\n};\n\nexport function useStreamFilters(streams) {\n  const statusOptions = useMemo(\n    () => ({\n      [STREAM_STATUS_FILTER.ALL]: () => true,\n      [STREAM_STATUS_FILTER.ACTIVE]: (stream) =>\n        stream.status === STREAM_STATUS.ACTIVE,\n      [STREAM_STATUS_FILTER.ARCHIVED]: (stream) =>\n        stream.status === STREAM_STATUS.ARCHIVED,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.INTERRUPTED]]: (stream) =>\n        stream.status === STREAM_STATUS.INTERRUPTED,\n      [STREAM_STATUS_FILTER[STREAM_STATUS.FINISHED]]: (stream) =>\n        stream.status === STREAM_STATUS.FINISHED,\n    }),\n    [],\n  );\n  const directionOptions = useMemo(\n    () => ({\n      [STREAM_TYPE_FILTER.ALL]: () => true,\n      [STREAM_TYPE_FILTER.INCOMING]: (stream) =>\n        STREAM_DIRECTION.IN === stream.direction,\n      [STREAM_TYPE_FILTER.OUTGOING]: (stream) =>\n        STREAM_DIRECTION.OUT === stream.direction,\n    }),\n    [],\n  );\n\n  const statusFilter = useFilter({\n    options: statusOptions,\n  });\n\n  const directionFilter = useFilter({\n    options: directionOptions,\n  });\n\n  const combinedFilters = useMemo(\n    () => [directionFilter, statusFilter, directionFilter],\n    [directionFilter, statusFilter],\n  );\n\n  const result = useFilters({\n    items: streams,\n    filters: combinedFilters,\n  });\n\n  return {\n    statusFilter,\n    directionFilter,\n    result,\n  };\n}\n","import React, {useEffect, useState} from 'react';\nimport classNames from 'classnames';\nimport {useStreamFilters} from './useStreamFilters';\nimport {Filter, FilterOptionWithCounter} from '../../../components/kit';\n\nfunction compareBy(a, b, key) {\n  if (Number(a[key]) > Number(b[key])) {\n    return -1;\n  } else if (Number(a[key]) < Number(b[key])) {\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nconst sorts = {\n  bigBalanceFirst: {\n    label: 'With big balances',\n    fn: (a, b) => compareBy(a, b, 'balance'),\n  },\n  highSpeedFirst: {\n    label: 'With high speed',\n    fn: (a, b) => compareBy(a, b, 'tokens_per_tick'),\n  },\n  highSpeedLast: {\n    label: 'With low speed',\n    fn: (a, b) => compareBy(a, b, 'tokens_per_tick') * -1,\n  },\n};\nexport function StreamFilters({items, onFilterDone, className}) {\n  const filter = useStreamFilters(items);\n  const [sorting, setSorting] = useState(sorts.highSpeedFirst);\n  const sortOptions = Object.values(sorts);\n\n  useEffect(() => {\n    const sorted = [...filter.result.filteredItems];\n    sorted.sort(sorting.fn);\n\n    onFilterDone(sorted);\n  }, [filter.result.filteredItems, onFilterDone, sorting.fn]);\n\n  return (\n    <div className={classNames('twind-flex', className)}>\n      <Filter\n        className=\"twind-mr-5\"\n        options={filter.directionFilter.optionsArray}\n        label=\"Type:\"\n        active={filter.directionFilter.option}\n        onChange={filter.directionFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[0];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <Filter\n        options={filter.statusFilter.optionsArray}\n        label=\"Status:\"\n        active={filter.statusFilter.option}\n        onChange={filter.statusFilter.selectOption}\n        renderOption={(option) => {\n          const counts = filter.result.filterCounts[1];\n          return (\n            <FilterOptionWithCounter\n              option={option}\n              count={counts ? counts[option] : ''}\n            />\n          );\n        }}\n      />\n      <div className=\"twind-flex-grow\"></div>\n      <Filter\n        minimal\n        options={sortOptions}\n        label=\"Show first:\"\n        active={sorting}\n        onChange={setSorting}\n        renderOption={(option) => {\n          return <span>{option.label}</span>;\n        }}\n        renderActive={(option) => {\n          return <span>{option.label}</span>;\n        }}\n      />\n    </div>\n  );\n}\n","import useSWR from 'swr';\n\nasync function fetchStream({streamId}, {near}) {\n  let stream = await near.contractApi.getStream({streamId});\n\n  return stream;\n}\n\nasync function fetchStreams({inputs, outputs}, {near}) {\n  let inputStreams = await Promise.all(\n    inputs.map((streamId) => near.contractApi.getStream({streamId})),\n  );\n\n  let outputStreams = await Promise.all(\n    outputs.map((streamId) => near.contractApi.getStream({streamId})),\n  );\n\n  return {\n    inputs: inputStreams.map((stream) => ({...stream, direction: 'in'})),\n    outputs: outputStreams.map((stream) => ({...stream, direction: 'out'})),\n  };\n}\n\nexport function useAccount({near}) {\n  const swr = useSWR(\n    ['account', near.near.accountId],\n    near.contractApi.getCurrentAccount,\n    {\n      errorRetryInterval: 250,\n    },\n  );\n\n  return swr;\n}\n\nexport function useStreams({near, accountSWR}) {\n  const account = accountSWR.data;\n  const swr = useSWR(\n    () => {\n      const key = account\n        ? ['streams', account.account_id, account.last_action]\n        : false;\n\n      return key;\n    },\n    () =>\n      fetchStreams(\n        {inputs: account.inputs, outputs: account.outputs},\n        {\n          near,\n        },\n      ),\n  );\n\n  return swr;\n}\n\nexport function useSingleStream({streamId}, {near, accountSWR}) {\n  const account = accountSWR.data;\n  const swr = useSWR(\n    () => {\n      const key = account\n        ? ['stream', streamId, account.id, account.last_action]\n        : false;\n\n      return key;\n    },\n    async () => {\n      let stream = await fetchStream(\n        {streamId: streamId},\n        {\n          near,\n        },\n      );\n\n      if (stream.owner_id === account.account_id) {\n        stream.direction = 'out';\n      } else {\n        stream.direction = 'in';\n      }\n\n      return stream;\n    },\n  );\n\n  return swr;\n}\n","import React, {useMemo, useState} from 'react';\nimport {useNear} from '../features/near-connect/useNear';\nimport {StreamCard} from '../features/stream-view';\nimport {StreamFilters} from '../features/filtering/streams';\nimport {Button} from '../components/kit';\nimport {routes} from '../lib/routing';\nimport {useStreamControl} from '../features/stream-control/useStreamControl';\nimport {useAccount, useStreams} from '../features/xyiming-resources';\n\nconst __INPUTS = [];\nconst __OUTPUTS = [];\n\nexport function MyStreamsPage() {\n  const near = useNear();\n  const [filteredItems, setFiltered] = useState([]);\n  const streamControl = useStreamControl();\n  const accountSWR = useAccount({near});\n  const streamsSWR = useStreams({near, accountSWR});\n\n  const isIncomingStream = (stream) => {\n    if (stream.owner_id === near.near.accountId) {\n      return false;\n    }\n    return true;\n  };\n\n  async function updateAllAndWithdraw() {\n    await streamControl.updateAllAndWithdraw();\n    accountSWR.mutate();\n  }\n\n  const streams = streamsSWR.data;\n\n  const inputs = streams ? streams.inputs : __INPUTS;\n  const outputs = streams ? streams.outputs : __OUTPUTS;\n  console.log({inputs, outputs, streams});\n  const allStreams = useMemo(() => inputs.concat(outputs), [inputs, outputs]);\n\n  return (\n    <div className=\"twind-container twind-mx-auto twind-p-12\">\n      <div className=\"twind-flex twind-mb-12\">\n        <h1 className=\"twind-text-3xl \">All Streams</h1>\n        <div className=\"twind-flex-grow\"></div>\n        <Button\n          loading={streamControl.loading}\n          loadingText=\"Updating account...\"\n          variant=\"main\"\n          size=\"normal\"\n          onClick={updateAllAndWithdraw}\n        >\n          Update streams and withdraw\n        </Button>\n      </div>\n      <StreamFilters\n        items={allStreams}\n        onFilterDone={setFiltered}\n        className=\"twind-mb-10 twind-relative twind-z-10\"\n      />\n      {!streams ? (\n        <div>Loading</div>\n      ) : allStreams.length === 0 ? (\n        <div className=\"twind-flex twind-flex-col twind-w-80 twind-mx-auto\">\n          <h3 className=\"twind-text-3xl twind-text-center twind-my-12 \">\n            You dont have any streams yet.\n          </h3>\n          <Button variant=\"main\" link to={routes.send}>\n            Create First Stream\n          </Button>\n        </div>\n      ) : filteredItems.length === 0 ? (\n        <h3 className=\"twind-text-3xl twind-text-center twind-my-12 twind-w-80 twind-mx-auto\">\n          No streams matching your filters. <br />\n          Try selecting different filters!\n        </h3>\n      ) : (\n        filteredItems.map((stream) => (\n          <StreamCard\n            key={stream.stream_id}\n            stream={stream}\n            className=\"twind-mb-4\"\n            direction={isIncomingStream(stream) ? 'in' : 'out'}\n          />\n        ))\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport {NearAuthButton} from '../features/near-auth/NearAuthButton';\nimport {useNear} from '../features/near-connect/useNear';\nimport {Redirect} from 'react-router-dom';\n\nexport function AuthorizePage() {\n  const near = useNear();\n\n  return (\n    <div className=\"twind-my-24 twind-text-center\">\n      <h1 className=\"twind-text-3xl twind-mb-4 twind-font-semibold\">\n        {' '}\n        Login via NEAR Network{' '}\n      </h1>\n      <p className=\"twind-text-gray\">\n        Click button below to login or create new account\n      </p>\n      <NearAuthButton className=\"twind-mt-10\" />\n    </div>\n  );\n}\n","import React from 'react';\nimport {useParams} from 'react-router';\nimport {DurationTimer} from '../components/DurationTimer';\nimport {TokenImage} from '../components/kit/TokenImage/TokenImage';\nimport {useNear} from '../features/near-connect/useNear';\nimport {streamViewData, StreamingSpeed} from '../features/stream-view';\nimport {useAccount, useSingleStream} from '../features/xyiming-resources';\nimport {format} from 'date-fns';\nimport numbro from 'numbro';\nimport classNames from 'classnames';\nimport {\n  StreamControls,\n  StreamDepositButtonOutlined,\n} from '../features/stream-control';\n\nconst streamType = {\n  stream_id: 'FnVkAYZu4XED3o44pZPvrnghVEMxo3GiHszUT4orjYST',\n  description: 'test stream',\n  owner_id: 'kpr.testnet',\n  receiver_id: 'pinkinice.testnet',\n  token_name: 'NEAR',\n  timestamp_created: '1630964802206727665',\n  balance: '3472735225910300000000000',\n  tokens_per_tick: '100000000000',\n  auto_deposit_enabled: false,\n  status: 'ACTIVE',\n  tokens_total_withdrawn: '27264774089700000000000',\n  available_to_withdraw: '3472735225910300000000000',\n  history: [\n    {\n      actor: 'dev-1630964633889-96006156236045',\n      action_type: 'Deposit',\n      amount: '3500000000000000000000000',\n      timestamp: '1630964802206727665',\n    },\n  ],\n  direction: 'in',\n};\n\nconst VerticalData = ({label, children}) => (\n  <div>\n    <div className=\"twind-text-gray twind-text-sm\">{label}</div>\n    <div className=\"twind-font-semibold twind-text-lg\">{children}</div>\n  </div>\n);\n\nconst HorizontalData = ({label, children}) => (\n  <div className=\"twind-flex twind-justify-between twind-my-3\">\n    <div className=\"twind-text-gray twind-text-sm\">{label}</div>\n    <div className=\"twind-text-sm twind-text-right\">{children}</div>\n  </div>\n);\n\nfunction StreamOverviewCard({\n  stream = streamType,\n  account,\n  className,\n  ...rest\n}) {\n  const {\n    dateEnd,\n    tf,\n    percentages,\n    progress: {full, streamed, withdrawn, left, available},\n    progresses,\n  } = streamViewData(stream);\n\n  console.log(progresses);\n  return (\n    <div\n      className={classNames(\n        'twind-pt-10 twind-p-9 twind-bg-input twind-rounded-3xl',\n        className,\n      )}\n    >\n      <div className=\"twind-flex twind-text-center twind-justify-between\">\n        <VerticalData label=\"Receiver:\">{stream.receiver_id}</VerticalData>\n\n        <VerticalData label=\"Time Remaining:\">\n          <DurationTimer untilDate={dateEnd} />\n        </VerticalData>\n      </div>\n      <div className=\"twind-border-t twind-border-border twind-mt-8 twind-mb-9\" />\n      <HorizontalData label=\"Stream Created:\">\n        {format(new Date(stream.timestamp_created / 1000000), 'Yo')}\n      </HorizontalData>\n      <HorizontalData label=\"Token:\">{stream.token_name}</HorizontalData>\n      <HorizontalData label=\"Total:\">\n        {tf.amount(full)} {stream.token_name}\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Transferred:\">\n        <span>\n          {tf.amount(streamed)} {stream.token_name}{' '}\n          <span className=\"twind-text-gray\">\n            (\n            {numbro(percentages.streamed).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Left:\">\n        <span>\n          {tf.amount(left)} {stream.token_name}{' '}\n          <span className=\"twind-text-gray\">\n            (\n            {numbro(percentages.left).format({\n              output: 'percent',\n              mantissa: 2,\n            })}\n            )\n          </span>\n        </span>\n      </HorizontalData>\n      <HorizontalData label=\"Tokens Available:\">\n        {tf.amount(available)} {stream.token_name}\n      </HorizontalData>\n      <HorizontalData label=\"Speed:\">\n        {tf.tokensPerS(stream.tokens_per_tick)} {stream.token_name}\n      </HorizontalData>\n\n      {stream.direction === 'in' ? (\n        <HorizontalData label=\"Latest Withdrawal:\">\n          {format(new Date(account.last_action / 1000000), 'MMM dd, Yo  H:m')}\n        </HorizontalData>\n      ) : (\n        ''\n      )}\n\n      <HorizontalData label=\"Stream ID:\">\n        {tf.amount(full)} {stream.token_name}\n      </HorizontalData>\n    </div>\n  );\n}\nexport function StreamPage() {\n  const near = useNear();\n  const params = useParams();\n\n  const accountSWR = useAccount({near});\n  const streamSWR = useSingleStream(\n    {streamId: params.id},\n    {\n      near,\n      accountSWR,\n    },\n  );\n  const account = accountSWR.data;\n  const stream = streamSWR.data;\n  console.log(account, stream);\n  if (streamSWR.error || accountSWR.error) {\n    return <div>Erro!</div>;\n  }\n  if (!stream || !account) {\n    return <div>Loading</div>;\n  }\n  const isIncoming = stream.direction === 'in';\n  const isOutgoing = stream.direction === 'out';\n\n  const {\n    tf,\n    progresses,\n    isDead,\n    progress: {full, withdrawn, streamed},\n  } = streamViewData(stream);\n\n  return (\n    <div className=\"twind-container twind-mx-auto twind-p-12\">\n      <div>Header</div>\n\n      <div className=\"twind-flex twind-justify-between\">\n        <div className=\"twind-flex twind-flex-col twind-items-center twind-flex-grow\">\n          <TokenImage\n            size={14}\n            tokenName={stream.token_name}\n            className=\"twind-mb-8\"\n          />\n          <div className=\"twind-text-6xl twind-font-semibold\">\n            {tf.amount(streamed)}\n          </div>\n          <div className=\"twind-text-gray twind-font-semibold\">\n            of {tf.amount(full)}\n          </div>\n          <StreamingSpeed stream={stream} className=\"twind-mt-6 twind-mb-6\" />\n          {isDead ? (\n            ''\n          ) : (\n            <div className=\"twind-flex\">\n              <StreamControls stream={stream} className=\"twind-mr-2\" />\n              {isOutgoing ? (\n                <StreamDepositButtonOutlined\n                  variant=\"outlined\"\n                  stream={stream}\n                />\n              ) : null}\n            </div>\n          )}\n        </div>\n        <StreamOverviewCard\n          className=\"twind-w-1/3\"\n          stream={stream}\n          account={account}\n        />\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport 'error-polyfill';\nimport 'bootstrap/dist/js/bootstrap.bundle';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.scss';\nimport {\n  HashRouter as Router,\n  Link,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\nimport SendPage from './pages/Send';\nimport {Header} from './components/Header';\nimport {NearContext, useCreateNear} from './features/near-connect/useNear';\nimport {MyStreamsPage} from './pages/MyStreams';\nimport {AccountPage} from './pages/Account';\nimport {AuthorizePage} from './pages/Authorize';\nimport {StreamPage} from './pages/StreamPage';\nimport {routes} from './lib/routing';\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\nfunction PrivateRoute({children, allowed, redirect, ...rest}) {\n  return (\n    <Route\n      {...rest}\n      render={({location}) => {\n        console.log(`Render ${rest.path}, allowed? ${allowed}`);\n        return allowed ? children : redirect;\n      }}\n    />\n  );\n}\n\nfunction AppFn() {\n  const near = useCreateNear();\n\n  return (\n    <NearContext.Provider value={near}>\n      <div className=\"twind-bg-dark text-white\">\n        {near.inited ? (\n          <Router basename={process.env.PUBLIC_URL}>\n            <Header />\n\n            <Switch>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/\" />}\n                allowed={!near.auth.signedIn}\n                path=\"/authorize\"\n              >\n                <AuthorizePage />\n              </PrivateRoute>\n\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/\"\n              >\n                <SendPage />\n              </PrivateRoute>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/my_streams/:id\"\n              >\n                <StreamPage />\n              </PrivateRoute>\n              <PrivateRoute\n                exact\n                redirect={<Redirect to=\"/authorize\" />}\n                allowed={near.auth.signedIn}\n                path=\"/my_streams\"\n              >\n                <MyStreamsPage />\n              </PrivateRoute>\n            </Switch>\n          </Router>\n        ) : null}\n      </div>\n    </NearContext.Provider>\n  );\n}\n\nexport default AppFn;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './styles/index.scss';\nimport Modal from 'react-modal';\n\nconst rootEl = document.getElementById('root');\n\nModal.setAppElement(rootEl);\nReactDOM.render(<App />, rootEl);\n"],"sourceRoot":""}